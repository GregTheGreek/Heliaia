/*! For license information please see 1.js.LICENSE.txt */
exports.id=1,exports.ids=[1],exports.modules={23:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Address=void 0;const r=s(1);class Address extends r.Data{constructor(e){super(e,Address.ByteLength)}static from(e){return new Address(e)}}t.Address=Address,Address.ByteLength=20},36:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(s(414),t),n(s(422),t),n(s(760),t),n(s(423),t)},759:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockParams=void 0,t.BlockParams={INITIAL_BASE_FEE_PER_GAS:1000000000n,ELASTICITY:2n,BASE_FEE_MAX_CHANGE_DENOMINATOR:8n}},414:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;const r=s(1),n=s(8),i=s(19),o=s(422),a=s(1),c=s(759);class Block{constructor(e,t){if(this._common=t,e){const t=i.decode(e);this._raw=t[0],this._rawTransactions=t[1]||[];const s=t[3];this.header=o.makeHeader(this._raw,s),this._rawTransactionMetaData=t[4]||[],this._size=r.Quantity.from(t[5]).toNumber()}}hash(){return this._hash||(this._hash=r.Data.from(a.keccak(i.encode(this._raw)),32))}getTransactions(){const e=this._common;return this._rawTransactions.map(((t,s)=>{const[i,o]=this._rawTransactionMetaData[s],a=[i,o,this.hash().toBuffer(),this.header.number.toBuffer(),r.Quantity.from(s).toBuffer()];return n.TransactionFactory.fromDatabaseTx(t,e,a)}))}toJSON(e=!1){const t=this.hash(),s=this.getTxFn(e),i=t.toBuffer(),o=this.header,a=o.number.toBuffer(),c=this._common,l=this._rawTransactions.map(((e,t)=>{const[l,u]=this._rawTransactionMetaData[t],h=[l,u,i,a,r.Quantity.from(t).toBuffer()],d=n.TransactionFactory.fromDatabaseTx(e,c,h);return d.updateEffectiveGasPrice(o.baseFeePerGas),s(d)}));return{hash:t,...o,size:r.Quantity.from(this._size),transactions:l,uncles:[]}}getTxFn(e=!1){return e?e=>e.toJSON(this._common):e=>e.hash}static fromParts(e,t,s,r,n,i){const a=new Block(null,i);return a._raw=e,a._rawTransactions=t,a.header=o.makeHeader(e,s),a._rawTransactionMetaData=r,a._size=n,a}static calcNextBaseFeeBigInt(e){let t;const s=e,r=s.gasLimit.toBigInt()/c.BlockParams.ELASTICITY,n=s.gasUsed.toBigInt(),i=s.baseFeePerGas?s.baseFeePerGas.toBigInt():c.BlockParams.INITIAL_BASE_FEE_PER_GAS;if(r===n)t=i;else if(n>r){const e=i*(n-r)/r/c.BlockParams.BASE_FEE_MAX_CHANGE_DENOMINATOR;t=e>1n?i+e:i+1n}else{t=i-i*(r-n)/r/c.BlockParams.BASE_FEE_MAX_CHANGE_DENOMINATOR}return t}static calcNBlocksMaxBaseFee(e,t){const{BASE_FEE_MAX_CHANGE_DENOMINATOR:s}=c.BlockParams;let r=this.calcNextBaseFeeBigInt(t);for(;--e;)r+=r/s;return r}static calcNextBaseFee(e){const t=e.header;return void 0===t.baseFeePerGas?void 0:this.calcNextBaseFeeBigInt(t)}}t.Block=Block,Block.INITIAL_BASE_FEE_PER_GAS=c.BlockParams.INITIAL_BASE_FEE_PER_GAS},422:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeBlock=t.makeHeader=t.getBlockSize=void 0;const r=s(1),n=s(0),i=s(423),o=s(414);class BnExtra extends n.BN{constructor(e){super(e,10,"be"),this.buf=e}}function makeHeader(e,t){return{parentHash:r.Data.from(e[0],32),sha3Uncles:r.Data.from(e[1],32),miner:r.Data.from(e[2],20),stateRoot:r.Data.from(e[3],32),transactionsRoot:r.Data.from(e[4],32),receiptsRoot:r.Data.from(e[5],32),logsBloom:r.Data.from(e[6],256),difficulty:r.Quantity.from(e[7],!1),number:r.Quantity.from(e[8],!1),gasLimit:r.Quantity.from(e[9],!1),gasUsed:r.Quantity.from(e[10],!1),timestamp:r.Quantity.from(e[11],!1),extraData:r.Data.from(e[12]),mixHash:r.Data.from(e[13],32),nonce:r.Data.from(e[14],8),totalDifficulty:r.Quantity.from(t,!1),baseFeePerGas:void 0===e[15]?void 0:r.Quantity.from(e[15],!1)}}t.getBlockSize=function getBlockSize(e,t){return e.length-t.length},t.makeHeader=makeHeader;t.RuntimeBlock=class RuntimeBlock{constructor(e,t,s,n,i,o,a,c,l){this.serializeBaseFeePerGas=!0;const u=o.toBuffer(),h=s.toBuffer();this.header={parentHash:t.toBuffer(),coinbase:{buf:h,toBuffer:()=>h},number:new BnExtra(e.toBuffer()),difficulty:new BnExtra(a.toBuffer()),totalDifficulty:r.Quantity.from(c.toBigInt()+a.toBigInt()).toBuffer(),gasLimit:new BnExtra(n),gasUsed:new BnExtra(i),timestamp:new BnExtra(u),baseFeePerGas:new BnExtra(void 0===l?r.BUFFER_ZERO:r.Quantity.from(l).toBuffer())},void 0===l&&(this.serializeBaseFeePerGas=!1)}finalize(e,t,s,a,c,l,u,h){const{header:d}=this,p=[d.parentHash,n.KECCAK256_RLP_ARRAY,d.coinbase.buf,a,e,t,s,d.difficulty.buf,d.number.buf,d.gasLimit.buf,0n===c?r.BUFFER_EMPTY:r.Quantity.from(c).toBuffer(),d.timestamp.buf,l.toBuffer(),r.BUFFER_32_ZERO,r.BUFFER_8_ZERO];this.serializeBaseFeePerGas&&void 0!==d.baseFeePerGas&&(p[15]=d.baseFeePerGas.buf);const{totalDifficulty:m}=d,g=[],y=[];u.forEach((e=>{g.push(e.raw),y.push([e.from.toBuffer(),e.hash.toBuffer()])}));const{serialized:b,size:_}=i.serialize([p,g,[],m,y]),w=new o.Block(null,u.length>0?u[0].common:null);return w._raw=p,w._rawTransactions=g,w.header=makeHeader(p,m),w.serializeBaseFeePerGas=void 0===p[15],w._rawTransactionMetaData=y,w._size=_,{block:w,serialized:b,storageKeys:h,transactions:u}}}},423:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=void 0;const r=s(19),n=s(1);t.serialize=function serialize(e){const t=r.encodeRange(e,0,3),s=t.length,i=r.encodeLength(s,192).length+s,o=r.encodeRange(e,3,2),a=r.encode(n.uintToBuffer(i));return{serialized:r.digest([t.output,o.output,[a]],s+o.length+a.length),size:i}}},760:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},115:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(s(90),t)},54:function(e,t,s){"use strict";var r,n,i,o,a,c,l=this&&this.__decorate||function(e,t,s,r){var n,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,s,o):n(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o},u=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},h=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const p=s(5),m=s(36),g=s(8),y=s(0),b=s(259),_=s(1),w=d(s(76)),v=d(s(778)),k=s(779),E=s(430),B=s(19),T=s(23),A=s(59);async function autofillDefaultTransactionValues(e,t,s,r,n){if(e.gas.isNull()){const r=n.miner.defaultTransactionGasLimit;r===_.RPCQUANTITY_EMPTY?e.gas=await t(s,p.Tag.LATEST):e.gas=r}if("gasPrice"in e&&e.gasPrice.isNull()&&(e.gasPrice=n.miner.defaultGasPrice),"maxFeePerGas"in e&&e.maxFeePerGas.isNull()){const t=r.blocks.latest;e.maxFeePerGas=_.Quantity.from(m.Block.calcNBlocksMaxBaseFee(3,t.header))}}const{version:P}={version:"7.0.0-alpha.1"},O=`Ganache/v${P}/EthereumJS TestRPC/v${P}/ethereum-js`,R=_.Data.from("0x3f"),S={eth:"1.0",net:"1.0",rpc:"1.0",web3:"1.0",evm:"1.0",personal:"1.0"};function assertExceptionalTransactions(e){let t,s=null;const r={};if(e.forEach((e=>{e.execException&&(s?(s=p.VM_EXCEPTIONS,t.push(`${e.hash.toString()}: ${e.execException}\n`),r[e.execException.data.hash]=e.execException.data):(s=p.VM_EXCEPTION,t=[e.execException.message],r[e.execException.data.hash]=e.execException.data))})),s){const e=new Error(s+t.join("\n"));throw e.data=r,e}}class EthereumApi{constructor(e,t,s){var l;r.set(this,(l=0,()=>_.Quantity.from(++l))),n.set(this,new Map),i.set(this,new Map),o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),u(this,o,e),u(this,c,t),u(this,a,s)}async db_putString(e,t,s){return!1}async db_getString(e,t){return""}async db_putHex(e,t,s){return!1}async db_getHex(e,t){return"0x00"}async bzz_hive(){return[]}async bzz_info(){return[]}async evm_mine(e){const t=h(this,a),s=h(this,o).chain.vmErrorsOnRPCResponse;if(null!==e&&"object"==typeof e){let{blocks:r,timestamp:n}=e;null==r&&(r=1);for(let e=0;e<r;e++){const e=await t.mine(A.Capacity.FillBlock,n,!0);s&&assertExceptionalTransactions(e)}}else{const r=await t.mine(A.Capacity.FillBlock,e,!0);s&&assertExceptionalTransactions(r)}return"0x0"}async evm_setAccountNonce(e,t){const s=T.Address.from(e).toBuffer(),r=h(this,a),n=r.vm.stateManager,i=await n.getAccount({buf:s});return i.nonce={toArrayLike:()=>_.Quantity.from(t).toBuffer()},await n.putAccount({buf:s},i),await r.mine(A.Capacity.Empty),!0}async evm_increaseTime(e){const t=1e3*("number"==typeof e?e:_.Quantity.from(e).toNumber());return Math.floor(h(this,a).increaseTime(t)/1e3)}async evm_setTime(e){let t;switch(typeof e){case"object":t=e.getTime();break;case"number":t=e;break;default:t=_.Quantity.from(e).toNumber()}return Math.floor(h(this,a).setTime(t)/1e3)}async evm_revert(e){return h(this,a).revert(_.Quantity.from(e))}async evm_snapshot(){return _.Quantity.from(h(this,a).snapshot())}async evm_unlockUnknownAccount(e,t=0){return h(this,c).unlockUnknownAccount(e.toLowerCase(),t)}async evm_lockUnknownAccount(e){const t=e.toLowerCase();if(h(this,c).knownAccounts.has(t))throw new Error("cannot lock known/personal account");return h(this,c).lockAccount(t)}async miner_start(e=1){if(!0===h(this,o).miner.legacyInstamine){const t=await h(this,a).resume(e);null!=t&&h(this,o).chain.vmErrorsOnRPCResponse&&assertExceptionalTransactions(t)}else h(this,a).resume(e);return!0}async miner_stop(){return h(this,a).pause(),!0}async miner_setGasPrice(e){return h(this,o).miner.defaultGasPrice=_.Quantity.from(e),!0}async miner_setEtherbase(e){return h(this,a).coinbase=T.Address.from(e),!0}async miner_setExtra(e){const t=_.Data.from(e),s=t.toBuffer().length;if(s>32)throw new Error(`extra exceeds max length. ${s} > 32`);return h(this,o).miner.extraData=t,!0}async web3_clientVersion(){return O}async web3_sha3(e){return _.Data.from(_.keccak(Buffer.from(e)))}async net_version(){return h(this,o).chain.networkId.toString()}async net_listening(){return!0}async net_peerCount(){return _.RPCQUANTITY_ZERO}async eth_estimateGas(e,t=p.Tag.LATEST){const s=h(this,a),r=s.blocks,n=(await r.get(t)).header,i=h(this,o),generateVM=()=>s.vm.copy();return new Promise(((t,r)=>{const{coinbase:o}=s,a=g.TransactionFactory.fromRpc(e,s.common);null==a.from&&(a.from=o),a.gas.isNull()&&(a.gas=i.miner.callGasLimit);const c=new m.RuntimeBlock(_.Quantity.from((n.number.toBigInt()||0n)+1n),n.parentHash,n.miner,a.gas.toBuffer(),n.gasUsed.toBuffer(),n.timestamp,i.miner.difficulty,n.totalDifficulty,0n),l={tx:a.toVmTransaction(),block:c,skipBalance:!0,skipNonce:!0};v.default(generateVM,l,((e,s)=>{if(e)return r(e);t(_.Quantity.from(s.gasEstimate.toArrayLike(Buffer)))}))}))}async eth_protocolVersion(){return R}async eth_syncing(){return!1}async eth_coinbase(){return h(this,a).coinbase}async eth_getBlockByNumber(e,t=!1){const s=await h(this,a).blocks.get(e).catch((e=>null));return s?s.toJSON(t):null}async eth_getBlockByHash(e,t=!1){const s=await h(this,a).blocks.getByHash(e).catch((e=>null));return s?s.toJSON(t):null}async eth_getBlockTransactionCountByNumber(e){const{blocks:t}=h(this,a),s=t.getEffectiveNumber(e),r=await t.getRawByBlockNumber(s);if(!r)return null;const[,n]=B.decode(r);return _.Quantity.from(n.length)}async eth_getBlockTransactionCountByHash(e){const{blocks:t}=h(this,a),s=await t.getNumberFromHash(e);if(!s)return null;const r=await t.getRawByBlockNumber(_.Quantity.from(s));if(!r)return null;const[,n]=B.decode(r);return _.Quantity.from(n.length)}async eth_getCompilers(){return[]}async eth_getTransactionByBlockHashAndIndex(e,t){const s=h(this,a),r=await s.blocks.getByHash(e).catch((e=>null));if(!r)return null;return r.getTransactions()[parseInt(_.Quantity.from(t).toString(),10)].toJSON(s.common)}async eth_getTransactionByBlockNumberAndIndex(e,t){const s=h(this,a),r=await s.blocks.get(e).catch((e=>null));if(!r)return null;return r.getTransactions()[parseInt(_.Quantity.from(t).toString(),10)].toJSON(s.common)}async eth_getUncleCountByBlockHash(e){return _.RPCQUANTITY_ZERO}async eth_getUncleCountByBlockNumber(e){return _.RPCQUANTITY_ZERO}async eth_getUncleByBlockHashAndIndex(e,t){return null}async eth_getUncleByBlockNumberAndIndex(e,t){return null}async eth_getWork(e){return[]}async eth_submitWork(e,t,s){return!1}async eth_submitHashrate(e,t){return!1}async eth_mining(){return h(this,a).isStarted()}async eth_hashrate(){return _.RPCQUANTITY_ZERO}async eth_gasPrice(){return h(this,o).miner.defaultGasPrice}async eth_accounts(){return h(this,c).addresses}async eth_blockNumber(){return h(this,a).blocks.latest.header.number}async eth_chainId(){return _.Quantity.from(h(this,o).chain.chainId)}async eth_getBalance(e,t=p.Tag.LATEST){return h(this,a).accounts.getBalance(T.Address.from(e),t)}async eth_getCode(e,t=p.Tag.LATEST){const{accounts:s}=h(this,a);return s.getCode(T.Address.from(e),t)}async eth_getStorageAt(e,t,s=p.Tag.LATEST){const r=h(this,a),n=r.blocks.getEffectiveNumber(s),i=await r.blocks.getRawByBlockNumber(n);if(!i)throw new Error("header not found");const[[,,,o]]=B.decode(i),c=r.trie.copy(!1);c.setContext(o,null,n);const l=_.Quantity.from(t).toBuffer(),u=l.length;let d;u<32?(d=Buffer.allocUnsafe(32).fill(0),l.copy(d,32-u)):d=32===u?l:l.slice(-32);const m=T.Address.from(e).toBuffer(),g=await c.get(m),y=B.decode(g)[2];c.setContext(y,m,n);const b=await c.get(d);return _.Data.from(B.decode(b))}async eth_getTransactionByHash(e){const{transactions:t}=h(this,a),s=_.Data.from(e).toBuffer(),r=await t.get(s);if(null===r){const e=t.transactionPool.find(s);return e?e.toJSON(h(this,a).common):null}return r.toJSON(h(this,a).common)}async eth_getTransactionReceipt(e){const{transactions:t,transactionReceipts:s,blocks:r,common:n}=h(this,a),i=_.Data.from(e),c=i.toBuffer(),l=t.get(c),u=s.get(c),d=l.then((e=>e?r.get(e.blockNumber.toBuffer()):null)),[p,m,g]=await Promise.all([l,u,d]);if(p)return m.toJSON(g,p,n);const y=h(this,o);if(y.miner.blockTime<=0&&!0!==y.miner.legacyInstamine&&h(this,a).isStarted()){null!=h(this,a).transactions.transactionPool.find(c)&&y.logging.logger.log(` > Ganache \`eth_getTransactionReceipt\` notice: the transaction with hash\n > \`${i.toString()}\` has not\n > yet been mined. See https://trfl.io/v7-instamine for additional information.`)}return null}async eth_sendTransaction(e){const t=h(this,a),s=g.TransactionFactory.fromRpc(e,t.common);if(null==s.from)throw new Error("from not found; is required");const r=s.from.toString(),n=h(this,c),i=n.knownAccounts.has(r),l=n.unlockedAccounts.has(r);if(!l){throw new Error(i?"authentication needed: password or unlock":"sender account not recognized")}if(await autofillDefaultTransactionValues(s,this.eth_estimateGas.bind(this),e,t,h(this,o)),l){const e=n.unlockedAccounts.get(r);return t.queueTransaction(s,e)}return t.queueTransaction(s)}async eth_signTransaction(e){const t=h(this,a),s=g.TransactionFactory.fromRpc(e,t.common);if(null==s.from)throw new Error("from not found; is required");const r=s.from.toString(),n=h(this,c),i=n.knownAccounts.has(r);if(!n.unlockedAccounts.has(r)){throw new Error(i?"authentication needed: password or unlock":"sender account not recognized")}const o=n.unlockedAccounts.get(r).toBuffer();return s.signAndHash(o),_.Data.from(s.serialized).toString()}async eth_sendRawTransaction(e){const t=h(this,a),s=g.TransactionFactory.fromString(e,t.common);return t.queueTransaction(s)}async eth_sign(e,t){const s=T.Address.from(e).toString().toLowerCase(),r=h(this,c).unlockedAccounts.get(s);if(null==r)throw new Error("cannot sign data; no private key");const n=h(this,o).chain.chainId,i=y.hashPersonalMessage(_.Data.from(t).toBuffer()),{v:a,r:l,s:u}=y.ecsign(i,r.toBuffer(),n);return y.toRpcSig(a,l,u,n)}async eth_signTypedData(e,t){return this.eth_signTypedData_v4(e,t)}async eth_signTypedData_v4(e,t){const s=T.Address.from(e).toString().toLowerCase(),r=h(this,c).unlockedAccounts.get(s);if(null==r)throw new Error("cannot sign data; no private key");if("string"==typeof t)throw new Error("cannot sign data; string sent, expected object");if(!t.types)throw new Error("cannot sign data; types missing");if(!t.types.EIP712Domain)throw new Error("cannot sign data; EIP712Domain definition missing");if(!t.domain)throw new Error("cannot sign data; domain missing");if(!t.primaryType)throw new Error("cannot sign data; primaryType missing");if(!t.message)throw new Error("cannot sign data; message missing");return b.signTypedData_v4(r.toBuffer(),{data:t})}eth_subscribe(e,t){const s=h(this,i);switch(e){case"newHeads":{const e=h(this,r).call(this),t=_.PromiEvent.resolve(e),n=h(this,a).on("block",(s=>{const r=s.header,n={logsBloom:r.logsBloom,miner:r.miner,difficulty:r.difficulty,totalDifficulty:r.totalDifficulty,extraData:r.extraData,gasLimit:r.gasLimit,gasUsed:r.gasUsed,hash:s.hash(),mixHash:s.header.mixHash,nonce:r.nonce,number:r.number,parentHash:r.parentHash,receiptsRoot:r.receiptsRoot,stateRoot:r.stateRoot,timestamp:r.timestamp,transactionsRoot:r.transactionsRoot,sha3Uncles:r.sha3Uncles};void 0!==r.baseFeePerGas&&(n.baseFeePerGas=r.baseFeePerGas),t.emit("message",{type:"eth_subscription",data:{result:JSON.parse(JSON.stringify(n)),subscription:e.toString()}})}));return s.set(e.toString(),n),t}case"logs":{const e=h(this,r).call(this),n=_.PromiEvent.resolve(e),{addresses:i,topics:o}=t?E.parseFilterDetails(t):{addresses:[],topics:[]},c=h(this,a).on("blockLogs",(t=>{const s=JSON.parse(JSON.stringify([...t.filter(i,o)]));n.emit("message",{type:"eth_subscription",data:{result:s,subscription:e.toString()}})}));return s.set(e.toString(),c),n}case"newPendingTransactions":{const e=h(this,r).call(this),t=_.PromiEvent.resolve(e),n=h(this,a).on("pendingTransaction",(s=>{const r=s.hash.toString();t.emit("message",{type:"eth_subscription",data:{result:r,subscription:e.toString()}})}));return s.set(e.toString(),n),t}case"syncing":{const e=h(this,r).call(this),t=_.PromiEvent.resolve(e);return h(this,i).set(e.toString(),(()=>{})),t}default:throw new p.CodedError(`no "${e}" subscription in eth namespace`,_.JsonRpcErrorCode.METHOD_NOT_FOUND)}}async eth_unsubscribe(e){const t=h(this,i),s=t.get(e);return!!s&&(t.delete(e),s(),!0)}async eth_newBlockFilter(){const e={updates:[],unsubscribe:h(this,a).on("block",(t=>{e.updates.push(t.hash())})),filter:null,type:p.FilterTypes.block},t=h(this,r).call(this);return h(this,n).set(t.toString(),e),t}async eth_newPendingTransactionFilter(){const e={updates:[],unsubscribe:h(this,a).on("pendingTransaction",(t=>{e.updates.push(t.hash)})),filter:null,type:p.FilterTypes.pendingTransaction},t=h(this,r).call(this);return h(this,n).set(t.toString(),e),t}async eth_newFilter(e){const t=h(this,a);null==e&&(e={});const{addresses:s,topics:i}=E.parseFilterDetails(e||{}),o={updates:[],unsubscribe:t.on("blockLogs",(r=>{const n=r.blockNumber,{fromBlock:a,toBlock:c}=E.parseFilterRange(e,t);a<=n&&c>=n&&o.updates.push(...r.filter(s,i))})),filter:e,type:p.FilterTypes.log},c=h(this,r).call(this);return h(this,n).set(c.toString(),o),c}async eth_getFilterChanges(e){const t=h(this,n).get(_.Quantity.from(e).toString());if(t){const e=t.updates;return t.updates=[],e}throw new Error("filter not found")}async eth_uninstallFilter(e){const t=_.Quantity.from(e).toString(),s=h(this,n).get(t);return!!s&&(s.unsubscribe(),h(this,n).delete(t))}async eth_getFilterLogs(e){const t=h(this,n).get(_.Quantity.from(e).toString());if(t&&t.type===p.FilterTypes.log)return this.eth_getLogs(t.filter);throw new Error("filter not found")}async eth_getLogs(e){return h(this,a).blockLogs.getLogs(e)}async eth_getTransactionCount(e,t=p.Tag.LATEST){return h(this,a).accounts.getNonce(T.Address.from(e),t)}async eth_call(e,t=p.Tag.LATEST){const s=h(this,a),r=h(this,a).common,n=s.blocks,i=await n.get(t),c=i.header,l=h(this,o);let u,d;u=void 0===e.gasLimit?void 0!==e.gas?_.Quantity.from(e.gas):l.miner.callGasLimit:_.Quantity.from(e.gasLimit),void 0===e.data?void 0!==e.input&&(d=_.Data.from(e.input)):d=_.Data.from(e.data);const g=m.Block.calcNextBaseFee(i);let y;const b=void 0!==e.gasPrice;if(r.isActivatedEIP(1559)){const t=void 0!==e.maxFeePerGas,s=void 0!==e.maxPriorityFeePerGas;if(b&&(t||s))throw new Error("both gasPrice and (maxFeePerGas or maxPriorityFeePerGas) specified");let r=0n,n=0n;if(t&&(r=BigInt(e.maxFeePerGas)),s&&(n=BigInt(e.maxPriorityFeePerGas)),n>0||r>0){const e=r-g,t=e<n?e:n;y=_.Quantity.from(g+t)}else y=_.Quantity.from(0)}else y=_.Quantity.from(b?0:e.gasPrice);const w=new m.RuntimeBlock(c.number,c.parentHash,s.coinbase,u.toBuffer(),c.gasUsed.toBuffer(),c.timestamp,l.miner.difficulty,c.totalDifficulty,g),v={gas:u,from:null==e.from?s.coinbase:T.Address.from(e.from),to:null==e.to?null:T.Address.from(e.to),gasPrice:y,value:null==e.value?null:_.Quantity.from(e.value),data:d,block:w};return s.simulateTransaction(v,i)}async debug_traceTransaction(e,t){return h(this,a).traceTransaction(e,t||{})}async debug_storageRangeAt(e,t,s,r,n){return h(this,a).storageRangeAt(e,_.Quantity.from(t).toNumber(),s,r,_.Quantity.from(n).toNumber())}async personal_listAccounts(){return h(this,c).addresses}async personal_newAccount(e){if("string"!=typeof e)throw new Error("missing value for required argument `passphrase`");const t=h(this,c),s=t.createRandomAccount(),r=s.address.toString(),n=await t.encrypt(s.privateKey,e);return t.encryptedKeyFiles.set(r,n),t.addresses.push(r),t.knownAccounts.add(r),s.address}async personal_importRawKey(e,t){if("string"!=typeof t)throw new Error("missing value for required argument `passphrase`");const s=h(this,c),r=w.default.createAccountFromPrivateKey(_.Data.from(e)),n=r.address.toString(),i=await s.encrypt(r.privateKey,t);return s.encryptedKeyFiles.set(n,i),s.addresses.push(n),s.knownAccounts.add(n),r.address}async personal_lockAccount(e){return h(this,c).lockAccount(e.toLowerCase())}async personal_unlockAccount(e,t,s=300){return h(this,c).unlockAccount(e.toLowerCase(),t,s)}async personal_sendTransaction(e,t){const s=h(this,a),r=g.TransactionFactory.fromRpc(e,s.common);if(null==r.from)throw new Error("from not found; is required");const n=r.from.toString(),i=h(this,c),l=i.encryptedKeyFiles.get(n);if(void 0===l)throw new Error("no key for given address or file");if(await autofillDefaultTransactionValues(r,this.eth_estimateGas.bind(this),e,s,h(this,o)),null!==l){const e=await i.decrypt(l,t);return s.queueTransaction(r,_.Data.from(e))}return s.queueTransaction(r)}async personal_signTransaction(e,t){const s=h(this,a),r=g.TransactionFactory.fromRpc(e,s.common);if(null==r.from)throw new Error("from not found; is required");const n=r.from.toString(),i=h(this,c),o=i.encryptedKeyFiles.get(n);if(null==o)throw new Error("no key for given address or file");const l=await i.decrypt(o,t);return r.signAndHash(l),_.Data.from(r.serialized).toString()}async rpc_modules(){return S}async shh_newIdentity(){return"0x00"}async shh_hasIdentity(e){return!1}async shh_newGroup(){return"0x00"}async shh_addToGroup(e){return!1}async shh_newFilter(e,t){return!1}async shh_uninstallFilter(e){return!1}async shh_getFilterChanges(e){return[]}async shh_getMessages(e){return!1}async shh_post(e){return!1}async shh_version(){return"2"}}r=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l([k.assertArgLength(3)],EthereumApi.prototype,"db_putString",null),l([k.assertArgLength(2)],EthereumApi.prototype,"db_getString",null),l([k.assertArgLength(3)],EthereumApi.prototype,"db_putHex",null),l([k.assertArgLength(2)],EthereumApi.prototype,"db_getHex",null),l([k.assertArgLength(0)],EthereumApi.prototype,"bzz_hive",null),l([k.assertArgLength(0)],EthereumApi.prototype,"bzz_info",null),l([k.assertArgLength(0,1)],EthereumApi.prototype,"evm_mine",null),l([k.assertArgLength(2)],EthereumApi.prototype,"evm_setAccountNonce",null),l([k.assertArgLength(1)],EthereumApi.prototype,"evm_increaseTime",null),l([k.assertArgLength(0,1)],EthereumApi.prototype,"evm_setTime",null),l([k.assertArgLength(1)],EthereumApi.prototype,"evm_revert",null),l([k.assertArgLength(0,1)],EthereumApi.prototype,"miner_start",null),l([k.assertArgLength(0)],EthereumApi.prototype,"miner_stop",null),l([k.assertArgLength(1)],EthereumApi.prototype,"miner_setGasPrice",null),l([k.assertArgLength(1)],EthereumApi.prototype,"miner_setEtherbase",null),l([k.assertArgLength(1)],EthereumApi.prototype,"miner_setExtra",null),l([k.assertArgLength(0)],EthereumApi.prototype,"web3_clientVersion",null),l([k.assertArgLength(1)],EthereumApi.prototype,"web3_sha3",null),l([k.assertArgLength(0)],EthereumApi.prototype,"net_version",null),l([k.assertArgLength(0)],EthereumApi.prototype,"net_listening",null),l([k.assertArgLength(0)],EthereumApi.prototype,"net_peerCount",null),l([k.assertArgLength(1,2)],EthereumApi.prototype,"eth_estimateGas",null),l([k.assertArgLength(0)],EthereumApi.prototype,"eth_protocolVersion",null),l([k.assertArgLength(0)],EthereumApi.prototype,"eth_syncing",null),l([k.assertArgLength(0)],EthereumApi.prototype,"eth_coinbase",null),l([k.assertArgLength(1,2)],EthereumApi.prototype,"eth_getBlockByNumber",null),l([k.assertArgLength(1,2)],EthereumApi.prototype,"eth_getBlockByHash",null),l([k.assertArgLength(1)],EthereumApi.prototype,"eth_getBlockTransactionCountByNumber",null),l([k.assertArgLength(1)],EthereumApi.prototype,"eth_getBlockTransactionCountByHash",null),l([k.assertArgLength(0)],EthereumApi.prototype,"eth_getCompilers",null),l([k.assertArgLength(2)],EthereumApi.prototype,"eth_getTransactionByBlockHashAndIndex",null),l([k.assertArgLength(2)],EthereumApi.prototype,"eth_getTransactionByBlockNumberAndIndex",null),l([k.assertArgLength(1)],EthereumApi.prototype,"eth_getUncleCountByBlockHash",null),l([k.assertArgLength(1)],EthereumApi.prototype,"eth_getUncleCountByBlockNumber",null),l([k.assertArgLength(2)],EthereumApi.prototype,"eth_getUncleByBlockHashAndIndex",null),l([k.assertArgLength(2)],EthereumApi.prototype,"eth_getUncleByBlockNumberAndIndex",null),l([k.assertArgLength(1)],EthereumApi.prototype,"eth_getWork",null),l([k.assertArgLength(3)],EthereumApi.prototype,"eth_submitWork",null),l([k.assertArgLength(2)],EthereumApi.prototype,"eth_submitHashrate",null),l([k.assertArgLength(0)],EthereumApi.prototype,"eth_mining",null),l([k.assertArgLength(0)],EthereumApi.prototype,"eth_hashrate",null),l([k.assertArgLength(0)],EthereumApi.prototype,"eth_gasPrice",null),l([k.assertArgLength(0)],EthereumApi.prototype,"eth_accounts",null),l([k.assertArgLength(0)],EthereumApi.prototype,"eth_blockNumber",null),l([k.assertArgLength(0)],EthereumApi.prototype,"eth_chainId",null),l([k.assertArgLength(1,2)],EthereumApi.prototype,"eth_getBalance",null),l([k.assertArgLength(1,2)],EthereumApi.prototype,"eth_getCode",null),l([k.assertArgLength(2,3)],EthereumApi.prototype,"eth_getStorageAt",null),l([k.assertArgLength(1)],EthereumApi.prototype,"eth_getTransactionByHash",null),l([k.assertArgLength(1)],EthereumApi.prototype,"eth_getTransactionReceipt",null),l([k.assertArgLength(1)],EthereumApi.prototype,"eth_sendTransaction",null),l([k.assertArgLength(1)],EthereumApi.prototype,"eth_signTransaction",null),l([k.assertArgLength(1)],EthereumApi.prototype,"eth_sendRawTransaction",null),l([k.assertArgLength(2)],EthereumApi.prototype,"eth_sign",null),l([k.assertArgLength(2)],EthereumApi.prototype,"eth_signTypedData",null),l([k.assertArgLength(2)],EthereumApi.prototype,"eth_signTypedData_v4",null),l([k.assertArgLength(1,2)],EthereumApi.prototype,"eth_subscribe",null),l([k.assertArgLength(1)],EthereumApi.prototype,"eth_unsubscribe",null),l([k.assertArgLength(0)],EthereumApi.prototype,"eth_newBlockFilter",null),l([k.assertArgLength(0)],EthereumApi.prototype,"eth_newPendingTransactionFilter",null),l([k.assertArgLength(0,1)],EthereumApi.prototype,"eth_newFilter",null),l([k.assertArgLength(1)],EthereumApi.prototype,"eth_getFilterChanges",null),l([k.assertArgLength(1)],EthereumApi.prototype,"eth_uninstallFilter",null),l([k.assertArgLength(1)],EthereumApi.prototype,"eth_getFilterLogs",null),l([k.assertArgLength(1)],EthereumApi.prototype,"eth_getLogs",null),l([k.assertArgLength(1,2)],EthereumApi.prototype,"eth_getTransactionCount",null),l([k.assertArgLength(1,2)],EthereumApi.prototype,"eth_call",null),l([k.assertArgLength(0)],EthereumApi.prototype,"personal_listAccounts",null),l([k.assertArgLength(1)],EthereumApi.prototype,"personal_newAccount",null),l([k.assertArgLength(2)],EthereumApi.prototype,"personal_importRawKey",null),l([k.assertArgLength(1)],EthereumApi.prototype,"personal_lockAccount",null),l([k.assertArgLength(2,3)],EthereumApi.prototype,"personal_unlockAccount",null),l([k.assertArgLength(2)],EthereumApi.prototype,"personal_sendTransaction",null),l([k.assertArgLength(2)],EthereumApi.prototype,"personal_signTransaction",null),l([k.assertArgLength(0)],EthereumApi.prototype,"rpc_modules",null),l([k.assertArgLength(0)],EthereumApi.prototype,"shh_newIdentity",null),l([k.assertArgLength(1)],EthereumApi.prototype,"shh_hasIdentity",null),l([k.assertArgLength(0)],EthereumApi.prototype,"shh_newGroup",null),l([k.assertArgLength(1)],EthereumApi.prototype,"shh_addToGroup",null),l([k.assertArgLength(2)],EthereumApi.prototype,"shh_newFilter",null),l([k.assertArgLength(1)],EthereumApi.prototype,"shh_uninstallFilter",null),l([k.assertArgLength(1)],EthereumApi.prototype,"shh_getFilterChanges",null),l([k.assertArgLength(1)],EthereumApi.prototype,"shh_getMessages",null),l([k.assertArgLength(1)],EthereumApi.prototype,"shh_post",null),l([k.assertArgLength(0)],EthereumApi.prototype,"shh_version",null),t.default=EthereumApi},26:function(e,t,s){"use strict";var r,n,i,o,a,c,l,u,h,d,p,m,g,y,b,_,w,v,k,E,B,T,A=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),P=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),O=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&A(t,e,s);return P(t,e),t},R=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},S=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},N=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Status=void 0;const D=s(75),M=O(s(59)),F=N(s(101)),I=N(s(53)),L=s(5),C=s(19),x=s(0),j=N(s(47)),z=N(s(283)),U=s(16),Q=s(1),G=N(s(159)),H=N(s(86)),W=N(s(106)),q=N(s(107)),K=s(23),J=s(8),$=s(36),Y=s(351),V=s(478),Z=s(550),X=s(65),ee=s(838),te=N(s(109)),se=s(1),re=s(453),ne=N(s(350)),ie=ne.default.init(ne.default.BLS12_381).then((()=>{ne.default.setMapToMode(ne.default.IRTF),ne.default.verifyOrderG1(!0),ne.default.verifyOrderG2(!0)}));var oe;function makeTrie(e,t,s){return e.fallback?new X.ForkTrie(t,s?s.toBuffer():null,e):new Z.GanacheTrie(t,s?s.toBuffer():null,e)}!function(e){e[e.started=1]="started",e[e.starting=2]="starting",e[e.stopped=4]="stopped",e[e.stopping=8]="stopping",e[e.paused=16]="paused"}(oe=t.Status||(t.Status={}));class Blockchain extends I.default.Typed{constructor(e,t,s){super(),r.set(this,oe.starting),n.set(this,void 0),i.set(this,void 0),o.set(this,null),a.set(this,!1),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),h.set(this,(({block:e,serialized:t,storageKeys:s,transactions:r})=>{const{blocks:n}=this;return n.latest=e,S(this,c).batch((()=>{const i=e.hash(),o=e.header,a=o.number,c=a.toBuffer(),u=L.BlockLogs.create(i),h=o.timestamp,d=new Date(1e3*h.toNumber()).toString(),m=[];return r.forEach(((e,t)=>{const s=e.hash.toBuffer(),r=Q.Quantity.from(t),n=e.serializeForDb(i,a,r);this.transactions.set(s,n);const c=e.getReceipt(),l=c.serialize(!0);this.transactionReceipts.set(s,l),e.getLogs().forEach(u.append.bind(u,r,e.hash)),m.push(S(this,p).call(this,s,c,o.number,d,e.execException))})),s.forEach((e=>{this.storageKeys.put(e.hashedKey,e.key)})),u.blockNumber=o.number,this.blockLogs.set(c,u.serialize()),n.putBlock(c,i,t),m.length>0&&S(this,l).logging.logger.log(m.join(D.EOL)),{block:e,blockLogs:u,transactions:r}}))})),d.set(this,(async e=>{const t=S(this,l),{block:s,blockLogs:r,transactions:n}=e;return n.forEach((e=>{e.finalize("confirmed",e.execException)})),S(this,u)&&t.miner.legacyInstamine?await new Promise((e=>{process.nextTick((async()=>{await Promise.all([this.emit("blockLogs",r),this.emit("block",s)]),e(void 0)}))})):await Promise.all([this.emit("blockLogs",r),this.emit("block",s)]),e})),p.set(this,((e,t,s,r,n)=>{let i=`${D.EOL}  Transaction: ${Q.Data.from(e)}${D.EOL}`;const o=t.contractAddress;return null!=o&&(i+=`  Contract created: ${K.Address.from(o)}${D.EOL}`),i+=`  Gas usage: ${Q.Quantity.from(t.raw[1]).toNumber()}\n  Block number: ${s.toNumber()}\n  Block time: ${r}${D.EOL}`,n&&(i+=`  Runtime error: ${n.data.message}${D.EOL}`,n.data.reason&&(i+=`  Revert reason: ${n.data.reason}${D.EOL}`)),i})),m.set(this,(async e=>(R(this,i,S(this,i).then((()=>S(this,h).call(this,e))).then(S(this,d))),S(this,i)))),g.set(this,((e,t)=>{const s=e.header,r=s.number.toBigInt()||0n;return new $.RuntimeBlock(Q.Quantity.from(r+1n),e.hash(),this.coinbase,S(this,l).miner.blockGasLimit.toBuffer(),se.BUFFER_ZERO,Q.Quantity.from(null==t?S(this,v).call(this):t),S(this,l).miner.difficulty,s.totalDifficulty,$.Block.calcNextBaseFee(e))})),this.isStarted=()=>S(this,r)===oe.started,this.mine=async(e,t,s=!1)=>{await S(this,i);const r=S(this,g).call(this,this.blocks.latest,t);return S(this,n).mine(r,e,s)},y.set(this,(()=>0!=(S(this,r)&oe.paused))),this.createVmFromStateTrie=async(e,t,s)=>{const r=this.blocks,n={getBlock:async e=>{const t=await r.get(e.toBuffer()).catch((e=>null));return t?{hash:()=>t.hash().toBuffer()}:null}},i=this.common,o=new z.default({state:e,activatePrecompiles:!1,common:i,allowUnlimitedContractSize:t,blockchain:n,stateManager:this.fallback?new Y.ForkStateManager({common:i,trie:e}):new V.DefaultStateManager({common:i,trie:e})});return s&&(await ee.activatePrecompiles(o.stateManager),i.isActivatedEIP(2537)&&await ie),o._isInitialized=!0,o},b.set(this,(e=>Promise.all(e.map((e=>this.trie.put(e.address.toBuffer(),e.serialize())))))),_.set(this,(async(e,t,s)=>{if(null!=this.fallback){const{block:r}=this.fallback,{miner:n}=S(this,l),i=this.vm.stateManager;let o;await i.checkpoint(),s.forEach((e=>{const t={buf:e.address.toBuffer()};i._cache.put(t,e),i.touchAccount(t)})),await i.commit(),this.common.isActivatedEIP(1559)&&(o=void 0===r.header.baseFeePerGas?$.Block.INITIAL_BASE_FEE_PER_GAS:r.header.baseFeePerGas.toBigInt());const a=new $.RuntimeBlock(Q.Quantity.from(r.header.number.toBigInt()+1n),r.hash(),this.coinbase,t.toBuffer(),se.BUFFER_ZERO,Q.Quantity.from(e),n.difficulty,r.header.totalDifficulty,o),{block:c,serialized:u}=a.finalize(x.KECCAK256_RLP,x.KECCAK256_RLP,Q.BUFFER_256_ZERO,this.trie.root,0n,n.extraData,[],new Map),h=c.hash();return this.blocks.putBlock(c.header.number.toBuffer(),h,u).then((e=>({block:c,blockLogs:L.BlockLogs.create(h)})))}await S(this,b).call(this,s);const r=Q.RPCQUANTITY_EMPTY,n=this.common.isActivatedEIP(1559)?$.Block.INITIAL_BASE_FEE_PER_GAS:void 0,i=new $.RuntimeBlock(r,Q.Data.from(Q.BUFFER_32_ZERO),this.coinbase,t.toBuffer(),se.BUFFER_ZERO,Q.Quantity.from(e),S(this,l).miner.difficulty,Q.RPCQUANTITY_ZERO,n),{block:o,serialized:a}=i.finalize(x.KECCAK256_RLP,x.KECCAK256_RLP,Q.BUFFER_256_ZERO,this.trie.root,0n,S(this,l).miner.extraData,[],new Map);o.header.number=Q.RPCQUANTITY_ZERO;const c=o.hash();return this.blocks.putBlock(o.header.number.toBuffer(),c,a).then((e=>({block:o,blockLogs:L.BlockLogs.create(c)})))})),w.set(this,0),v.set(this,(()=>Math.floor((Date.now()+S(this,w))/1e3))),k.set(this,(async e=>{"revertMetaData"in this.trie&&await this.trie.revertMetaData(e[e.length-1].header.number,e[0].header.number),await S(this,c).batch((()=>{const{blocks:t,transactions:s,transactionReceipts:r,blockLogs:n}=this;e.forEach((e=>{e.getTransactions().forEach((e=>{const t=e.hash.toBuffer();s.del(t),r.del(t)}));const i=e.header.number.toBuffer();t.del(i),t.del(e.hash().toBuffer()),n.del(i)}))}))})),E.set(this,{snaps:[],blocks:null,unsubscribeFromBlocks:null}),B.set(this,(async(e,t,s,r,n,i)=>{let o=-1;const l=[],u=this.blocks,h={getBlock:async e=>{const t=await u.get(e.toBuffer()).catch((e=>null));return t?{hash:()=>t.hash().toBuffer()}:null}},d=this.common,p=await z.default.create({state:t,activatePrecompiles:!1,common:d,allowUnlimitedContractSize:this.vm.allowUnlimitedContractSize,blockchain:h,stateManager:this.fallback?new Y.ForkStateManager({common:d,trie:t}):new V.DefaultStateManager({common:d,trie:t})}),m={};let g=0;const y=[],b=L.TraceDataFactory(),_={},stepListener=async(t,s)=>{S(this,a)&&this.emit("ganache:vm:tx:step",re.makeStepEvent(_,t));const n=t.gasLeft.toNumber(),i=e.gasLimit.toNumber()-n-g;g+=i;const c=[];if(!0!==r.disableMemory){let e=0;for(;e<t.memory.length;){const s=t.memory.slice(e,e+32);c.push(b.from(Buffer.from(s))),e+=32}}const u=[];if(!0!==r.disableStack)for(const e of t.stack)u.push(b.from(e.toArrayLike(Buffer)));const h={depth:t.depth+1,error:"",gas:n,gasCost:0,memory:c,op:t.opcode.name,pc:t.pc,stack:u,storage:null};if(y.length&&(y[y.length-1].gasCost=i),!0===r.disableStorage)y.push(h),s();else{const{depth:e}=t;switch(o>e?l.pop():o<e&&l.push(new L.TraceStorageMap),o=e,t.opcode.name){case"SSTORE":{const t=u[u.length-1],r=u[u.length-2];h.storage=new L.TraceStorageMap(l[e]),y.push(h),s(),l[e].set(t,r);break}case"SLOAD":{const r=u[u.length-1],n=await p.stateManager.getContractStorage(t.address,r.toBuffer()),i=b.from(n);l[e].set(r,i),h.storage=new L.TraceStorageMap(l[e]),y.push(h),s();break}default:h.storage=new L.TraceStorageMap(l[e]),y.push(h),s()}}};p.stateManager._cache.flush=()=>{},await p.stateManager.checkpoint();try{for(let t=0,r=s.transactions.length;t<r;t++){const o=s.transactions[t];if(o===e){if(n&&i){const e=S(this,c),t={buf:i};await Promise.all(n.map((async s=>{const r=await e.storageKeys.get(s),n=await p.stateManager.getContractStorage(t,r);m[Q.Data.from(s,s.length).toString()]={key:Q.Data.from(r,r.length),value:Q.Data.from(n,32)}})));break}p.on("step",stepListener),t=r}this.emit("ganache:vm:tx:before",{context:_}),await p.runTx({tx:o,block:s}),this.emit("ganache:vm:tx:after",{context:_})}p.removeListener("step",stepListener)}finally{await p.stateManager.revert()}return{gas:g,structLogs:y,returnValue:"",storage:m}})),T.set(this,((e,t,s)=>{const r=new $.RuntimeBlock(Q.Quantity.from((t.header.number.toBigInt()||0n)+1n),t.hash(),t.header.miner,t.header.gasLimit.toBuffer(),se.BUFFER_ZERO,e.header.timestamp,S(this,l).miner.difficulty,t.header.totalDifficulty,$.Block.calcNextBaseFee(t));r.transactions=[],r.uncleHeaders=[];const n=e.getTransactions();for(const e of n)if(r.transactions.push(e.toVmTransaction()),e.hash.toBuffer().equals(s))break;return r})),R(this,l,e),this.fallback=s;const A=R(this,u,!e.miner.blockTime||e.miner.blockTime<=0),P=e.miner.legacyInstamine;P&&console.info("Legacy instamining, where transactions are fully mined before the hash is returned, is deprecated and will be removed in the future."),A||(P&&console.info("Setting `legacyInstamine` to `true` has no effect when blockTime is non-zero"),e.chain.vmErrorsOnRPCResponse&&console.info("Setting `vmErrorsOnRPCResponse` to `true` has no effect on transactions when blockTime is non-zero")),this.coinbase=t,R(this,c,new F.default(e.database,this))}async initialize(e){const t=S(this,c),s=S(this,l),h=S(this,u);try{let r;this.fallback?(await this.fallback.initialize(),await t.initialize(),r=this.common=this.fallback.common,s.fork.blockNumber=this.fallback.blockNumber.toNumber(),s.chain.networkId=r.networkId(),s.chain.chainId=r.chainId()):(await t.initialize(),r=this.common=function createCommon(e,t,s){const r=j.default.forCustomChain(Q.KNOWN_CHAINIDS.has(e)?e:1,{name:"ganache",networkId:t,chainId:e,comment:"Local test network"},s);return r.on=()=>{},r}(s.chain.chainId,s.chain.networkId,s.chain.hardfork));const c=this.blocks=await H.default.initialize(this,r,t.blockIndexes,t.blocks);this.blockLogs=new W.default(t.blockLogs,this),this.transactions=new q.default(s.miner,r,this,t.transactions),this.transactionReceipts=new te.default(t.transactionReceipts,this),this.accounts=new G.default(this),this.storageKeys=t.storageKeys;const{latest:l}=c;{let e;l?(R(this,i,Promise.resolve({block:l,blockLogs:null})),({stateRoot:e}=l.header)):e=null,this.trie=makeTrie(this,t.trie,e)}this.vm=await this.createVmFromStateTrie(this.trie,s.chain.allowUnlimitedContractSize,!0);{let t;if(null!=s.chain.time){const e=s.chain.time.getTime();t=Math.floor(e/1e3),this.setTime(e)}else t=S(this,v).call(this);l||(e.length>0&&await S(this,b).call(this,e),R(this,i,S(this,_).call(this,t,s.miner.blockGasLimit,e)),c.earliest=c.latest=await S(this,i).then((({block:e})=>e)))}{const e=this.transactions.transactionPool,t=s.miner,r=R(this,n,new M.default(t,e.executables,this.vm,S(this,g)));r.on("ganache:vm:tx:before",(e=>{this.emit("ganache:vm:tx:before",e)})),r.on("ganache:vm:tx:step",(e=>{S(this,a)&&this.emit("ganache:vm:tx:step",e)})),r.on("ganache:vm:tx:after",(e=>{this.emit("ganache:vm:tx:after",e)}));const i=Promise.resolve(null),mineAll=e=>S(this,y).call(this)?i:this.mine(e);if(h)e.on("drain",mineAll.bind(null,M.Capacity.Single));else{const wait=()=>Q.unref(R(this,o,setTimeout(next,1e3*t.blockTime))),next=()=>mineAll(M.Capacity.FillBlock).then(wait);wait()}r.on("block",S(this,m)),this.once("stop").then((()=>r.clearListeners()))}}catch(e){throw R(this,r,oe.stopping),await this.stop().catch((e=>{})),e}R(this,r,oe.started),this.emit("ready")}pause(){R(this,r,S(this,r)|oe.paused)}resume(e=1){if(S(this,y).call(this))return R(this,r,S(this,r)^oe.paused),S(this,u)?this.mine(M.Capacity.FillBlock):void 0;console.log("Warning: startMining called when miner was already started")}increaseTime(e){return e<0&&(e=0),R(this,w,S(this,w)+e)}setTime(e){return R(this,w,e-Date.now())}snapshot(){const e=S(this,E),t=e.snaps.push({block:this.blocks.latest,timeAdjustment:S(this,w)});return 1===t&&(e.unsubscribeFromBlocks=this.on("block",(t=>{e.blocks={current:t.hash().toBuffer(),next:e.blocks}}))),S(this,l).logging.logger.log("Saved snapshot #"+t),t}async revert(e){const t=e.valueOf();if(null==t)throw new Error("invalid snapshotId");if(S(this,l).logging.logger.log("Reverting to snapshot #"+e),t<1n)return!1;const s=S(this,E),r=s.snaps,o=Number(t-1n),a=r[o];if(!a)return!1;await this.transactions.pause(),await S(this,n).pause(),await S(this,i),this.transactions.clear();const c=this.blocks,u=c.latest.hash().toBuffer(),h=a.block,d=h.header,p=h.hash().toBuffer();if(r.splice(o),0===r.length&&s.unsubscribeFromBlocks(),!u.equals(p)){const e=[];let t=s.blocks;for(;null!==t&&!t.current.equals(p);)e.push(c.getByHash(t.current)),t=t.next;s.blocks=t;const r=await Promise.all(e);await S(this,k).call(this,r),function setStateRootSync(e,t){e._trie.root=t,e._cache.clear(),e._storageTries={}}(this.vm.stateManager,d.stateRoot.toBuffer()),c.latest=h}return R(this,w,a.timeAdjustment),S(this,n).resume(),this.transactions.resume(),!0}async queueTransaction(e,t){!0===await this.transactions.add(e,t)&&process.nextTick(this.emit.bind(this),"pendingTransaction",e);const s=e.hash;if(S(this,y).call(this)||!S(this,u))return s;if(S(this,u)&&S(this,l).miner.legacyInstamine){const{status:t,error:s}=await e.once("finalized");if(s&&("rejected"===t||S(this,l).chain.vmErrorsOnRPCResponse))throw s}return s}async simulateTransaction(e,t){let s;const r=e.data;let n=e.gas.toBigInt();const i=null!=e.to;let o=null;if(i){const t=e.to.toBuffer();o={equals:e=>t.equals(e.buf),buf:t}}else o=null;const c=n-J.calculateIntrinsicGas(r,i,this.common),u={};if(this.emit("ganache:vm:tx:before",{context:u}),c>=0n){const r=this.trie.copy(!1);r.setContext(t.header.stateRoot.toBuffer(),null,t.header.number);const i=await this.createVmFromStateTrie(r,S(this,l).chain.allowUnlimitedContractSize,!1);i.stateManager.checkpoint(),i.on("step",(e=>{if(!S(this,a))return;const t=re.makeStepEvent(u,e);this.emit("ganache:vm:tx:step",t)}));const h=e.from.toBuffer();if(this.common.isActivatedEIP(2929)){const e=i.stateManager;ee.warmPrecompiles(e),e.addWarmedAddress(h),o&&e.addWarmedAddress(o.buf)}const d=await i.stateManager.getAccount({buf:h});d.nonce.iaddn(1);const p=new x.BN((n*e.gasPrice.toBigInt()).toString());d.balance.isub(p),await i.stateManager.putAccount({buf:h},d),s=await i.runCall({caller:{buf:h,equals:e=>h.equals(e.buf)},data:e.data&&e.data.toBuffer(),gasPrice:new x.BN(e.gasPrice.toBuffer()),gasLimit:new x.BN(Q.Quantity.from(c).toBuffer()),to:o,value:null==e.value?new x.BN(0):new x.BN(e.value.toBuffer()),block:e.block})}else s={execResult:{runState:{programCounter:0},exceptionError:new U.VmError(U.ERROR.OUT_OF_GAS),returnValue:Q.BUFFER_EMPTY}};if(this.emit("ganache:vm:tx:after",{context:u}),s.execResult.exceptionError){if(S(this,l).chain.vmErrorsOnRPCResponse){const e=Q.RPCQUANTITY_EMPTY;throw new L.RuntimeError(e,s,L.RETURN_TYPES.RETURN_VALUE)}return Q.Data.from(s.execResult.returnValue||"0x")}return Q.Data.from(s.execResult.returnValue||"0x")}async traceTransaction(e,t){const s=Q.Data.from(e).toBuffer(),r=await this.transactions.get(s);if(!r)throw new Error("Unknown transaction "+e);const n=await this.blocks.getByHash(r.blockHash.toBuffer()),i=await this.blocks.getByHash(n.header.parentHash.toBuffer()),o=S(this,T).call(this,n,i,s),a=this.trie.copy();a.setContext(i.header.stateRoot.toBuffer(),null,i.header.number);const{gas:c,structLogs:l,returnValue:u,storage:h}=await S(this,B).call(this,o.transactions[r.index.toNumber()],a,o,t);return{gas:c,structLogs:l,returnValue:u,storage:h}}async storageRangeAt(e,t,s,r,n){const i=await this.blocks.getByHash(e),o=i.getTransactions()[t];if(!o)throw new Error(`transaction index ${t} is out of range for block ${e}`);const a=await this.blocks.getByHash(i.header.parentHash.toBuffer()),l=makeTrie(this,S(this,c).trie,a.header.stateRoot),u=K.Address.from(s).toBuffer(),h=await l.get(u);if(!h)throw new Error(`account ${s} doesn't exist`);const{keys:d,nextKey:p}=await(()=>{const e=l.copy(!1);return e.setContext(C.decode(h)[2],u,a.header.number),new Promise(((t,s)=>{const i=Q.Data.from(r).toBuffer(),compare=(e,t)=>e.compare(t)<0,o=[];e.createReadStream().on("data",(({key:e})=>{if(i.compare(e)>0)return;const t=Q.findInsertPosition(o,e,compare);t>n||o.splice(t,0,e)})).on("error",s).on("end",(()=>{o.length>n?t({keys:o.slice(0,n),nextKey:Q.Data.from(o[n])}):t({keys:o,nextKey:null})}))}))})(),m=o.hash.toBuffer(),g=S(this,T).call(this,i,a,m),{storage:y}=await S(this,B).call(this,g.transactions[o.index.toNumber()],l,g,{disableMemory:!0,disableStack:!0,disableStorage:!1},d,u);return{storage:y,nextKey:p}}toggleStepEvent(e){R(this,a,e),S(this,n).toggleStepEvent(e)}async stop(){S(this,r)===oe.starting&&await this.once("ready"),R(this,r,oe.stopping),clearTimeout(S(this,o)),this.vm&&this.vm.removeAllListeners(),this.transactions&&await this.transactions.pause(),S(this,n)&&await S(this,n).pause(),await S(this,i),this.fallback&&await this.fallback.close(),await this.emit("stop"),S(this,c)&&await S(this,c).close(),R(this,r,oe.stopped)}}t.default=Blockchain,r=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,y=new WeakMap,b=new WeakMap,_=new WeakMap,w=new WeakMap,v=new WeakMap,k=new WeakMap,E=new WeakMap,B=new WeakMap,T=new WeakMap},90:function(e,t,s){"use strict";var r,n,i=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Connector=t.Provider=void 0;const c=a(s(53)),l=s(1),u=a(s(91)),h=s(5),d=s(843);t.Provider=u.default;class Connector extends c.default.Typed{constructor(e=null,t){super(),r.set(this,void 0),this.BUFFERIFY_THRESHOLD=Connector.BUFFERIFY_THRESHOLD,n.set(this,((e,t)=>{const s=e.method;if("eth_subscribe"===s&&function isHttp(e){return"uWS.HttpRequest"===e.constructor.name||"HttpRequest"===e.constructor.name}(t))return Promise.reject(new h.CodedError("notifications not supported",l.JsonRpcErrorCode.METHOD_NOT_SUPPORTED));const n=e.params;return o(this,r)._requestRaw({method:s,params:n})})),i(this,r,new u.default(e,t))}get provider(){return o(this,r)}async connect(){await o(this,r).initialize(),await this.emit("ready")}parse(e){try{return JSON.parse(e)}catch(e){throw new h.CodedError(e.message,l.JsonRpcErrorCode.PARSE_ERROR)}}handle(e,t){if(Array.isArray(e)){const s=e.map((e=>o(this,n).call(this,e,t).then((({value:e})=>e)).catch((e=>e))));return Promise.resolve({value:Promise.all(s)})}return o(this,n).call(this,e,t)}format(e,t){if(Array.isArray(t))return JSON.stringify(t.map(((t,s)=>{const r=e[s];return r instanceof Error?l.makeError(t.id,r):l.makeResponse(t.id,r)})));{const s=l.makeResponse(t.id,e);return"debug_traceTransaction"===t.method&&"object"==typeof e&&Array.isArray(e.structLogs)&&e.structLogs.length>this.BUFFERIFY_THRESHOLD?d.bufferify(s,""):JSON.stringify(s)}}formatError(e,t){const s=l.makeError(t&&t.id?t.id:null,e);return JSON.stringify(s)}close(){return o(this,r).disconnect()}}t.Connector=Connector,r=new WeakMap,n=new WeakMap,Connector.BUFFERIFY_THRESHOLD=1e5},159:function(e,t,s){"use strict";var r,n=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},i=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const o=s(5),a=s(0),c=s(1),l=s(19);t.default=class AccountManager{constructor(e){r.set(this,void 0),n(this,r,e)}async get(e,t=o.Tag.LATEST){const s=await this.getRaw(e,t);return null==s?null:o.Account.fromBuffer(s)}async getRaw(e,t=o.Tag.LATEST){const{trie:s,blocks:n}=i(this,r),{stateRoot:a,number:c}=(await n.get(t)).header,l=s.copy(!1);return l.setContext(a.toBuffer(),null,c),await l.get(e.toBuffer())}async getStorageAt(e,t,s=o.Tag.LATEST){const{trie:n,blocks:a}=i(this,r),{stateRoot:c,number:l}=(await a.get(s)).header,u=n.copy(!1);return u.setContext(c.toBuffer(),e.toBuffer(),l),await u.get(t)}async getNonce(e,t=o.Tag.LATEST){const s=await this.getRaw(e,t);if(null==s)return c.RPCQUANTITY_ZERO;const[r]=l.decode(s);return 0===r.length?c.RPCQUANTITY_ZERO:c.Quantity.from(r)}async getBalance(e,t=o.Tag.LATEST){const s=await this.getRaw(e,t);if(null==s)return c.RPCQUANTITY_ZERO;const[,r]=l.decode(s);return 0===r.length?c.RPCQUANTITY_ZERO:c.Quantity.from(r)}async getCode(e,t=o.Tag.LATEST){const s=await this.getRaw(e,t);if(null==s)return c.DATA_EMPTY;const[,,,n]=l.decode(s);return n.equals(a.KECCAK256_NULL)?c.DATA_EMPTY:i(this,r).trie.db.get(n).then(c.Data.from)}},r=new WeakMap},86:function(e,t,s){"use strict";var r,n,i,o=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},a=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=c(s(87)),u=s(5),h=s(1),d=s(36),p=s(23),m=s(8),g=Buffer.from([]);class BlockManager extends l.default{constructor(e,t,s,c){super(c,d.Block,t),r.set(this,void 0),n.set(this,void 0),i.set(this,void 0),this.fromFallback=async e=>{const t=a(this,r).fallback;let s;if("string"==typeof e)s=e;else{if(!t.isValidForkBlockNumber(e))return null;s=e.toString()}const i=await t.request("eth_getBlockByNumber",[s,!0]);return null==i?null:BlockManager.rawFromJSON(i,a(this,n))},o(this,r,e),o(this,n,t),o(this,i,s)}static async initialize(e,t,s,r){const n=new BlockManager(e,t,s,r);return await n.updateTaggedBlocks(),n}static rawFromJSON(e,t){const s=[h.Data.from(e.parentHash).toBuffer(),h.Data.from(e.sha3Uncles).toBuffer(),p.Address.from(e.miner).toBuffer(),h.Data.from(e.stateRoot).toBuffer(),h.Data.from(e.transactionsRoot).toBuffer(),h.Data.from(e.receiptsRoot).toBuffer(),h.Data.from(e.logsBloom).toBuffer(),h.Quantity.from(e.difficulty).toBuffer(),h.Quantity.from(e.number).toBuffer(),h.Quantity.from(e.gasLimit).toBuffer(),h.Quantity.from(e.gasUsed).toBuffer(),h.Quantity.from(e.timestamp).toBuffer(),h.Data.from(e.extraData).toBuffer(),h.Data.from(e.mixHash).toBuffer(),h.Data.from(e.nonce).toBuffer()];void 0!==e.baseFeePerGas&&(s[15]=h.Data.from(e.baseFeePerGas).toBuffer());const r=h.Quantity.from(e.totalDifficulty).toBuffer(),n=[],i=[];return e.transactions.forEach(((s,r)=>{const o=[h.Quantity.from(s.from).toBuffer(),h.Quantity.from(s.hash).toBuffer()],a=[...o,h.Data.from(e.hash).toBuffer(),h.Quantity.from(e.number).toBuffer(),r],c=m.TransactionFactory.fromRpc(s,t,a),l=c.toEthRawTransaction(c.v.toBuffer(),c.r.toBuffer(),c.s.toBuffer());n.push(l),i.push(o)})),d.serialize([s,n,[],r,i]).serialized}getBlockByTag(e){switch(u.Tag.normalize(e)){case u.Tag.LATEST:return this.latest;case void 0:case null:break;case u.Tag.PENDING:return this.latest;case u.Tag.EARLIEST:return this.earliest;default:throw new Error(`Invalid block Tag: ${e}`)}}getEffectiveNumber(e=u.Tag.LATEST){if("string"==typeof e){const t=this.getBlockByTag(e);if(t)return t.header.number}return h.Quantity.from(e)}async getNumberFromHash(e){return a(this,i).get(h.Data.from(e).toBuffer()).catch((e=>{if(404===e.status)return null;throw e}))}async getByHash(e){const t=await this.getNumberFromHash(e);if(null===t){if(a(this,r).fallback){const t=a(this,r).fallback,s=await t.request("eth_getBlockByHash",[h.Data.from(e),!0]);return s&&BigInt(s.number)<=t.blockNumber.toBigInt()?new d.Block(BlockManager.rawFromJSON(s,a(this,n)),a(this,n)):null}return null}return this.get(t)}async getRawByBlockNumber(e){const t=a(this,r).fallback,s=e.toBuffer();return this.getRaw(s).then((s=>null==s&&t?this.fromFallback(e):s))}async get(e){if("string"==typeof e){const t=this.getBlockByTag(e);if(t)return t}const t=await this.getRawByBlockNumber(h.Quantity.from(e));if(t)return new d.Block(t,a(this,n));throw new Error("header not found")}async putBlock(e,t,s){let r=e;g.equals(r)&&(r=Buffer.from([0]));const n=t.toBuffer();await Promise.all([a(this,i).put(n,r),super.set(r,s)])}updateTaggedBlocks(){return new Promise(((e,t)=>{this.base.createValueStream({limit:1}).on("data",(e=>{this.earliest=new d.Block(e,a(this,n))})).on("error",(e=>{t(e)})).on("end",(()=>{e(void 0)})),this.base.createValueStream({reverse:!0,limit:1}).on("data",(e=>{this.latest=new d.Block(e,a(this,n))})).on("error",(e=>{t(e)})).on("end",(()=>{e(void 0)}))}))}}t.default=BlockManager,r=new WeakMap,n=new WeakMap,i=new WeakMap},106:function(e,t,s){"use strict";var r,n=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},i=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(5),c=o(s(87)),l=s(1),u=s(430);class BlockLogManager extends c.default{constructor(e,t){super(e,a.BlockLogs),r.set(this,void 0),n(this,r,t)}async get(e){const t=await super.get(e);if(t)t.blockNumber=l.Quantity.from(e);else if(i(this,r).fallback){const t=l.Quantity.from(e),s=await i(this,r).fallback.request("eth_getLogs",[{fromBlock:t,toBlock:t}]);return a.BlockLogs.fromJSON(s)}return t}async getLogs(e){const t=i(this,r);if("blockHash"in e){const{addresses:s,topics:r}=u.parseFilterDetails(e),n=await t.blocks.getNumberFromHash(e.blockHash);if(!n)return[];const i=await this.get(n);return i?[...i.filter(s,r)]:[]}{const{addresses:s,topics:r,fromBlock:n,toBlockNumber:i}=u.parseFilter(e,t),o=[this.get(n.toBuffer())],a=n.toNumber();if(a!==i)for(let e=a+1,t=i+1;e<t;e++)o.push(this.get(l.Quantity.from(e).toBuffer()));return Promise.all(o).then((e=>{const t=[];return e.forEach((e=>{e&&t.push(...e.filter(s,r))})),t}))}}}t.default=BlockLogManager,r=new WeakMap},87:function(e,t,s){"use strict";var r,n,i=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const a=s(1);t.default=class Manager{constructor(e,t,s){r.set(this,void 0),n.set(this,void 0),i(this,r,t),i(this,n,s),this.base=e}getRaw(e){return"string"==typeof e&&(e=a.Data.from(e).toBuffer()),0===e.length&&(e=a.BUFFER_ZERO),this.base.get(e).catch((e=>{if(404===e.status)return null;throw e}))}async get(e){const t=await this.getRaw(e);return t?new(o(this,r))(t,o(this,n)):null}set(e,t){return this.base.put(e,t)}del(e){return this.base.del(e)}},r=new WeakMap,n=new WeakMap},107:function(e,t,s){"use strict";var r,n,i,o,a,c=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},l=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const h=u(s(87)),d=u(s(88)),p=u(s(108)),m=s(1),g=s(8);class TransactionManager extends h.default{constructor(e,t,s,u){super(u,g.TransactionFactory,t),r.set(this,new p.default),n.set(this,!1),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),this.fromFallback=async e=>{const{fallback:t}=l(this,a),s=await t.request("eth_getTransactionByHash",[m.Data.from(e).toString()]);if(null==s)return null;const r=m.Data.from(s.blockHash,32),n=m.Quantity.from(s.blockNumber),i=m.Quantity.from(s.transactionIndex);if(!t.isValidForkBlockNumber(n))return null;const o=[m.Data.from(s.from,20).toBuffer(),m.Data.from(s.hash,32).toBuffer(),r.toBuffer(),n.toBuffer(),i.toBuffer(),m.Quantity.from(s.gasPrice).toBuffer()];return g.TransactionFactory.fromRpc(s,t.common,o).serializeForDb(r,n,i)},this.resume=()=>{l(this,n)&&(c(this,n,!1),l(this,o).call(this))},c(this,a,s),this.transactionPool=new d.default(e,s)}async getRaw(e){return super.getRaw(e).then((t=>null==t&&l(this,a).fallback?this.fromFallback(e):t))}async get(e){const t=await super.get(e);return t?t.tx:null}async add(e,t){l(this,n)&&await l(this,i);const s=this.transactionPool.prepareTransaction(e,t),o=await l(this,r).add(s);return o&&this.transactionPool.drain(),o}clear(){l(this,r).clear(!1),this.transactionPool.clear()}async pause(){l(this,n)||(c(this,n,!0),c(this,i,new Promise((e=>{c(this,o,e)})))),l(this,r).isBusy()&&await l(this,r).emit("idle")}}t.default=TransactionManager,r=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap},109:function(e,t,s){"use strict";var r,n=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},i=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(s(87)),c=s(1),l=s(8),u=s(23);class TransactionReceiptManager extends a.default{constructor(e,t){super(e,l.TransactionReceipt),r.set(this,void 0),n(this,r,t)}async get(e){const t=await super.get(e);if(t)return t;if(i(this,r).fallback){const t=await i(this,r).fallback.request("eth_getTransactionReceipt",["string"==typeof e?e:c.Data.from(e)]);if(!t)return null;const s="0x1"===t.status?c.RPCQUANTITY_ONE.toBuffer():c.BUFFER_ZERO,n=c.Quantity.from(t.cumulativeGasUsed).toBuffer(),o=c.Data.from(t.logsBloom,256).toBuffer(),a=t.logs.map((e=>[u.Address.from(e.address).toBuffer(),e.topics.map((e=>c.Data.from(e).toBuffer())),Array.isArray(e.data)?e.data.map((e=>c.Data.from(e).toBuffer())):c.Data.from(e.data).toBuffer()])),h=c.Quantity.from(t.gasUsed).toBuffer(),d=null==t.contractAddress?c.BUFFER_EMPTY:u.Address.from(t.contractAddress).toBuffer();return l.TransactionReceipt.fromValues(s,n,o,a,h,d)}}}t.default=TransactionReceiptManager,r=new WeakMap},101:function(e,t,s){"use strict";var r,n,i,o,a,c=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},l=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const h=u(s(53)),d=s(277),p=u(s(146)),m=u(s(282)),g=u(s(151)),y=u(s(148));d.setGracefulCleanup();const b={prefix:"ganache_",unsafeCleanup:!0},noop=()=>Promise.resolve();class Database extends h.default{constructor(e,t){super(),r.set(this,void 0),n.set(this,noop),i.set(this,!1),this.directory=null,this.db=null,o.set(this,void 0),this.initialize=async()=>{const e={keyEncoding:"binary",valueEncoding:"binary"},t=l(this,r).db;let s;if(t)c(this,o,y.default(t,e)),s=p.default(l(this,o),{});else{let t=l(this,r).dbPath;if(!t){const e=await d.dir(b);if(t=e.path,c(this,n,e.cleanup),l(this,i))return l(this,a).call(this)}this.directory=t;const u={prefix:""},h=y.default(m.default(t,u),e);c(this,o,h),s=p.default(h)}if(l(this,i))return l(this,a).call(this);const u=s.open();return this.trie=g.default(s,"T",e),this.db=s,await u,l(this,i)?l(this,a).call(this):(this.blocks=g.default(s,"b",e),this.blockIndexes=g.default(s,"i",e),this.blockLogs=g.default(s,"l",e),this.transactions=g.default(s,"t",e),this.transactionReceipts=g.default(s,"r",e),this.storageKeys=g.default(s,"s",e),this.emit("ready"))},a.set(this,(async()=>{const e=this.db;return e&&(await new Promise(((t,s)=>e.close((e=>{e?s(e):t(void 0)})))),await Promise.all([this.blocks.close(),this.blockIndexes.close(),this.blockIndexes.close(),this.transactionReceipts.close(),this.transactions.close(),this.storageKeys.close(),this.trie.close()])),l(this,n).call(this)})),c(this,r,e),this.blockchain=t}batch(e){const t=l(this,o).db,s=this.db.batch(),r=t.put,n=t.del;let i;t.put=s.put.bind(s),t.del=s.del.bind(s);try{const o=e();i=s.write().then((()=>o))}finally{t.put=r,t.del=n}return i}async close(){const e=l(this,i);c(this,i,!0),await l(this,a).call(this),e||this.emit("close")}}t.default=Database,r=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap},352:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ForkCache=void 0;const n=s(0),i=r(s(516));class ForkCache extends i.default{constructor(e){super(e),this._lookupAccount=async e=>{const t=await this._trie.get(e.buf);return t?n.Account.fromRlpSerializedAccount(t):new n.Account}}}t.ForkCache=ForkCache},556:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function Deferred(){const e={};return e.promise=new Promise(((t,s)=>{e.resolve=t,e.reject=s})),e}},110:function(e,t,s){"use strict";var r,n,i,o,a,c,l,u,h=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},d=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Fork=void 0;const m=s(1),g=p(s(551)),y=p(s(47)),b=s(66),_=s(356),w=s(5),v=s(36),k=p(s(86)),E=s(840),B=s(67);async function fetchNetworkId(e){const t=await e.request("net_version",[]);return parseInt(t,10)}function fetchBlock(e,t){return e.request("eth_getBlockByNumber",[t,!0])}t.Fork=class Fork{constructor(e,t){r.set(this,new g.default),n.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),c.set(this,(async e=>{const[t,s]=await Promise.all([e,fetchNetworkId(this)]);this.common=y.default.forCustomChain(m.KNOWN_CHAINIDS.has(t)?t:1,{name:"ganache-fork",defaultHardfork:d(this,a),networkId:s,chainId:t,comment:"Local test network fork"}),this.common.on=()=>{}})),l.set(this,(async e=>{const t=d(this,i);if(t.blockNumber===w.Tag.LATEST){const[s,r]=await Promise.all([fetchBlock(this,w.Tag.LATEST),e]);let n=parseInt(s.number,16);const i=m.KNOWN_CHAINIDS.has(r)?Math.max(n-t.preLatestConfirmations,0):n;let o;return o=i!==n?await fetchBlock(this,m.Quantity.from(i)):s,t.blockNumber=i,this.blockNumber=m.Quantity.from(i),this.stateRoot=m.Data.from(o.stateRoot),await d(this,u).call(this,this.blockNumber),o}if("number"==typeof t.blockNumber){const e=m.Quantity.from(t.blockNumber),[r]=await Promise.all([fetchBlock(this,e).then((async t=>(this.stateRoot=t.stateRoot,await d(this,u).call(this,e),t))),(s=this,s.request("eth_blockNumber",[],{disableCache:!0})).then((s=>{const r=parseInt(s,16);if(t.blockNumber>r)throw new Error(`\`fork.blockNumber\` (${t.blockNumber}) must not be greater than the current block number (${r})`);this.blockNumber=e}))]);return r}throw new Error(`Invalid value for \`fork.blockNumber\` option: "${t.blockNumber}". Must be a positive integer or the string "latest".`);var s})),u.set(this,(e=>Promise.all(d(this,o).map((async t=>{const s=await async function fetchNonce(e,t,s){const r=await e.request("eth_getTransactionCount",[t,s]);return m.Quantity.from(r)}(this,t.address,e);t.nonce=s})))));const s=h(this,i,e.fork);h(this,a,e.chain.hardfork),h(this,o,t);const{url:p}=s;if(p){const{protocol:t}=p;switch(t){case"ws:":case"wss:":h(this,n,new _.WsHandler(e,d(this,r).signal));break;case"http:":case"https:":h(this,n,new b.HttpHandler(e,d(this,r).signal));break;default:throw new Error(`Unsupported protocol: ${t}`)}}else s.provider&&h(this,n,new E.ProviderHandler(e,d(this,r).signal))}async initialize(){let e;const t=d(this,i);t.deleteCache&&await B.PersistentCache.deleteDb(),e=!1===t.disableCache?B.PersistentCache.create().catch((e=>null)):null;const s=async function fetchChainId(e){const t=await e.request("eth_chainId",[]);return parseInt(t,16)}(this),[r,n]=await Promise.all([d(this,l).call(this,s),e,d(this,c).call(this,s)]);this.block=new v.Block(k.default.rawFromJSON(r,this.common),this.common),n&&await this.initCache(n)}async initCache(e){await e.initialize(this.block.header.number,this.block.hash(),this.request.bind(this)),d(this,n).setCache(e)}request(e,t,s={disableCache:!1}){return d(this,n).request(e,t,s)}abort(){return d(this,r).abort()}close(){return d(this,n).close()}isValidForkBlockNumber(e){return e.toBigInt()<=this.blockNumber.toBigInt()}selectValidForkBlockNumber(e){return this.isValidForkBlockNumber(e)?e:this.blockNumber}},r=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap},161:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseHandler=void 0;const n=s(1),i=r(s(354)),o=r(s(553)),a=s(5);class BaseHandler{constructor(e,t){this.id=1,this.requestCache=new Map,this.fireForget=new Set;const s=e.fork,{requestsPerSecond:r,url:n,userAgent:a,origin:c}=s;if(this.abortSignal=t,this.limiter=new i.default(30*r,3e4,t),this.valueCache=new o.default({max:1073741824,length:(e,t)=>e.length+t.length}),n){const e={"user-agent":a};c&&(e.origin=c),n.password=n.username="";const t=n.host.endsWith(".infura.io");BaseHandler.setAuthHeaders(s,e),BaseHandler.setUserHeaders(s,e,!t),this.headers=e}}setCache(e){this.persistentCache=e}static setAuthHeaders(e,t){if(null!=e.username||null!=e.password){if(null!=e.jwt)throw new Error("Authentication via both username/password (Basic) and JWT (Bearer) is not possible");t.authorization=`Basic ${Buffer.from(`${e.username||""}:${e.password||""}`).toString("base64")}`}else e.jwt&&(t.authorization=`Bearer ${e.jwt}`)}static setUserHeaders(e,t,s){const r=e.headers;if(r)for(let e=0,n=r.length;e<n;e++){let{name:n,value:i}=r[e];const o=n.toLowerCase();if("authorization"===o&&"authorization"in t){if(!s)throw new Error("Authentication with multiple auth-params is not allowed.");const e=t.authorization.split(" ",1)[0],[r,n]=i.split(/\.(?:.+)/);if(r.toLowerCase()!==e.toLowerCase())throw new Error(`Authentication via both ${e} and ${r} is not allowed.`);t.authorization+=","+n}else t[o]=i}}getFromMemCache(e){const t=this.requestCache.get(e);if(void 0!==t)return t;const s=this.valueCache.get(e);return void 0!==s?JSON.parse(s).result:void 0}async getFromSlowCache(e,t,s){if(!this.persistentCache)return;const r=await this.persistentCache.get(e,t,s).catch((e=>{if(e.notFound)return null;throw e}));return null!=r?{result:JSON.parse(r).result,raw:r}:void 0}async queueRequest(e,t,s,r,i={disableCache:!1}){if(!i.disableCache){const r=this.getFromMemCache(s);if(void 0!==r)return r;const n=await this.getFromSlowCache(e,t,s);if(void 0!==n)return this.valueCache.set(s,Buffer.from(n.raw)),n.result}const o=this.limiter.handle(r).then((async({response:r,raw:o})=>{if(this.abortSignal.aborted)return Promise.reject(new a.AbortError);if(n.hasOwn(r,"result")){if(!i.disableCache&&(this.valueCache.set(s,o),this.persistentCache)){const r=this.persistentCache.put(e,t,s,"string"==typeof o?Buffer.from(o):o).catch((e=>{}));this.fireForget.add(r),r.finally((()=>{this.fireForget.delete(r)}))}return r.result}if(n.hasOwn(r,"error")&&null!=r.error){const{error:e}=r;throw new a.CodedError(e.message,e.code)}throw new Error(`Invalid response from fork provider: \`${JSON.stringify(r)}\``)}));return this.requestCache.set(s,o),await o}async close(){await Promise.all(this.fireForget.keys()),this.persistentCache&&await this.persistentCache.close()}}t.BaseHandler=BaseHandler,BaseHandler.JSONRPC_PREFIX='{"jsonrpc":"2.0","id":'},66:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpHandler=void 0;const a=s(5),c=i(s(160)),l=i(s(228)),u=s(161),h=o(s(556)),{JSONRPC_PREFIX:d}=u.BaseHandler;class HttpHandler extends u.BaseHandler{constructor(e,t){super(e,t),this.url=e.fork.url,this.headers.accept=this.headers["content-type"]="application/json","http:"===this.url.protocol?(this._request=c.default.request,this.agent=new c.Agent({keepAlive:!0,scheduling:"fifo"})):(this._request=l.default.request,this.agent=new l.Agent({keepAlive:!0,scheduling:"fifo"}))}handleLengthedResponse(e,t){let s=Buffer.allocUnsafe(t),r=0;return new Promise(((t,n)=>{e.on("data",(function data(e){const t=e.length;e.copy(s,r,0,t),r+=t})),e.on("end",(function end(){r!==s.length?n(new Error("content-length mismatch")):t(s)}))}))}handleChunkedResponse(e){let t;return new Promise((s=>{e.on("data",(e=>{const s=e;t=t?Buffer.concat([t,s],t.length+s.length):Buffer.concat([s],s.length)})),e.on("end",(()=>{s(t)}))}))}async request(e,t,s={disableCache:!1}){const r=JSON.stringify({method:e,params:t}),{protocol:n,hostname:i,port:o,pathname:c,search:l}=this.url,u={protocol:n,host:i,port:o,path:c+l,headers:this.headers,method:"POST",agent:this.agent,signal:this.abortSignal};return await this.queueRequest(e,t,r,(()=>{if(this.abortSignal.aborted)return Promise.reject(new a.AbortError);const e=h.default(),t=`${d}${this.id++},${r.slice(1)}`;this.headers["content-length"]=t.length;const s=this._request(u);return s.on("response",(t=>{const{headers:s}=t;let r;if("transfer-encoding"in s)r=this.handleChunkedResponse(t);else{const e=s["content-length"]/1;r=isNaN(e)||e<=0?this.handleChunkedResponse(t):this.handleLengthedResponse(t,e)}r.then((t=>{try{e.resolve({response:JSON.parse(t),raw:t})}catch{const s=t.toString();let r;r=s.length>340?s.slice(0,320)+"":s;let n=`Invalid JSON response from fork provider:\n\n ${r}`;(s.startsWith("invalid project id")||s.startsWith("project id required in the url"))&&this.url.host.endsWith("infura.io")&&(n+=`\n\nThe provided fork url, ${this.url}, may be an invalid or incorrect Infura endpoint.`,n+="\nVisit https://infura.io/docs/ethereum for Infura documentation."),e.reject(new Error(n))}}))})),s.setTimeout(5e3,s.abort.bind(s,null)),s.on("error",e.reject),s.write(t),s.end(),e.promise.finally((()=>this.requestCache.delete(r)))}),s)}}t.HttpHandler=HttpHandler},840:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProviderHandler=void 0;const r=s(161);class ProviderHandler extends r.BaseHandler{constructor(e,t){super(e,t);const s=e.fork.provider;if("function"==typeof s.request)this._request=async(e,t)=>{try{const r={result:await s.request({method:e,params:t})};return{response:r,raw:JSON.stringify(r)}}catch(e){if("number"!=typeof e.code)throw e;return{response:{error:e},raw:null}}};else{if("function"!=typeof s.send)throw new Error("Forking `provider` must be EIP-1193 compatible");console.warn("WARNING: Ganache forking only supports EIP-1193-compliant providers. Legacy support for send is currently enabled, but will be removed in a future version _without_ a breaking change. To remove this warning, switch to an EIP-1193 provider. This error is probably caused by an old version of Web3's HttpProvider (or ganache < v7)"),this._request=async(e,t)=>await new Promise(((r,n)=>{const i={id:this.id++,jsonrpc:"2.0",method:e,params:t};s.send(i,((e,t)=>{e?n(e):r({response:t,raw:JSON.stringify(t)})}))}))}}async request(e,t,s={disableCache:!1}){const r=JSON.stringify(t);return await this.queueRequest(e,t,`${e}:${r}`,(()=>this._request(e,JSON.parse(r))),s)}}t.ProviderHandler=ProviderHandler},356:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WsHandler=void 0;const n=s(5),i=r(s(357)),o=s(161),a=r(s(556)),{JSONRPC_PREFIX:c}=o.BaseHandler;class WsHandler extends o.BaseHandler{constructor(e,t){super(e,t),this.inFlightRequests=new Map;const{url:s,origin:r}=e.fork;this.connection=new i.default(s.toString(),{origin:r,headers:this.headers}),this.connection.binaryType="nodebuffer",this.open=this.connect(this.connection),this.connection.onclose=()=>{this.open=this.connect(this.connection)},this.abortSignal.addEventListener("abort",(()=>{this.connection.onclose=null,this.connection.close(1e3)})),this.connection.onmessage=this.onMessage.bind(this)}async request(e,t,s={disableCache:!1}){if(await this.open,this.abortSignal.aborted)return Promise.reject(new n.AbortError);const r=JSON.stringify({method:e,params:t});return await this.queueRequest(e,t,r,(()=>{if(this.abortSignal.aborted)return Promise.reject(new n.AbortError);const e=this.id++,t=a.default();return this.inFlightRequests.set(e,t),this.connection.send(`${c}${e},${r.slice(1)}`),t.promise.finally((()=>this.requestCache.delete(r)))}),s)}onMessage(e){if("message"!==e.type)return;const t=e.data,s=JSON.parse(t),r=s.id,n=this.inFlightRequests.get(r);n&&(this.inFlightRequests.delete(r),n.resolve({response:s,raw:t}))}connect(e){let t=new Promise(((t,s)=>{e.onopen=t,e.onerror=s}));return t.then((()=>{e.onopen=null,e.onerror=null}),(e=>{console.log(e)})),t}async close(){await super.close(),this.connection.close()}}t.WsHandler=WsHandler},353:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0;const r=s(1);t.encode=function encode(e){const t=e.length;let s=0;const n=[];for(let i=0;i<t;i++){const t=e[i];if(null===t)s+=2,n.push([r.BUFFER_ZERO,r.BUFFER_EMPTY]);else{const e=t.length,i=r.Quantity.from(e).toBuffer();s+=1+i.length+e,n.push([i,t])}}const i=Buffer.allocUnsafe(s);let o=0;for(let e=0;e<t;e++){const[t,s]=n[e],r=t.length;i[o++]=r,t.copy(i,o,0,r),s.copy(i,o+=r,0,s.length),o+=s.length}return i},t.decode=function decode(e){const t=[];for(let s=0,n=e.length;s<n;){const n=e[s++],i=r.Quantity.from(e.slice(s,s+=n)).toNumber();t.push(e.slice(s,s+=i))}return t}},841:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ancestry=void 0;const r=s(1),n=s(68);t.Ancestry=class Ancestry{constructor(e,t){this.cacheLock=new Map,this.db=e,null==t?(this.next=null,this.knownAncestors=new Set):(this.next=t.closestKnownAncestor.equals(r.BUFFER_EMPTY)?null:t.closestKnownAncestor,this.knownAncestors=new Set([t.hash.toString("hex")]))}async loadNextAncestor(e){const t=e.toString("hex");if(this.cacheLock.has(t))throw new Error("couldn't load next ancestor as it is locked");let s;this.cacheLock.set(t,new Promise((e=>{s=e})));const i=await this.db.get(e),o=n.Tree.deserialize(e,i);this.next=o.closestKnownAncestor.equals(r.BUFFER_EMPTY)?null:o.closestKnownAncestor,this.knownAncestors.add(o.hash.toString("hex")),this.cacheLock.delete(t),s()}async has(e){const t=e.toString("hex");if(this.knownAncestors.has(t))return!0;if(this.next){const t=this.cacheLock.get(this.next.toString("hex"));return t?(await t,this.has(e)):(await this.loadNextAncestor(this.next),this.has(e))}return!1}}},842:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBlockByNumber=t.findClosestDescendants=t.findClosestAncestor=t.findRelated=t.resolveTargetAndClosestAncestor=t.setDbVersion=t.getBlockNumberFromParams=void 0;const r=s(5),n=s(1),i=s(68);async function*findRelated(e,t,s){const r=e.createReadStream({keys:!0,values:!0,...s});for await(const e of r){const{key:s,value:r}=e,o=i.Tree.deserialize(s,r),{height:a}=o.decodeKey(),c=await getBlockByNumber(t,a);null!=c&&c.hash===n.Data.from(o.hash).toString()&&(yield o)}}async function findClosestAncestor(e,t,s,r){const o=findRelated(e,t,{gte:r,lt:i.Tree.encodeKey(s,n.DATA_EMPTY),reverse:!0}),a=await o.next();return await o.return(),a.value}async function getBlockByNumber(e,t){return await e("eth_getBlockByNumber",[t.toString(),!1])}t.getBlockNumberFromParams=function getBlockNumberFromParams(e,t){switch(e){case"eth_getBlockByNumber":return t[0];case"eth_getTransactionCount":case"eth_getCode":case"eth_getBalance":return t[1];case"eth_getStorageAt":return t[2];default:return null}},t.setDbVersion=async function setDbVersion(e,t){try{const s=await e.get("version");if(!t.equals(s))throw new Error(`Persistent cache version "${t.toString()}"" is not understood.`)}catch(s){if(!s.notFound)throw s;await e.put("version",t)}},t.resolveTargetAndClosestAncestor=async function resolveTargetAndClosestAncestor(e,t,s,o){let a,c,l;try{const r=i.Tree.encodeKey(s,o);a=i.Tree.deserialize(r,await e.get(r)),a.closestKnownAncestor.equals(n.BUFFER_EMPTY)?(c=null,l=null):(l=i.Tree.deserialize(a.closestKnownAncestor,await e.get(a.closestKnownAncestor)),c=await findClosestAncestor(e,t,s,l.key)||l)}catch(u){if(!u.notFound)throw u;if(l=null,0n===s.toBigInt())c=null,a=new i.Tree(s,o);else{const l=await getBlockByNumber(t,r.Tag.EARLIEST);if(!l)throw new Error('Could not find "earliest" block.');const{hash:u,number:h}=l,d=n.Data.from(u,32),p=new i.Tree(n.Quantity.from(h),d);c=await findClosestAncestor(e,t,s,p.key)||p,a=new i.Tree(s,o,c.key)}}return{targetBlock:a,closestAncestor:c,previousClosestAncestor:l}},t.findRelated=findRelated,t.findClosestAncestor=findClosestAncestor,t.findClosestDescendants=async function*findClosestDescendants(e,t,s){const r=findRelated(e,t,{gte:i.Tree.encodeKey(n.Quantity.from(s.toBigInt()+1n),n.DATA_EMPTY),reverse:!1});for await(const e of r)yield e},t.getBlockByNumber=getBlockByNumber},67:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PersistentCache=void 0;const a=s(68),c=s(15),l=o(s(565)),u=o(s(146)),h=o(s(282)),d=o(s(151)),p=o(s(148)),m=i(s(353)),g=s(1),y=s(841),b=s(842),_={keyEncoding:"binary",valueEncoding:"binary"},w={prefix:""};class PersistentCache{constructor(){this.version=g.BUFFER_ZERO,this._reBalancePromise=null,this.status="open"}static async deleteDb(e){return new Promise(((t,s)=>{const r=PersistentCache.getDbDirectory(e);h.default.destroy(r,(e=>{e?s(e):t(void 0)}))}))}static async serializeDb(e){const t=await PersistentCache.create(e);return await new Promise((async e=>{const s=t.ancestorDb.createReadStream({gte:g.BUFFER_ZERO,keys:!0,values:!0}),r={},n={};for await(const e of s){const{key:t,value:s}=e,i=a.Tree.deserialize(t,s);i.height=i.decodeKey().height.toNumber();const o=t.toString("hex"),c=i.closestKnownAncestor.toString("hex");if(n[o]=i,0===i.closestKnownAncestor.length)r[o]=i;else{const e=n[c].descendants||{};e[o]=i,n[c].descendants=e}i.hash=g.Data.from(i.hash).toString(),i.parent=i.closestKnownAncestor.length>0?g.Data.from(n[c].hash).toString():null,delete i.key,delete i.closestKnownDescendants,delete i.closestKnownAncestor}await t.close(),e(JSON.parse(JSON.stringify(r)))}))}static getDbDirectory(e=""){const{data:t}=l.default("Ganache/db",{suffix:e});return t}static async create(e){const t=new PersistentCache,s=PersistentCache.getDbDirectory(e);await c.promises.mkdir(s,{recursive:!0});const r=p.default(h.default(s,w),_),n=await new Promise(((e,t)=>{const s=u.default(r,(r=>{r?t(r):e(s)}))}));return t.db=n,t.cacheDb=d.default(n,"c",_),t.ancestorDb=d.default(n,"a",_),await t.cacheDb.open(),await t.ancestorDb.open(),await b.setDbVersion(t.db,t.version),t}async initialize(e,t,s){this.hash=t,this.request=s;const{targetBlock:r,closestAncestor:n,previousClosestAncestor:i}=await b.resolveTargetAndClosestAncestor(this.ancestorDb,this.request,e,t);this.ancestry=new y.Ancestry(this.ancestorDb,n);const o=this.ancestorDb.batch();if(i&&!i.key.equals(n.key)){r.closestKnownAncestor=n.key;const e=i.closestKnownDescendants.findIndex((e=>e.equals(r.key)));i.closestKnownDescendants.splice(e,1),o.put(i.key,i.serialize())}let c=[...r.closestKnownDescendants];if(null==n)o.put(r.key,r.serialize());else{const t=[r.key];await Promise.all(n.closestKnownDescendants.map((async s=>{if(s.equals(r.key))return;const{height:n}=a.Tree.decodeKey(s);if(n.toBigInt()<=e.toBigInt())return void t.push(s);const i=await this.ancestorDb.get(s),l=a.Tree.deserialize(s,i),u=await this.getBlock(n);null==u||u.hash!==g.Data.from(l.hash,32).toString()?t.push(s):(r.closestKnownDescendants.push(l.key),c.push(...l.closestKnownDescendants),l.closestKnownAncestor=r.key,o.put(l.key,l.serialize()))}))),n.closestKnownDescendants=t,o.put(n.key,n.serialize())}o.put(r.key,r.serialize()),await o.write(),this._reBalancePromise=this.reBalanceDescendantTree(e,r,c).catch((e=>{})).finally((()=>{this._reBalancePromise=null}))}async getBlock(e){return await b.getBlockByNumber(this.request,e)}async reBalanceDescendantTree(e,t,s){const r=this.ancestorDb.batch(),n=t.closestKnownDescendants,i=n.length;for await(const i of b.findClosestDescendants(this.ancestorDb,this.request,e)){const e=i.key;if(t.key.equals(e))continue;if(s.push(...i.closestKnownDescendants),n.some((t=>t.equals(e))))continue;if(s.some((t=>t.equals(e))))continue;const o=a.Tree.deserialize(i.closestKnownAncestor,await this.ancestorDb.get(i.closestKnownAncestor));if(o.closestKnownDescendants.splice(o.closestKnownDescendants.findIndex((t=>t.equals(e))),1),i.closestKnownAncestor=t.key,n.push(i.key),r.put(o.key,o.serialize()),r.put(i.key,i.serialize()),"closed"===this.status)break}i!==n.length&&(r.put(t.key,t.serialize()),r.length>0&&this.ancestorDb.isOpen()&&await r.write())}async get(e,t,s){const r=b.getBlockNumberFromParams(e,t);if(null==r)return;const n=g.Quantity.from(r),i=Buffer.from(s),o=m.encode([n.toBuffer(),i]),a=m.encode([g.Quantity.from(n.toBigInt()+1n).toBuffer()]),c=this.cacheDb.createReadStream({gt:o,lt:a,keys:!0,values:!0}),l=this.hash.toBuffer();for await(const e of c){const{key:t,value:s}=e,[r,n,o]=m.decode(t);if(!n.equals(i))return;if(l.equals(o)||await this.ancestry.has(o))return s}}async put(e,t,s,r){const n=b.getBlockNumberFromParams(e,t);if(null==n)return!1;const i=g.Quantity.from(n),o=m.encode([i.toBuffer(),Buffer.from(s),this.hash.toBuffer()]);return await this.cacheDb.put(o,r),!0}async close(){"closed"!==this.status&&(this.status="closed",this.cacheDb&&await this.cacheDb.close(),this.ancestorDb&&(await this._reBalancePromise,await this.ancestorDb.close()),this.db&&await this.db.close())}}t.PersistentCache=PersistentCache},68:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Tree=void 0;const o=i(s(353)),a=s(1),c=i(s(19));class Tree{constructor(e,t,s=a.BUFFER_EMPTY){this.closestKnownDescendants=[],this.key=Tree.encodeKey(e,t),this.hash=t.toBuffer(),this.closestKnownAncestor=s}serialize(){return c.encode([this.hash,this.closestKnownAncestor,this.closestKnownDescendants])}decodeKey(){return Tree.decodeKey(this.key)}static decodeKey(e){const[t,s]=o.decode(e);return{height:a.Quantity.from(t),hash:a.Data.from(s)}}static deserialize(e,t){const[s,r,n]=c.decode(t),i=Object.create(Tree.prototype);return i.key=e,i.hash=s,i.closestKnownAncestor=r,i.closestKnownDescendants=n,i}static encodeKey(e,t){return o.encode([e.toBuffer(),t.toBuffer()])}}t.Tree=Tree},839:(e,t)=>{"use strict";function timeSince(e){return Date.now()-e}Object.defineProperty(t,"__esModule",{value:!0}),t.LimitCounter=void 0;t.LimitCounter=class LimitCounter{constructor(e){this.counters=new Map,this.windowLength=e}evict(){const e=3*this.windowLength;if(timeSince(this.lastEvict)<e)return;this.lastEvict=Date.now();const t=this.counters;t.forEach(((s,r)=>{timeSince(s.updatedAt)>=e&&t.delete(r)}))}increment(e){this.evict();let t=this.counters.get(e);null==t?this.counters.set(e,{value:1,updatedAt:Date.now()}):(t.value+=1,t.updatedAt=Date.now())}get(e,t){let s=this.counters.get(e);null==s&&(s={value:0,updatedAt:Date.now()});let r=this.counters.get(t);return null==r&&(r={value:0,updatedAt:Date.now()}),[s.value,r.value]}}},354:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(5),i=s(1),o=r(s(355)),a=s(839),sleep=(e,t)=>t.aborted?Promise.reject(new n.AbortError):new Promise(((s,r)=>{function abort(){clearTimeout(i),t.removeEventListener("abort",abort),r(new n.AbortError)}const i=setTimeout((()=>{t.removeEventListener("abort",abort),s()}),e);t.addEventListener("abort",abort)}));t.default=class RateLimiter{constructor(e,t,s){this.sem=o.default(1),this.take=()=>new Promise((e=>this.sem.take(e))),this.mustBackoff=null,this.counter=0,this.requestLimit=e,this.windowSizeMs=t/2,this.limitCounter=new a.LimitCounter(this.windowSizeMs),this.abortSignal=s}status(e,t){const s=this.requestLimit,r=this.windowSizeMs,n=t,i=n-r,[o,a]=this.limitCounter.get(n,i);let c;if(c=0===a?o:a*((r-(e-n))/r)+o,s>0&&c+1>s){const e=o+1,t=s+1;return{rate:c,next:0===a?n+r+r/t:r*(a+e-t)/a+n}}return{rate:c,next:e}}async handle(e){await this.take();try{return await this.schedule(e)}finally{this.sem.leave()}}async schedule(e){const t=this.abortSignal;for(;;){if(t.aborted)return Promise.reject(new n.AbortError);this.mustBackoff&&await this.mustBackoff;const a=Date.now(),c=(r=a,o=this.windowSizeMs,r-r%o),{rate:l,next:u}=this.status(a,c);if(!(l+1>this.requestLimit&&u>a)){this.limitCounter.increment(c);const r=await e();if(s=r.response,i.hasOwn(s,"error")&&null!=s.error&&s.error.code===i.JsonRpcErrorCode.LIMIT_EXCEEDED&&i.hasOwn(r.response.error.data,"rate")){const e=r.response.error.data.rate.backoff_seconds;this.requestLimit=r.response.error.data.rate.allowed_rps*(this.windowSizeMs/1e3);const s=this.mustBackoff=sleep(1e3*e,t);await this.mustBackoff,this.mustBackoff===s&&(this.mustBackoff=null);continue}return r}await sleep(Date.now()-u,t)}var s,r,o}}},351:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ForkStateManager=void 0;const n=s(21),i=r(s(198)),o=s(352);class ForkStateManager extends i.default{constructor(e){super(e),this._cache=new o.ForkCache(e.trie)}copy(){return new ForkStateManager({trie:this._trie.copy(!1),common:this._common})}async _lookupStorageTrie(e){const t=await this.getAccount(e),s=this._trie.copy(!0);return s.setContext(t.stateRoot,e.buf,s.blockNumber),s.db.checkpoints=[],s}async getContractStorage(e,t){const s=await this._getStorageTrie(e),r=await s.get(t);return n.decode(r)}}t.ForkStateManager=ForkStateManager},65:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ForkTrie=void 0;const a=s(23),c=s(1),l=s(550),u=o(s(151)),h=s(452),d=i(s(353)),p=s(19),m=s(5),g=s(0),y=Buffer.allocUnsafe(1).fill(1),b=new WeakMap,_={keyEncoding:"binary",valueEncoding:"binary"};function isEqualKey(e,t,s){const r=d.decode(e),[n,i,o]=r;return i.equals(t)&&o.equals(s)}class ForkTrie extends l.GanacheTrie{constructor(e,t,s){if(super(e,t,s),this.address=null,this.isPreForkBlock=!1,this.accountFromFallback=async(e,t)=>{const{fallback:s}=this.blockchain,r=this.blockchain.fallback.selectValidForkBlockNumber(t),n=s.request("eth_getCode",[e,r]),i=[s.request("eth_getTransactionCount",[e,r]),s.request("eth_getBalance",[e,r]),null],o=new m.Account(e);try{const e=await n;if("0x"!==e){const t=c.Data.from(e).toBuffer();o.codeHash=c.keccak(t),o.codeHash.equals(g.KECCAK256_NULL)||(i[2]=this.db.put(o.codeHash,t))}}catch(e){throw Promise.all(i).catch((e=>{})),e}const[a,l]=await Promise.all(i);return o.nonce="0x0"===a?c.RPCQUANTITY_EMPTY:c.Quantity.from(a,!0),o.balance="0x0"===l?c.RPCQUANTITY_EMPTY:c.Quantity.from(l),o.serialize()},this.storageFromFallback=async(e,t,s)=>{const r=await this.blockchain.fallback.request("eth_getStorageAt",[`0x${e.toString("hex")}`,`0x${t.toString("hex")}`,this.blockchain.fallback.selectValidForkBlockNumber(s)]);if(!r)return null;const n=r.replace(/^0x(00)*/,""),i=Buffer.from(n,"hex");return p.encode(i)},this.accounts=s.accounts,this.blockNumber=this.blockchain.fallback.blockNumber,this.forkBlockNumber=this.blockNumber.toBigInt(),b.has(e))this.metadata=new h.CheckpointDB(b.get(e));else{const t=u.default(e,"f",_);b.set(e,t),this.metadata=new h.CheckpointDB(t)}}set root(e){this._root=e}get root(){return this._root}checkpoint(){super.checkpoint(),this.metadata.checkpoint(this.root)}async commit(){await Promise.all([super.commit(),this.metadata.commit()])}async revert(){await Promise.all([super.revert(),this.metadata.revert()])}setContext(e,t,s){this._root=e,this.address=t,this.blockNumber=s,this.isPreForkBlock=s.toBigInt()<this.forkBlockNumber}async put(e,t){return super.put(e,t)}async revertMetaData(e,t){const s=this.metadata._leveldb,r=s.createKeyStream({gte:d.encode([e.toBuffer()]),lt:d.encode([c.Quantity.from(t.toBigInt()+1n).toBuffer()])}),n=s.batch();for await(const e of r)n.del(e);await n.write()}createDelKey(e){const t=this.blockNumber.toBuffer();return d.encode([t,this.address,e])}async keyWasDeleted(e){const t=null===this.address?c.BUFFER_EMPTY:this.address,s=this.metadata.checkpoints;for(let r=s.length-1;r>=0;r--)for(let[n,i]of s[r].keyValueMap.entries()){if(!i||!i.equals(y))continue;if(isEqualKey(Buffer.from(n,"binary"),t,e))return!0}const r=this.metadata._leveldb.createReadStream({lte:this.createDelKey(e),reverse:!0});for await(const s of r){const{key:r,value:n}=s;if(n&&n.equals(y)&&isEqualKey(r,t,e))return!0}return!1}async del(e){if(await this.lock.wait(),this.isPreForkBlock){const t=c.keccak(e),{node:s,stack:r}=await this.findPath(t);s&&await this._deleteNode(t,r)}else{const t=this.createDelKey(e),s=this.metadata.put(t,y),r=c.keccak(e),{node:n,stack:i}=await this.findPath(r);n&&await this._deleteNode(r,i),await s}this.lock.signal()}async get(e){const t=await super.get(e);return null!=t?t:!this.isPreForkBlock&&await this.keyWasDeleted(e)?null:null===this.address?this.accountFromFallback(a.Address.from(e),this.blockNumber):this.storageFromFallback(this.address,e,this.blockNumber)}copy(e=!0){const t=this.db.copy(),s=new ForkTrie(t._leveldb,this.root,this.blockchain);return s.accounts=this.accounts,s.address=this.address,s.blockNumber=this.blockNumber,e&&this.isCheckpoint&&(s.db.checkpoints=[...this.db.checkpoints],s.metadata.checkpoints=this.metadata.checkpoints),s}}t.ForkTrie=ForkTrie},261:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deriveFromIndex=t.deriveFromPath=t.createAccountFromSeed=t.createAccountGeneratorFromSeedAndPath=void 0;const n=s(20),i=r(s(145)),o=s(1),a=2147483648,c=Buffer.from("Bitcoin seed","utf8");function createAccountFromSeed(e){const t=n.createHmac("sha512",c).update(e).digest(),s=t.slice(0,32);return{privateKey:s,chainCode:t.slice(32),publicKey:makePublicKey(s)}}function deriveFromPath(e,t){return e.forEach((function(e,s){if(0===s){if(!/^[mM]{1}/.test(e))throw new Error('Path must start with "m" or "M"');return}const r=e.length>1&&"'"===e[e.length-1];let n=parseInt(e,10);if(n>=a)throw new Error("Invalid index");r&&(n+=a),t=deriveChild(n,r,t.privateKey,t.publicKey,t.chainCode)})),t}function deriveFromIndex(e,t){if(e>=a)throw new Error("Invalid index");return deriveChild(e,!1,t.privateKey,t.publicKey,t.chainCode)}function makePublicKey(e){const t=Buffer.allocUnsafe(33);switch(i.default.publicKeyCreate(t,e)){case 0:return t;case 1:throw new Error("Private Key is invalid");case 2:throw new Error("Public Key serialization error")}}t.createAccountGeneratorFromSeedAndPath=function createAccountGeneratorFromSeedAndPath(e,t){const s=deriveFromPath(t,createAccountFromSeed(e));return e=>deriveFromIndex(e,s)},t.createAccountFromSeed=createAccountFromSeed,t.deriveFromPath=deriveFromPath,t.deriveFromIndex=deriveFromIndex;const l=Buffer.allocUnsafe(4);function deriveChild(e,t,s,r,a){const c=l;let u;c.writeUInt32BE(e,0);const h=s.length;if(t){const e=h+1+4;u=Buffer.concat([o.BUFFER_ZERO,s,c],e)}else u=Buffer.concat([r,c],r.length+4);const d=n.createHmac("sha512",a).update(u).digest(),p=d.slice(0,32);try{const e=Buffer.allocUnsafe(h);switch(s.copy(e,0,0,h),i.default.privateKeyTweakAdd(e,p)){case 0:return{privateKey:e,publicKey:makePublicKey(e),chainCode:d.slice(32)};case 1:throw new Error("The tweak was out of range or the resulted private key is invalid")}}catch(n){return deriveChild(e+1,t,s,r,a)}}},779:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertArgLength=void 0,t.assertArgLength=function assertArgLength(e,t=e){return function(s,r,n){const i=n.value;return n.value=function(){const s=arguments.length;if(s<e||s>t)throw new Error(`Incorrect number of arguments. '${r}' requires ${e===t?`exactly ${e} ${1===e?"argument":"arguments"}.`:`between ${e} and ${t} arguments.`}`);return Reflect.apply(i,this,arguments)},n}}},843:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bufferify=void 0;const s=Buffer.from('[]{},"":null'),r=s.slice(0,2),n=r.slice(0,1),i=r.slice(1,2),o=s.slice(2,4),a=o.slice(0,1),c=o.slice(1,2),l=s.slice(4,6).slice(0,1),u=s.slice(5,7),h=s.slice(6,8).slice(1,2),d=s.slice(8,12),p=s.slice(0,0),m=Object.prototype.toString;function stringToQuotedBuffer(e){const{length:t}=e;if(t>0){const s=Buffer.allocUnsafe(t+2);return s[0]=34,s[t+1]=34,s.utf8Write(e,1,t),s}return u}function*bufferify(e,t){const s=typeof e;if("number"===s||"boolean"===s)yield function numberToBuffer(e){const t=e.toString(),{length:s}=t;if(s>0){const e=Buffer.allocUnsafe(s);return e.utf8Write(t,0,s),e}return p}(e);else if("string"===s)yield stringToQuotedBuffer(e);else if(Buffer.isBuffer(e))yield function bufferToQuotedBuffer(e){const{length:t}=e,s=Buffer.allocUnsafe(t+2);return s[0]=34,e.copy(s,1,0,t),s[t+1]=34,s}(e);else if(Array.isArray(e))yield*function*arrayToBuffer(e){const{length:t}=e;if(0!==t){yield n;for(const t of bufferify(e[0],"0"))yield 0===t.length?d:t;for(let s=1;s<t;s++){yield l;for(const t of bufferify(e[s],s.toString()))yield 0===t.length?d:t}yield i}else yield r}(e);else if(u=e,"[object Object]"===m.call(u))yield*function*objectToBuffer(e,t){if("toJSON"in e)return void(yield*bufferify(e.toJSON(t),t));let s=!1;for(const t in e){const r=e[t];let n=!0;for(const e of bufferify(r,t))if(0!==e.length)if(n){n=!1;const r=stringToQuotedBuffer(t);s?yield Buffer.concat([l,r,h,e]):(yield Buffer.concat([a,r,h,e]),s=!0)}else yield e}return s?void(yield c):void(yield o)}(e,t);else if(null===e)yield d;else if("undefined"===s)yield p;else{if(!("toJSON"in e)||"function"!=typeof e.toJSON)throw new Error("unsupported value in bufferify");yield*bufferify(e.toJSON(),t)}var u}t.bufferify=bufferify},430:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseFilter=t.parseFilterRange=t.parseFilterDetails=void 0;const r=s(5),n=s(23);function parseFilterDetails(e){return{addresses:e.address?(Array.isArray(e.address)?e.address:[e.address]).map((e=>n.Address.from(e.toLowerCase()).toBuffer())):[],topics:e.topics?e.topics:[]}}function parseFilterRange(e,t){const s=t.blocks.latest.header.number,n=t.blocks.getEffectiveNumber(e.fromBlock||r.Tag.LATEST),i=s.toNumber(),o=t.blocks.getEffectiveNumber(e.toBlock||r.Tag.LATEST);let a;return a=o>s?i:o.toNumber(),{fromBlock:n,toBlock:o,toBlockNumber:a}}t.parseFilterDetails=parseFilterDetails,t.parseFilterRange=parseFilterRange,t.parseFilter=function parseFilter(e={address:[],topics:[]},t){const{addresses:s,topics:r}=parseFilterDetails(e),{fromBlock:n,toBlock:i,toBlockNumber:o}=parseFilterRange(e,t);return{addresses:s,fromBlock:n,toBlock:i,toBlockNumber:o,topics:r}}},778:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(5),i=s(1),bn=(e=0)=>new r.BN(e),o=bn(2300),check=e=>t=>e.has(t),a=check(new Set(["CALL","DELEGATECALL","STATICCALL","CALLCODE"])),c=check(new Set(["CALL","CALLCODE"])),l=check(new Set(["CREATE","CREATE2"])),u=check(new Set(["STOP","RETURN","REVERT","INVALID","SELFDESTRUCT"])),binSearch=async(e,t,s,n)=>{const i=t.block.header.gasLimit,o=s.execResult.gasRefund,a=o?s.gasEstimate.add(o):s.gasEstimate,c={lo:a,hi:a},isEnoughGas=async s=>{const n=e();t.tx.gasLimit=new r.BN(s.toArrayLike(Buffer));const i=await n.runTx(t).catch((e=>({vmerr:e})));return!i.vmerr&&!i.execResult.exceptionError};if(!await isEnoughGas(c.hi)){do{c.hi=c.hi.muln(1.0158730158730158)}while(!await isEnoughGas(c.hi));for(;c.lo.addn(1).lt(c.hi);){const e=c.lo.add(c.hi).divn(2);await isEnoughGas(e)?c.hi=e:c.lo=e}if(c.hi.gte(i)&&!await isEnoughGas(c.hi))return n(new Error("gas required exceeds allowance or always failing transaction"))}s.gasEstimate=c.hi,n(null,s)},exactimate=async(e,t,s)=>{const r=(()=>{const e=[],t=[],s=new Set;let r=!1,n=0;return{collect:i=>{r&&(i.depth===n&&s.add(t.length-1),r=!1),a(i.opcode.name)?(i.stack=i.stack.map((e=>e.clone())),r=!0,n=i.depth,e.push({index:t.length,depth:i.depth,name:i.opcode.name})):(l(i.opcode.name)||u(i.opcode.name))&&e.push({index:t.length,depth:i.depth,name:i.opcode.name}),t.push(i)},isPrecompile:e=>s.has(e),done:()=>!t.length||e.length<2||!u(t[t.length-1].opcode.name),ops:t,systemOps:e}})();e.on("step",r.collect);const Context=(e,t)=>{const s=0===e;let n=e,i=0;const a=bn();let l=bn();const u=r.ops[e],h=r.ops[e+1],d=u.gasLeft.sub(h.gasLeft),p=t||bn();let m=!1;function addGas(e){l.gtn(0)&&(e.gte(l)?l=bn():l.isub(e)),a.iadd(e)}return{start:()=>n,stop:()=>i,setStart:e=>{n=e,m=!0},setStop:e=>{i=e},getCost:()=>({cost:a,sixtyFloorths:l}),transfer:e=>{const t=e.getCost();addGas(t.cost),l.iadd(t.sixtyFloorths)},addSixtyFloorth:e=>{l.iadd(e)},addRange:(e=bn())=>{addGas(r.ops[s||m?n:n+1].gasLeft.sub(r.ops[i].gasLeft).add(e))},finalizeRange:()=>{let e;if(m&&i!==r.ops.length-1){e=r.ops[n].gasLeft.sub(r.ops[i-1].gasLeft),addGas(e);e=r.ops[i-1].gasLeft.sub(r.ops[i].gasLeft).add(d)}else e=r.ops[n].gasLeft.sub(r.ops[i].gasLeft);if(e.isub(p),addGas(e),c(u.opcode.name)&&!u.stack[u.stack.length-3].isZero()){a.iadd(l);const e=h.gasLeft.sub(r.ops[i-1].gasLeft);e.gt(o)?l=a.divn(63):e.lte(o)&&(l=o.sub(e))}else i!==r.ops.length-1&&(a.iadd(l),l=a.divn(63))}}},h=await e.runTx(t).catch((e=>({vmerr:e}))),d=h.vmerr;if(d)return s(d);if(h.execResult.exceptionError){return s(new n.RuntimeError(i.RPCQUANTITY_EMPTY,h,n.RETURN_TYPES.RETURN_VALUE),h)}if(r.done()){const e=h.gasUsed;h.gasEstimate=e}else{const e=r.ops[0].gasLeft.sub(r.ops[r.ops.length-1].gasLeft),t=(()=>{const e=r.systemOps,t=r.ops,opIndex=t=>e[t].index,s=[];let n=0,i=Context(0);for(;n<e.length;){const e=opIndex(n),c=t[e],h=c.opcode.name;if(a(h)||l(h))r.isPrecompile(e)?(i.setStop(e+1),i.addRange(),i.setStart(e+1),i.addSixtyFloorth(o)):(i.setStop(e),i.addRange(bn(c.opcode.fee)),s.push(i),i=Context(e,bn(c.opcode.fee)));else{if(!u(h))throw new Error("INVALID OPCODE");{i.setStop(e+1<r.ops.length?e+1:e),i.finalizeRange();const t=s.pop();if(!t)break;t.transfer(i),i=t,i.setStart(e+1)}}n++}const c=i.getCost();return c.cost.add(c.sixtyFloorths)})().sub(e);h.gasEstimate=h.gasUsed.add(t)}s(d,h)};t.default=(e,t,s)=>{exactimate(e(),t,((r,n)=>{if(r)return s(r);binSearch(e,t,n,((e,t)=>{if(e)return s(e);s(null,t)}))}))}},838:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warmPrecompiles=t.activatePrecompiles=void 0;const s=Uint8Array.from([248,68,128,1,160,86,232,31,23,27,204,85,166,255,131,69,230,146,192,248,110,91,72,224,27,153,108,173,192,1,98,47,181,227,99,180,33,160,197,210,70,1,134,247,35,60,146,126,125,178,220,199,3,192,229,0,182,83,202,130,39,59,123,250,216,4,93,133,164,112]),r={serialize:()=>s},n=[],makeAccount=e=>{if(n[e])return n[e];const t=Buffer.allocUnsafe(20).fill(0,0,19);return t[19]=e,n[e]={buf:t}};t.activatePrecompiles=async e=>{await e.checkpoint();const t=e._cache;for(let s=1;s<=18;s++){const n=makeAccount(s);t.put(n,r),e.touchAccount(n)}await e.commit()};t.warmPrecompiles=async e=>{for(let t=1;t<=18;t++){const s=makeAccount(t);e.addWarmedAddress(s.buf)}}},550:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GanacheTrie=void 0;const r=s(95);class GanacheTrie extends r.SecureTrie{constructor(e,t,s){super(e,t),this.blockchain=s}setContext(e,t,s){this.root=e}copy(e=!0){const t=this.db.copy(),s=new GanacheTrie(t._leveldb,this.root,this.blockchain);return e&&this.isCheckpoint&&(s.db.checkpoints=[...this.db.checkpoints]),s}}t.GanacheTrie=GanacheTrie},59:function(e,t,s){"use strict";var r,n,i,o,a,c,l,u,h,d,p,m,g,y,b,_,w,v,k,E,B,T,A=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},P=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},O=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Capacity=void 0;const R=s(5),S=s(1),N=s(19),D=s(95),M=O(s(53)),F=O(s(785)),I=s(8),L=s(453);var C;!function(e){e[e.FillBlock=-1]="FillBlock",e[e.Empty=0]="Empty",e[e.Single=1]="Single"}(C=t.Capacity||(t.Capacity={}));const updateBloom=(e,t)=>{let s=256;for(;--s;)e[s]|=t[s]},sortByPrice=(e,t,s)=>e[t].effectiveGasPrice>e[s].effectiveGasPrice,refresher=(e,t)=>e.updateEffectiveGasPrice(t);class Miner extends M.default.Typed{constructor(e,t,s,O){super(),r.set(this,0n),n.set(this,new Set),i.set(this,void 0),o.set(this,!1),a.set(this,!1),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),h.set(this,!1),d.set(this,void 0),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),y.set(this,new S.Heap(sortByPrice,refresher)),b.set(this,(async(e,t=C.FillBlock,s=!1)=>{const{block:r,transactions:n}=await P(this,_).call(this,e,t,s);if(P(this,i)&&(P(this,E).call(this),A(this,i,!1),!s&&P(this,y).length>0)){const e=P(this,g).call(this,r);await P(this,b).call(this,e,t)}return n})),_.set(this,(async(e,t,s)=>{let n;const i=P(this,m),{pending:a,inProgress:c}=P(this,d),u=P(this,p);let h=!0;const b=P(this,y),_=P(this,p).legacyInstamine,E=new Map;let T;do{h=!1,A(this,o,!0),T=[];const d=new D.BaseTrie(null,null),p=new D.BaseTrie(null,null);if(t===C.Empty){await i.stateManager.checkpoint(),await i.stateManager.commit();const t=e.finalize(d.root,p.root,S.BUFFER_256_ZERO,i.stateManager._trie.root,0n,u.extraData,[],E);return this.emit("block",t),P(this,k).call(this),{block:t.block,transactions:[]}}let m=0,y=u.blockGasLimit.toBigInt(),O=0n;const M=Buffer.allocUnsafe(256).fill(0),L=[];await i.stateManager.checkpoint();const x=R.TraceDataFactory(),stepListener=(e,t)=>{if("SSTORE"===e.opcode.name){const t=x.from(e.stack[e.stack.length-1].toArrayLike(Buffer)).toBuffer(),s=S.keccak(t);E.set(s.toString(),{key:t,hashedKey:s})}t()};let j;for(i.on("step",stepListener);j=b.peek();){const s=j.from.toString();if(j.calculateIntrinsicGas()>y){j.locked=!1,P(this,v).call(this,s);continue}A(this,r,j.effectiveGasPrice.toBigInt()),await i.stateManager.checkpoint(),i.stateManager._trie.blockNumber=S.Quantity.from(e.header.number.toArrayLike(Buffer));const n=await P(this,w).call(this,j,e,s,a);if(null!==n){const e=S.Quantity.from(n.gasUsed.toArrayLike(Buffer)).toBigInt();if(y>=e){await i.stateManager.commit(),T[m]=j,y-=e,O+=e;const r=N.encode(0===m?S.BUFFER_EMPTY:S.uintToBuffer(m));L.push(d.put(r,j.serialized));const o=j.fillFromResult(n,O);L.push(p.put(r,o)),updateBloom(M,n.bloom.bitvector),m++;const l=a.get(s);if(h=l.removeBest(),c.add(j),j.once("finalized").then((()=>{c.delete(j)})),y<=I.Params.TRANSACTION_GAS||m===t){h=h?F.default(b,l):P(this,v).call(this,s);break}h=h?F.default(b,l):P(this,v).call(this,s)}else await i.stateManager.revert(),j.locked=!1,h=b.removeBest()}else await i.stateManager.revert()}await Promise.all(L),await i.stateManager.commit(),i.removeListener("step",stepListener);const z=e.finalize(d.root,p.root,M,i.stateManager._trie.root,O,u.extraData,T,E);n=z.block;const U=this.emit("block",z);if(!0===_&&await U,s){A(this,r,0n),P(this,k).call(this);break}A(this,r,0n),P(this,B).call(this),0!==b.length?(e=P(this,g).call(this,n),void 0!==P(this,l)&&b.refresh(P(this,l))):P(this,k).call(this)}while(h);return{block:n,transactions:T}})),w.set(this,(async(e,t,s,r)=>{const n={},i=P(this,m);this.emit("ganache:vm:tx:before",{context:n});const stepListener=e=>{P(this,h)&&this.emit("ganache:vm:tx:step",L.makeStepEvent(n,e))};i.on("step",stepListener);try{return await i.runTx({tx:e.toVmTransaction(),block:t})}catch(t){const n=t.message,i=r.get(s);i.removeBest()?F.default(P(this,y),i):P(this,v).call(this,s);const o={execResult:{runState:{programCounter:0},exceptionError:{error:n},returnValue:S.BUFFER_EMPTY}},a=new R.RuntimeError(e.hash,o,R.RETURN_TYPES.TRANSACTION_HASH);return e.finalize("rejected",a),null}finally{i.removeListener("step",stepListener),this.emit("ganache:vm:tx:after",{context:n})}})),v.set(this,(e=>(P(this,n).delete(e),P(this,y).removeBest()))),k.set(this,(()=>{P(this,n).clear(),P(this,y).clear(),A(this,o,!1)})),E.set(this,(()=>{const{pending:e}=P(this,d),t=P(this,n),s=P(this,y);for(let r of e){const e=r[1].peek();if(e&&!e.locked){const r=e.from.toString();t.add(r),e.updateEffectiveGasPrice(P(this,l)),s.push(e),e.locked=!0}}})),B.set(this,(()=>{const{pending:e}=P(this,d),t=P(this,n),s=P(this,y);for(let n of e){const e=n[1].peek();if(e&&!e.locked){const n=e.effectiveGasPrice.toBigInt();if(P(this,r)>n)continue;const i=e.from.toString();if(t.has(i))continue;t.add(i),e.updateEffectiveGasPrice(P(this,l)),s.push(e),e.locked=!0}}})),T.set(this,(e=>{const t=e.header.baseFeePerGas;A(this,l,void 0===t?void 0:S.Quantity.from(t.buf))})),A(this,m,s),A(this,p,e),A(this,d,t),A(this,g,(e=>{const t=O(e);return P(this,T).call(this,t),t})),P(this,y).init([])}async pause(){P(this,a)||(A(this,a,!0),A(this,c,new Promise((e=>{A(this,u,e)})))),P(this,o)&&await this.once("idle")}resume(){P(this,a)&&(A(this,a,!1),P(this,u).call(this))}async mine(e,t=C.FillBlock,s=!1){if(P(this,a)&&await P(this,c),P(this,o))return A(this,i,!0),void P(this,B).call(this);{P(this,T).call(this,e),P(this,E).call(this);const r=await P(this,b).call(this,e,t,s);return this.emit("idle"),r}}toggleStepEvent(e){A(this,h,e)}}t.default=Miner,r=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,y=new WeakMap,b=new WeakMap,_=new WeakMap,w=new WeakMap,v=new WeakMap,k=new WeakMap,E=new WeakMap,B=new WeakMap,T=new WeakMap},785:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function replaceFromHeap(e,t){const s=t.peek();return s?(e.replaceBest(s),s.locked=!0,!0):e.removeBest()}},453:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeStepEvent=void 0;const r=s(1);function normalizeEvent(e){const{account:t,memory:s,opcode:n}=e,i=s.length,o=Buffer.allocUnsafe(104+i);t.stateRoot.copy(o,0,0,32),t.codeHash.copy(o,32,0,32),e.address.buf.copy(o,64,0,20),e.codeAddress.buf.copy(o,84,0,20);const a=o.slice(0,32),c=o.slice(32,64),l=o.slice(64,84),u=o.slice(84,104);let h;return 0!==i?(s.copy(o,104,0,i),h=o.slice(104,104+i)):h=r.BUFFER_ZERO,{account:{nonce:r.Quantity.from(t.nonce.toArrayLike(Buffer)).toBigInt(),balance:r.Quantity.from(t.balance.toArrayLike(Buffer)).toBigInt(),stateRoot:a,codeHash:c},address:l,codeAddress:u,depth:BigInt(e.depth),gasLeft:r.Quantity.from(e.gasLeft.toArrayLike(Buffer)).toBigInt(),gasRefund:r.Quantity.from(e.gasRefund.toArrayLike(Buffer)).toBigInt(),memory:h,memoryWordCount:r.Quantity.from(e.memoryWordCount.toArrayLike(Buffer)).toBigInt(),opcode:{name:n.name,fee:n.fee},pc:BigInt(e.pc),returnStack:e.returnStack.map((e=>e.toArrayLike(Buffer))),stack:e.stack.map((e=>e.toArrayLike(Buffer)))}}t.makeStepEvent=function makeStepEvent(e,t){return{context:e,data:normalizeEvent(t)}}},91:function(e,t,s){"use strict";var r,n,i,o,a,c,l,u,h,d=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},p=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const g=m(s(53)),y=m(s(54)),b=s(1),_=s(99),w=m(s(78)),v=m(s(76)),k=m(s(26)),E=s(110),B=s(23);class EthereumProvider extends g.default.Typed{constructor(e={},t){super(),r.set(this,void 0),n.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),this.removeListener=this.off,c.set(this,((e,t)=>{let s,r,n;if("string"==typeof e)s=e,r=t,n=this.request({method:s,params:r});else{if("function"!=typeof t)throw new Error("No callback provided to provider's send function. As of web3 1.0, provider.send is no longer synchronous and must be passed a callback as its final argument.");if(Array.isArray(e)){const s=t;p(this,u).call(this,e).then((({error:e,result:t})=>{s(e,t)}))}else{const s=t;p(this,h).call(this,e).then((({error:e,result:t})=>{s(e,t)}))}}return n})),l.set(this,((e,t)=>{const s=p(this,r);s.logging.verbose?s.logging.logger.log(`   >  ${e}: ${null==t?t:JSON.stringify(t,null,2).split("\n").join("\n   > ")}`):s.logging.logger.log(e)})),this.disconnect=async()=>{await p(this,a).stop(),this.emit("disconnect")},u.set(this,(e=>Promise.all(e.map(p(this,h))).then((e=>{let t=null;const s=[];return e.forEach((({error:e,result:r},n)=>{s.push(r),e&&(null==t&&(t=new Error("Batch error:")),t.errors[n]=e)})),{error:t,result:s}})))),h.set(this,(async e=>{const t=e.method,s=e.params;try{const r=await this.request({method:t,params:s});return{error:null,result:b.makeResponse(e.id,JSON.parse(JSON.stringify(r)))}}catch(t){let s;return b.hasOwn(t,"result")&&(s=t.result,delete t.result),{error:t,result:b.makeError(e.id,t,s)}}})),d(this,i,t);const s=d(this,r,_.EthereumOptionsConfig.normalize(e)),m=d(this,o,new v.default(s.wallet)),w=m.initialAccounts,T=s.fork.url||s.fork.provider?new E.Fork(s,w):null,A=function parseCoinbase(e,t){switch(typeof e){case"object":return e;case"number":const s=t[e];if(s)return s.address;throw new Error(`invalid coinbase address index: ${e}`);case"string":return B.Address.from(e);default:throw new Error(`coinbase address must be string or number, received: ${e}`)}}(s.miner.coinbase,w),P=new k.default(s,A,T);d(this,a,P),P.on("ganache:vm:tx:before",(e=>{this.emit("ganache:vm:tx:before",e)})),P.on("ganache:vm:tx:step",(e=>{this.emit("ganache:vm:tx:step",e)})),P.on("ganache:vm:tx:after",(e=>{this.emit("ganache:vm:tx:after",e)})),function hookEventSystem(e,t){let s=0;e.on(g.default.listenerAdded,(({eventName:e})=>{"ganache:vm:tx:step"!==e&&void 0!==e||(0===s&&t(!0),s++)})),e.on(g.default.listenerRemoved,(({eventName:e})=>{"ganache:vm:tx:step"!==e&&void 0!==e||(s--,0===s&&t(!1))}))}(this,(e=>{P.toggleStepEvent(e)})),d(this,n,new y.default(s,m,P))}async initialize(){await p(this,a).initialize(p(this,o).initialAccounts),this.emit("connect")}getOptions(){return w.default(p(this,r))}getInitialAccounts(){const e={},t=p(this,o),s=p(this,o).unlockedAccounts;return t.initialAccounts.forEach((t=>{const r=t.address.toString();e[r]={secretKey:t.privateKey.toString(),balance:t.balance.toBigInt(),unlocked:s.has(r)}})),e}send(e,t){return p(this,c).call(this,e,t)}sendAsync(e,t){p(this,c).call(this,e,t)}async request(e){const t=await this._requestRaw(e),s=await t.value;return JSON.parse(JSON.stringify(s))}async _requestRaw({method:e,params:t}){p(this,l).call(this,e,t);const s=(await p(this,i).execute(p(this,n),e,t)).value;s instanceof b.PromiEvent&&s.on("message",(e=>{this.emit("message",e),this.emit("data",{jsonrpc:"2.0",method:"eth_subscription",params:e.data})}));return{value:s.catch((e=>{throw p(this,r).chain.vmErrorsOnRPCResponse&&b.hasOwn(e,"result")&&(e.result=JSON.parse(JSON.stringify(e.result))),e}))}}}t.default=EthereumProvider,r=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,h=new WeakMap},88:function(e,t,s){"use strict";var r,n,i,o,a,c,l=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},u=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TriageOption=void 0;const d=h(s(53)),p=s(1),m=s(1),g=s(5);function shouldReplace(e,t,s,r){if(e.nonce.toBigInt()!==t)return!1;const n=e.effectiveGasPrice.toBigInt(),i=n+n*r/100n;if(!e.locked&&s>i)return!0;throw new g.CodedError(g.UNDERPRICED,m.JsonRpcErrorCode.TRANSACTION_REJECTED)}function byNonce(e,t,s){return(e[s].nonce.toBigInt()||0n)>(e[t].nonce.toBigInt()||0n)}var y;!function(e){e[e.FutureQueue=0]="FutureQueue",e[e.Executable=1]="Executable",e[e.ReplacesPendingExecutable=2]="ReplacesPendingExecutable",e[e.ReplacesFutureTransaction=3]="ReplacesFutureTransaction"}(y=t.TriageOption||(t.TriageOption={}));class TransactionPool extends d.default.Typed{constructor(e,t,s=new Map){super(),r.set(this,void 0),n.set(this,10n),i.set(this,void 0),this.executables={inProgress:new Set,pending:new Map},o.set(this,void 0),a.set(this,new Map),this.drain=()=>{this.emit("drain")},c.set(this,(e=>{if(e.gas>u(this,r).blockGasLimit)return new g.CodedError(g.GAS_LIMIT,m.JsonRpcErrorCode.INVALID_INPUT);const t=e.calculateIntrinsicGas();return-1n===t||e.gas.toBigInt()<t?new g.CodedError(g.INTRINSIC_GAS_TOO_LOW,m.JsonRpcErrorCode.INVALID_INPUT):null})),l(this,i,t),l(this,r,e),l(this,o,s)}async prepareTransaction(e,t){let s;if(s=u(this,c).call(this,e),null!=s)throw s;const r=e.from;let l;e.nonce.isNull()||(l=e.nonce.toBigInt());const h=r.toString();let d=u(this,a).get(h);if(d&&await d,!e.effectiveGasPrice&&u(this,i).common.isActivatedEIP(1559)){const t=u(this,i).blocks.latest.header.baseFeePerGas;e.updateEffectiveGasPrice(t)}let b=0n;const _=u(this,o),w=_.get(h);let v=y.FutureQueue;const k=this.executables.pending;let E=k.get(h);const B=u(this,n),T=e.effectiveGasPrice.toBigInt();let A;if(E&&(A=E.length)){const t=E.array;for(let s=0;s<A;s++){const r=t[s];if(shouldReplace(r,l,T,B)){t[s]=e,v=y.ReplacesPendingExecutable,r.finalize("rejected",new g.CodedError(g.REPLACED,m.JsonRpcErrorCode.TRANSACTION_REJECTED));break}const n=r.nonce.toBigInt();n>b&&(b=n)}void 0===l?(l=b+1n,e.nonce=m.Quantity.from(l),v=y.Executable):l===b+1n&&(v=y.Executable)}else{d||(d=u(this,i).accounts.getNonce(r),u(this,a).set(h,d),d.then((()=>{u(this,a).delete(h)})));const t=await d,s=t?t.toBigInt():0n;if(void 0===l)l=s||0n,e.nonce=m.Quantity.from(l),v=y.Executable;else{if(l<s)throw new Error(`the tx doesn't have the correct nonce. account has nonce of: ${s} tx has nonce of: ${l}`);l===s&&(v=y.Executable)}}if(w&&v!==y.Executable&&v!==y.ReplacesPendingExecutable&&(A=w.length)){const t=w.array;for(let s=0;s<A;s++){const r=t[s];if(shouldReplace(r,l,T,B)){t[s]=e,v=y.ReplacesFutureTransaction,r.finalize("rejected",new g.CodedError(g.REPLACED,m.JsonRpcErrorCode.TRANSACTION_REJECTED));break}}}if(t)e.signAndHash(t.toBuffer());else if(null==e.v){const t=e.from.toBuffer();let s;t.equals(m.ACCOUNT_ZERO)?(s=Buffer.allocUnsafe(32).fill(0,0,31),s[31]=1):s=Buffer.concat([t,t.slice(0,12)]),e.signAndHash(s)}switch(v){case y.Executable:if(E?E.push(e):(E=p.Heap.from(e,byNonce),k.set(h,E)),w){let e=l+1n;for(;;){const t=w.peek();if((t.nonce.toBigInt()||0n)!==e)break;if(E.push(t),!w.removeBest()){_.delete(h);break}e+=1n}}return!0;case y.FutureQueue:return w?w.push(e):_.set(h,p.Heap.from(e,byNonce)),!1;case y.ReplacesPendingExecutable:return!0;case y.ReplacesFutureTransaction:return!1}}clear(){u(this,o).clear(),u(this,a).clear(),this.executables.pending.clear()}find(e){const{pending:t,inProgress:s}=this.executables;for(let[t,s]of u(this,o)){if(void 0===s)continue;const t=s.array;for(let r=0;r<s.length;r++){const s=t[r];if(s.hash.toBuffer().equals(e))return s}}for(let[s,r]of t){const t=r.array;for(let s=0;s<r.length;s++){const r=t[s];if(r.hash.toBuffer().equals(e))return r}}for(let t of s)if(t.hash.toBuffer().equals(e))return t;return null}}t.default=TransactionPool,r=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap},76:function(e,t,s){"use strict";var r,n,i,o,a=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},c=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=s(5),h=s(261),d=s(1),p=s(0),m=l(s(145)),g=s(427),y=s(137),b=l(s(20)),_=l(s(165)),w=s(15),v=s(23),k={dklen:32,n:1024,p:8,r:1},E="aes-128-ctr",scrypt=(...e)=>new Promise(((t,s)=>{b.default.scrypt.call(b.default,...e,((e,r)=>{if(!e)return t(r);s(e)}))})),B=Buffer.allocUnsafe(65),uncompressedPublicKeyToAddress=e=>{switch(m.default.publicKeyConvert(B,e)){case 0:return v.Address.from(d.keccak(B.slice(1)).slice(-20));case 1:throw new Error("Public Key could not be parsed");case 2:throw new Error("Public Key serialization error")}},asUUID=e=>`${e.toString("hex",0,4)}-${e.toString("hex",4,6)}-${e.toString("hex",6,8)}-${e.toString("hex",8,10)}-${e.toString("hex",10)}`;class Wallet{constructor(e){this.knownAccounts=new Set,this.encryptedKeyFiles=new Map,this.unlockedAccounts=new Map,this.lockTimers=new Map,r.set(this,void 0),n.set(this,(e=>{const t=Buffer.allocUnsafe(e),s=c(this,r);for(let r=0;r<e;r++)t[r]=256*s()|0;return t})),i.set(this,(e=>{let t;try{t=h.createAccountGeneratorFromSeedAndPath(g.mnemonicToSeedSync(e.mnemonic,null),e.hdPath)}catch(e){console.log(e)}const s=e.defaultBalance.toString().split(".",2),r=BigInt(s[0]),n=s[1]||"0",i=BigInt(n),o=10n**BigInt(n.length),a=d.WEI*r+i*(d.WEI/o),c=d.Quantity.from(a);let l,u,p=e.accounts;if(p&&0!==(u=p.length)){l=Array(u);for(let e=0;e<u;e++){const s=p[e],r=s.secretKey;let n,i;if(r){n=d.Data.from(r);(l[e]=Wallet.createAccountFromPrivateKey(n)).balance=d.Quantity.from(s.balance)}else{const s=t(e);i=uncompressedPublicKeyToAddress(s.publicKey),n=d.Data.from(s.privateKey),l[e]=Wallet.createAccount(d.Quantity.from(s.balance),n,i)}}}else{const s=e.totalAccounts;if(null!=s){l=Array(s);for(let e=0;e<s;e++){const s=t(e),r=uncompressedPublicKeyToAddress(s.publicKey),n=d.Data.from(s.privateKey);l[e]=Wallet.createAccount(c,n,r)}}}return l})),o.set(this,(e=>(this.lockTimers.delete(e),this.unlockedAccounts.delete(e),!0))),a(this,r,y.alea("ganache "+e.mnemonic));const t=this.initialAccounts=c(this,i).call(this,e),s=t.length,l=this.knownAccounts,u=this.unlockedAccounts,p=e.unlockedAccounts;if(p){const e=p.length;for(let r=0;r<e;r++){let e,n=p[r];switch(typeof n){case"string":const r=n.toLowerCase();if(0===r.indexOf("0x")){e=r;break}{const e=n-0;if(!Number.isSafeInteger(e))throw new Error(`Invalid value in wallet.unlockedAccounts: ${n}`);n=e}case"number":const i=t[n];if(null==i)throw new Error(`Account at index ${n} not found. Max index available is ${s-1}.`);e=i.address.toString().toLowerCase();break;default:throw new Error("Invalid value specified in unlocked_accounts")}u.has(e)||u.set(e,null)}}const m=this.addresses=Array(s);for(let r=0;r<s;r++){const s=t[r],n=s.address.toString();m[r]=n,l.add(n),e.secure&&!u.has(n)||u.set(n,s.privateKey)}if(null!=e.accountKeysPath){const t={addresses:{},private_keys:{}};u.forEach(((e,s)=>{t.addresses[s]=s,t.private_keys[s]=e})),w.writeFileSync(e.accountKeysPath,JSON.stringify(t))}}async encrypt(e,t){const s=c(this,n).call(this,64),r=s.slice(0,32),i=s.slice(32,48),o=s.slice(48),a=await scrypt(t,r,k.dklen,{...k,N:k.n}),l=b.default.createCipheriv(E,a.slice(0,16),i),u=Buffer.concat([l.update(e.toBuffer()),l.final()]),h=_.default("keccak256").update(Buffer.concat([a.slice(16,32),u])).digest();return{crypto:{cipher:E,ciphertext:d.Data.from(u),cipherparams:{iv:d.Data.from(i)},kdf:"scrypt",kdfParams:{...k,salt:d.Data.from(r)},mac:d.Data.from(h)},id:asUUID(o),version:3}}async decrypt(e,t){const s=e.crypto;if(s.cipher!==E)throw new Error(`keyfile cypher must be "${E}"`);if("scrypt"!==s.kdf)throw new Error('keyfile kdf must be "script"');const r=s.kdfParams,n=r.salt,i=s.mac,o=s.ciphertext.toBuffer();let a,c;if(null!=t)try{a=await scrypt(t,n.toBuffer(),r.dklen,{...r,N:r.n}),c=_.default("keccak256").update(Buffer.concat([a.slice(16,32),o])).digest()}catch{c=null}if(!c||!i.toBuffer().equals(c))throw new Error("could not decrypt key with given password");return b.default.createDecipheriv(s.cipher,a.slice(0,16),s.cipherparams.iv.toBuffer()).update(o)}static createAccount(e,t,s){const r=new u.Account(s);return r.privateKey=t,r.balance=e,r}static createAccountFromPrivateKey(e){const t=v.Address.from(p.privateToAddress(e.toBuffer())),s=new u.Account(t);return s.privateKey=e,s}createRandomAccount(){const e=c(this,n).call(this,128),t=h.createAccountFromSeed(e),s=uncompressedPublicKeyToAddress(t.publicKey),r=d.Data.from(t.privateKey);return Wallet.createAccount(d.RPCQUANTITY_ZERO,r,s)}async unlockAccount(e,t,s){const r=this.encryptedKeyFiles.get(e);if(null==r)return!1;const n=await this.decrypt(r,t),i=this.lockTimers.get(e);i&&clearTimeout(i);const a=1e3*s|0;if(a>0){const t=setTimeout(c(this,o),a,e);d.unref(t),this.lockTimers.set(e,t)}return this.unlockedAccounts.set(e,d.Data.from(n)),!0}async unlockUnknownAccount(e,t){if(this.unlockedAccounts.has(e))return!1;if(this.knownAccounts.has(e))throw new Error("cannot unlock known/personal account");const s=1e3*t|0;if(s>0){const t=setTimeout(c(this,o),s,e);d.unref(t),this.lockTimers.set(e,t)}return this.unlockedAccounts.set(e,null),!0}lockAccount(e){return!!this.unlockedAccounts.has(e)&&(clearTimeout(this.lockTimers.get(e)),c(this,o).call(this,e))}}t.default=Wallet,r=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap},99:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(s(33),t)},454:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChainOptions=void 0;const r=s(100);t.ChainOptions={allowUnlimitedContractSize:{normalize:r.normalize,cliDescription:"Allows unlimited contract sizes while debugging. Setting this to `true` will cause ganache to behave differently than production environments.",default:()=>!1,legacyName:"allowUnlimitedContractSize",cliType:"boolean"},asyncRequestProcessing:{normalize:r.normalize,cliDescription:"When set to `false` only one request will be processed at a time.",default:()=>!0,legacyName:"asyncRequestProcessing",cliType:"boolean"},chainId:{normalize:r.normalize,cliDescription:"The currently configured chain id.",default:()=>1337,legacyName:"chainId",cliType:"number"},networkId:{normalize:r.normalize,cliDescription:"The id of the network returned by the RPC method `net_version`.",default:()=>Date.now(),defaultDescription:"System time at process start or Network ID of forked blockchain if configured.",legacyName:"network_id",cliAliases:["i","networkId"],cliType:"number"},time:{normalize:e=>"string"==typeof e?new Date(e):e,cliDescription:"Date that the first block should start.",legacyName:"time",cliAliases:["t","time"],cliType:"number"},hardfork:{normalize:r.normalize,cliDescription:"Set the hardfork rules for the EVM.",default:()=>"london",legacyName:"hardfork",cliAliases:["k","hardfork"],cliType:"string",cliChoices:["constantinople","byzantium","petersburg","istanbul","muirGlacier","berlin","london"]},vmErrorsOnRPCResponse:{normalize:r.normalize,cliDescription:"Whether to report runtime errors from EVM code as RPC errors.",default:()=>!1,legacyName:"vmErrorsOnRPCResponse",cliType:"boolean"}}},455:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseOptions=void 0;const r=s(100);t.DatabaseOptions={db:{normalize:r.normalize,cliDescription:"Specify an alternative database instance, like MemDOWN",disableInCLI:!0,legacyName:"db",conflicts:["dbPath"]},dbPath:{normalize:r.normalize,cliDescription:"Specify a path to a directory to save the chain database.",legacyName:"db_path",cliAliases:["db","db_path"],cliType:"string",conflicts:["db"]}}},458:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForkOptions=void 0;const r=s(100),n=s(5),i=s(193),{version:o}={version:"7.0.0-alpha.1"},a=Math.floor(Number.MAX_SAFE_INTEGER/2),c=/:\s?(?:.+)/;function coerceHeaders(e,t){const[s,r]=t.split(c);return e.push({name:s,value:r}),e}const l=["ws:","wss:","http:","https:"];t.ForkOptions={url:{normalize:e=>{if("string"!=typeof e)return;let t=new i.URL(e);const s=t.pathname+t.search,r=s.lastIndexOf("@");if(-1!==r){t=new i.URL(s.substr(0,r),t);const e=s.substr(r+1);if(e&&e!==n.Tag.LATEST){const s=e-0;isNaN(s)||s<0||(0|s)!==s||s>a?console.warn(`Ignoring invalid block number in fork url: "${e}". Block number must be an integer from [0 - ${a}].`):t._blockNumber=s}if(!l.includes(t.protocol))throw new Error(`Invalid protocol for fork url: ${t.protocol}. Supported protocols are: ${((e,t="and")=>{const s=e.pop();switch(e.length){case 0:return"";case 1:return s;case 2:return e[0]+` ${t} `+s;default:return e.join(", ")+`, ${t} `+s}})(l)}.`)}return t},cliDescription:'Fork from another currently running Ethereum client at a given block. Input should be the URL of the node, e.g. `"http://localhost:1337"`. You can optionally specify the block to fork from using an @ sign: `"http://localhost:1337@8675309"`.\n\nYou can specify Basic Authentication credentials in the URL as well. e.g., `"wss://user:password@example.com/"`. If you need to use an Infura Project Secret, you would use it like this: `"wss://:{YOUR-PROJECT-SECRET}@mainnet.infura.com/..."`\n\nAlternatively, you can use the `fork.username` and `fork.password` options.',legacyName:"fork",cliAliases:["f","fork"]},provider:{normalize:e=>{if("string"!=typeof e)return e},cliDescription:"Specify an EIP-1193 provider to use instead of a url.",disableInCLI:!0,legacyName:"fork"},blockNumber:{normalize:r.normalize,cliDescription:"Block number the provider should fork from.",legacyName:"fork_block_number",default:({url:e,provider:t})=>e?e._blockNumber?e._blockNumber:n.Tag.LATEST:t?n.Tag.LATEST:void 0,defaultDescription:"Latest block number"},preLatestConfirmations:{normalize:r.normalize,cliDescription:'When the `fork.blockNumber` is set to "latest" (default), the number of blocks before the remote node\'s "latest" block to fork from.',default:()=>5,defaultDescription:"5",cliType:"number"},username:{normalize:r.normalize,cliDescription:'* Username to use for Basic Authentication. Does not require setting `fork.password`.\n    \nWhen combined with `fork.password`, is shorthand for `fork: { headers: { "Authorization": "Basic {ENCODED-BASIC-HEADER}" } }`\n\nIf the `fork.headers` option specifies an "Authorization" header, it will be be inserted _after_ this Basic token.',default:({url:e})=>{if(e&&e.username)return e.username},defaultDescription:""},password:{normalize:r.normalize,cliDescription:'Password to use for Basic Authentication. Does not require setting `fork.username`.\n\nWhen combined with `fork.username`, is shorthand for `fork: { headers: { "Authorization": "Basic {ENCODED-BASIC-HEADER}" } }`\n\nIf the `fork.headers` option specifies an "Authorization" header, it will be be inserted _after_ this Basic token.',default:({url:e})=>{if(e&&e.password)return e.password},defaultDescription:""},jwt:{normalize:r.normalize,cliDescription:'_Encoded_ JSON Web Token (JWT) used for authenticating to some servers.\n\nShorthand for `fork: { headers: { "Authorization": "Bearer {YOUR-ENCODED-JWT}" } }`\n\n If the `fork.headers` option specifies an "Authorization" header, it will be be inserted _after_ the JWT Bearer token.'},userAgent:{normalize:r.normalize,cliDescription:'The User-Agent header sent to the fork on each request.\n\nSent as Api-User-Agent when used in the browser.\n \nWill be overridden by a `"User-Agent"` defined in the `fork.headers` option, if provided.',default:()=>`Ganache/${o} (https://www.trufflesuite.com/ganache; ganache<at>trufflesuite.com)`},origin:{normalize:r.normalize,cliDescription:'The Origin header sent to the fork on each request.\n\nIgnored in the browser.\n\nWill be overridden by an `"Origin"` value defined in the `fork.headers` option, if provided.'},headers:{normalize:r.normalize,cliDescription:'Headers to supply on each request to the forked provider.\n\nHeaders set here override headers set by other options, unless otherwise specified.\n\nDefaults to: `["User-Agent: Ganache/VERSION (https://www.trufflesuite.com/ganache; ganache<at>trufflesuite.com)"]`',cliType:"array:string",implies:["url"],cliCoerce:e=>e.reduce(coerceHeaders,[])},requestsPerSecond:{normalize(e){if(e<0)throw new Error(`fork.requestsPerSecond is invalid: "${e}"; must be a positive number`);return e},default:()=>0,cliDescription:"Restrict the number of requests per second sent to the fork provider. `0` means no limit is applied.",cliType:"number"},disableCache:{normalize:r.normalize,default:()=>!1,cliDescription:"Disables caching of all forking requests.",cliType:"boolean"},deleteCache:{normalize:r.normalize,default:()=>!1,cliDescription:"Deletes the persistent cache before starting.",cliType:"boolean"}}},100:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=void 0;t.normalize=e=>e},33:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumOptionsConfig=t.EthereumDefaults=void 0;const i=s(454),o=s(455),a=s(456),c=s(457),l=s(192),u=s(458),h=s(24);t.EthereumDefaults={chain:i.ChainOptions,database:o.DatabaseOptions,logging:a.LoggingOptions,miner:c.MinerOptions,wallet:l.WalletOptions,fork:u.ForkOptions},t.EthereumOptionsConfig=new h.OptionsConfig(t.EthereumDefaults),n(s(454),t),n(s(455),t),n(s(100),t),n(s(456),t),n(s(457),t),n(s(192),t),n(s(458),t)},456:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingOptions=void 0;const r=s(100),n={log:console.log};t.LoggingOptions={debug:{normalize:r.normalize,cliDescription:"Set to `true` to log EVM opcodes.",default:()=>!1,legacyName:"debug",cliType:"boolean"},logger:{normalize:r.normalize,cliDescription:"An object, like `console`, that implements a `log` function.",disableInCLI:!0,default:()=>n,legacyName:"logger"},verbose:{normalize:r.normalize,cliDescription:"Set to `true` to log all RPC requests and responses.",default:()=>!1,legacyName:"verbose",cliAliases:["v","verbose"],cliType:"boolean"},quiet:{normalize:r.normalize,cliDescription:"Set to `true` to disable logging.",default:()=>!1,cliAliases:["q","quiet"],cliType:"boolean"}}},457:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MinerOptions=void 0;const r=s(100),n=s(1),i=s(23),toBigIntOrString=e=>e.startsWith("0x")?e:BigInt(e);t.MinerOptions={blockTime:{normalize:e=>{if(e<0)throw new Error("miner.blockTime must be 0 or a positive number.");return e},cliDescription:'Sets the `blockTime` in seconds for automatic mining. A blockTime of `0` enables "instamine mode", where new executable transactions will be mined instantly.',default:()=>0,legacyName:"blockTime",cliAliases:["b","blockTime"],cliType:"number"},defaultGasPrice:{normalize:n.Quantity.from,cliDescription:"Sets the default gas price in WEI for transactions if not otherwise specified.",default:()=>n.Quantity.from(2e9),legacyName:"gasPrice",cliAliases:["g","gasPrice"],cliType:"string",cliCoerce:toBigIntOrString},blockGasLimit:{normalize:n.Quantity.from,cliDescription:"Sets the block gas limit in WEI.",default:()=>n.Quantity.from(12e6),legacyName:"gasLimit",cliAliases:["l","gasLimit"],cliType:"string",cliCoerce:toBigIntOrString},defaultTransactionGasLimit:{normalize:e=>"estimate"===e?n.RPCQUANTITY_EMPTY:n.Quantity.from(e),cliDescription:'Sets the default transaction gas limit in WEI. Set to "estimate" to use an estimate (slows down transaction execution by 40%+).',default:()=>n.Quantity.from(9e4),cliType:"string",cliCoerce:toBigIntOrString},difficulty:{normalize:n.Quantity.from,cliDescription:"Sets the block difficulty.",default:()=>n.RPCQUANTITY_ONE,cliType:"string",cliCoerce:toBigIntOrString},callGasLimit:{normalize:n.Quantity.from,cliDescription:"Sets the transaction gas limit in WEI for `eth_call` and `eth_estimateGas` calls.",default:()=>n.Quantity.from(Number.MAX_SAFE_INTEGER),legacyName:"callGasLimit",cliType:"string",cliCoerce:toBigIntOrString},legacyInstamine:{normalize:r.normalize,cliDescription:"Enables legacy instamine mode, where transactions are fully mined before the transaction's hash is returned to the caller.",default:()=>!1,legacyName:"legacyInstamine",cliType:"boolean"},coinbase:{normalize:e=>"number"==typeof e?e:i.Address.from(e),cliDescription:"Sets the address where mining rewards will go.",default:()=>i.Address.from(n.ACCOUNT_ZERO)},extraData:{normalize:e=>{const t=n.Data.from(e);if(t.toBuffer().length>32)throw new Error(`extra exceeds max length. ${t.toBuffer().length} > 32`);return t},cliDescription:"Set the extraData block header field a miner can include.",default:()=>n.DATA_EMPTY,cliType:"string"}}},192:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletOptions=void 0;const n=s(100),i=r(s(137)),o=s(427),a=s(24),c=i.default();const l=(()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;return(s,r)=>{let n="";for(let i=0;i<s;i++)n+=e[r()*t|0];return n}})();t.WalletOptions={accounts:{normalize:n.normalize,cliDescription:"Account data in the form `<private_key>,<initial_balance>`, can be specified multiple times. Note that private keys are 64 characters long and must be entered as an 0x-prefixed hex string. Balance can either be input as an integer, or as a 0x-prefixed hex string with either form specifying the initial balance in wei.",legacyName:"accounts",cliAliases:["account"],cliType:"array:string",cliCoerce:e=>e.map((e=>{const[t,s]=e.split(/,(.+)/);return{secretKey:t,balance:BigInt(s)}})),conflicts:["totalAccounts"]},totalAccounts:{normalize:n.normalize,cliDescription:"Number of accounts to generate at startup.",default:e=>null==e.accounts?10:0,legacyName:"total_accounts",cliAliases:["a","accounts"],cliType:"number",conflicts:["accounts"]},deterministic:{normalize:n.normalize,cliDescription:"Use pre-defined, deterministic seed.",default:()=>!1,cliAliases:["d","deterministic"],cliType:"boolean",conflicts:["mnemonic","seed"]},seed:{normalize:n.normalize,cliDescription:"Seed to use to generate a mnemonic.",default:e=>!0===e.deterministic?a.DeterministicSeedPhrase:l(10,c),defaultDescription:"Random value, unless wallet.deterministic is specified",legacyName:"seed",cliAliases:["s","seed"],cliType:"string",conflicts:["mnemonic","deterministic"]},mnemonic:{normalize:n.normalize,cliDescription:"Use a specific HD wallet mnemonic to generate initial addresses.",default:e=>o.entropyToMnemonic(function notVeryRandomBytes(e,t){const s=Buffer.allocUnsafe(e);for(let r=0;r<e;r++)s[r]=255*t()|0;return s}(16,i.default(e.seed))),defaultDescription:"Generated from wallet.seed",legacyName:"mnemonic",cliAliases:["m","mnemonic"],cliType:"string",conflicts:["seed","deterministic"]},unlockedAccounts:{normalize:n.normalize,cliDescription:"Array of addresses or address indexes specifying which accounts should be unlocked.",legacyName:"unlocked_accounts",cliAliases:["u","unlock"],cliType:"array:string"},secure:{normalize:n.normalize,cliDescription:"Lock available accounts by default (good for third party transaction signing).",default:()=>!1,legacyName:"secure",cliAliases:["n","secure"],cliType:"boolean"},accountKeysPath:{normalize:n.normalize,cliDescription:"Specifies a file to save accounts and private keys to, for testing.",legacyName:"account_keys_path",cliAliases:["account_keys_path","acctKeys"],cliType:"string"},defaultBalance:{normalize:n.normalize,cliDescription:"The default account balance, specified in ether.",default:()=>1e3,legacyName:"default_balance_ether",cliAliases:["e","defaultBalanceEther"],cliType:"number"},hdPath:{normalize:e=>e.split("/"),cliDescription:"The hierarchical deterministic path to use when generating accounts.",default:()=>["m","44'","60'","0'","0"],legacyName:"hd_path",cliType:"string"}}},8:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(s(174),t),n(s(175),t),n(s(256),t),n(s(754),t),n(s(420),t),n(s(257),t),n(s(755),t),n(s(756),t),n(s(73),t),n(s(117),t),n(s(421),t),n(s(757),t),n(s(758),t)},415:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessLists=void 0;const r=s(46),n=s(1),i=s(257);t.AccessLists=class AccessLists{static getAccessListData(e){let t,s,o=0;const a=i.Params.ACCESS_LIST_STORAGE_KEY_GAS,c=i.Params.ACCESS_LIST_ADDRESS_GAS;if(e&&r.isAccessList(e)){t=e;const r=[];for(let t=0;t<e.length;t++){const s=e[t],i=n.Data.from(s.address,32).toBuffer(),a=[],c=s.storageKeys.length;o+=c;for(let e=0;e<c;e++)a.push(n.Data.from(s.storageKeys[e]).toBuffer());r.push([i,a])}s=r}else{s=e||[];const r=[];for(let e=0;e<s.length;e++){const t=s[e],i=n.Data.from(t[0],32).toString(),a=[],c=t[1].length;o+=c;for(let e=0;e<c;e++)a.push(n.Data.from(t[1][e],32).toString());const l={address:i,storageKeys:a};r.push(l)}t=r}return{AccessListJSON:t,accessList:s,dataFeeEIP2930:BigInt(s.length*c+o*a)}}}},256:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTransaction=t.calculateIntrinsicGas=void 0;const r=s(1),n=s(23),i=s(257),o=1n<<64n-1n;t.calculateIntrinsicGas=(e,t,s)=>{const r=s.hardfork();let n=i.Params.TRANSACTION_GAS;if(t||(n+=i.Params.TRANSACTION_CREATION),e){const t=e.toBuffer(),s=t.byteLength;if(s>0){const e=i.Params.TRANSACTION_DATA_NON_ZERO_GAS.get(r),a=i.Params.TRANSACTION_DATA_ZERO_GAS;let c=0n;for(const e of t)0!==e&&c++;if((o-n)/e<c)return-1n;n+=c*e;const l=BigInt(s)-c;if((o-n)/a<l)return-1n;n+=l*a}}return n};t.BaseTransaction=class BaseTransaction{constructor(e,t){this.common=e,t&&this.setExtra(t)}setExtra(e){const[t,s,i,o,a,c]=e;this.from=n.Address.from(t),this.hash=r.Data.from(s,32),this.blockHash=r.Data.from(i,32),this.blockNumber=r.Quantity.from(o),this.index=r.Quantity.from(a),this.effectiveGasPrice=r.Quantity.from(c)}calculateIntrinsicGas(){const e=null!=this.to&&!this.to.toBuffer().equals(r.BUFFER_EMPTY);return t.calculateIntrinsicGas(this.data,e,this.common)}}},175:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EIP1559FeeMarketTransaction=void 0;const n=s(1),i=s(23),o=s(0),a=s(19),c=s(73),l=s(415),u=s(40),h=r(s(145)),d=s(5);const p=[2718,2930,1559];class EIP1559FeeMarketTransaction extends c.RuntimeTransaction{constructor(e,t,s){if(super(e,t,s),this.type=n.Quantity.from("0x2"),Array.isArray(e)){this.chainId=n.Quantity.from(e[0]),this.nonce=n.Quantity.from(e[1]),this.maxPriorityFeePerGas=n.Quantity.from(e[2]),this.maxFeePerGas=n.Quantity.from(e[3]),this.gas=n.Quantity.from(e[4]),this.to=0==e[5].length?n.RPCQUANTITY_EMPTY:i.Address.from(e[5]),this.value=n.Quantity.from(e[6]),this.data=n.Data.from(e[7]);const r=l.AccessLists.getAccessListData(e[8]);if(this.accessList=r.accessList,this.accessListJSON=r.AccessListJSON,this.v=n.Quantity.from(e[9]),this.r=n.Quantity.from(e[10]),this.s=n.Quantity.from(e[11]),this.raw=[this.type.toBuffer(),...e],!s){if(t.chainId()!==this.chainId.toNumber())throw new d.CodedError(`Invalid chain id (${this.chainId.toNumber()}) for chain with id ${t.chainId()}.`,n.JsonRpcErrorCode.INVALID_INPUT);const{from:e,serialized:s,hash:r,encodedData:i,encodedSignature:o}=this.computeIntrinsics(this.v,this.raw);this.from=e,this.serialized=s,this.hash=r,this.encodedData=i,this.encodedSignature=o}}else{if(e.chainId){if(this.chainId=n.Quantity.from(e.chainId),this.common.chainId()!==this.chainId.toNumber())throw new d.CodedError(`Invalid chain id (${this.chainId.toNumber()}) for chain with id ${t.chainId()}.`,n.JsonRpcErrorCode.INVALID_INPUT)}else this.chainId=n.Quantity.from(t.chainIdBN().toArrayLike(Buffer));this.maxPriorityFeePerGas=n.Quantity.from(e.maxPriorityFeePerGas),this.maxFeePerGas=n.Quantity.from(e.maxFeePerGas);const s=l.AccessLists.getAccessListData(e.accessList);this.accessList=s.accessList,this.accessListJSON=s.AccessListJSON,this.validateAndSetSignature(e)}}toJSON(e){return{type:this.type,hash:this.hash,chainId:this.chainId,nonce:this.nonce,blockHash:this.blockHash?this.blockHash:null,blockNumber:this.blockNumber?this.blockNumber:null,transactionIndex:this.index?this.index:null,from:this.from,to:this.to.isNull()?null:this.to,value:this.value,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasPrice:this.effectiveGasPrice,gas:this.gas,input:this.data,accessList:this.accessListJSON,v:this.v,r:this.r,s:this.s}}static fromTxData(e,t,s){return new EIP1559FeeMarketTransaction(e,t,s)}toVmTransaction(){const e=this.from.toBuffer(),t=this.to.toBuffer(),s=this.data.toBuffer();return{hash:()=>n.BUFFER_32_ZERO,nonce:new o.BN(this.nonce.toBuffer()),maxPriorityFeePerGas:new o.BN(this.maxPriorityFeePerGas.toBuffer()),maxFeePerGas:new o.BN(this.maxFeePerGas.toBuffer()),gasLimit:new o.BN(this.gas.toBuffer()),to:0===t.length?null:{buf:t,equals:e=>t.equals(e.buf)},value:new o.BN(this.value.toBuffer()),data:s,AccessListJSON:this.accessListJSON,getSenderAddress:()=>({buf:e,equals:t=>e.equals(t.buf)}),getBaseFee:()=>{const e=this.calculateIntrinsicGas();return new o.BN(n.Quantity.from(e).toBuffer())},getUpfrontCost:(e=new o.BN(0))=>{const{gas:t,maxPriorityFeePerGas:s,maxFeePerGas:r,value:n}=this,i=new o.BN(s.toBuffer()),a=new o.BN(r.toBuffer()),c=new o.BN(t.toBuffer()),l=new o.BN(n.toBuffer()),u=o.BN.min(i,a.sub(e)).add(e);return c.mul(u).add(l)},supports:e=>p.includes(e)}}signAndHash(e){if(null!=this.v)throw new Error("Internal Error: RuntimeTransaction `sign` called but transaction has already been signed");const t=this.type.toBuffer(),s=this.toEthRawTransaction(n.BUFFER_ZERO,n.BUFFER_ZERO,n.BUFFER_ZERO),r=a.encodeRange(s,1,9),i=r.length,o=function ecsign(e,t){const s={signature:new Uint8Array(64),recid:null};if(0===h.default.ecdsaSign(s,e,t)){const e=s.signature.buffer;return{r:Buffer.from(e,0,32),s:Buffer.from(e,32,32),v:s.recid}}throw new Error("The nonce generation function failed, or the private key was invalid")}(n.keccak(Buffer.concat([t,a.digest([r.output],i)])),e);this.v=n.Quantity.from(o.v),this.r=n.Quantity.from(o.r),this.s=n.Quantity.from(o.s),s[10]=this.v.toBuffer(),s[11]=this.r.toBuffer(),s[12]=this.s.toBuffer(),this.raw=s;const c=a.encodeRange(s,10,3);this.serialized=Buffer.concat([t,a.digest([r.output,c.output],i+c.length)]),this.hash=n.Data.from(n.keccak(this.serialized)),this.encodedData=r,this.encodedSignature=c}toEthRawTransaction(e,t,s){return[this.type.toBuffer(),this.chainId.toBuffer(),this.nonce.toBuffer(),this.maxPriorityFeePerGas.toBuffer(),this.maxFeePerGas.toBuffer(),this.gas.toBuffer(),this.to.toBuffer(),this.value.toBuffer(),this.data.toBuffer(),this.accessList,e,t,s]}computeIntrinsics(e,t){return u.computeIntrinsicsFeeMarketTx(e,t)}updateEffectiveGasPrice(e){const t=e.toBigInt(),s=this.maxFeePerGas.toBigInt(),r=this.maxPriorityFeePerGas.toBigInt(),i=s-t,o=i<r?i:r;this.effectiveGasPrice=n.Quantity.from(t+o)}}t.EIP1559FeeMarketTransaction=EIP1559FeeMarketTransaction},174:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EIP2930AccessListTransaction=void 0;const n=s(1),i=s(23),o=s(0),a=s(19),c=s(73),l=s(415),u=s(40),h=r(s(145)),d=s(5);const p=[2718,2930];class EIP2930AccessListTransaction extends c.RuntimeTransaction{constructor(e,t,s){if(super(e,t,s),this.type=n.Quantity.from("0x1"),Array.isArray(e)){this.chainId=n.Quantity.from(e[0]),this.nonce=n.Quantity.from(e[1]),this.gasPrice=this.effectiveGasPrice=n.Quantity.from(e[2]),this.gas=n.Quantity.from(e[3]),this.to=0==e[4].length?n.RPCQUANTITY_EMPTY:i.Address.from(e[4]),this.value=n.Quantity.from(e[5]),this.data=n.Data.from(e[6]);const r=l.AccessLists.getAccessListData(e[7]);if(this.accessList=r.accessList,this.accessListJSON=r.AccessListJSON,this.accessListDataFee=r.dataFeeEIP2930,this.v=n.Quantity.from(e[8]),this.r=n.Quantity.from(e[9]),this.s=n.Quantity.from(e[10]),this.raw=[this.type.toBuffer(),...e],!s){if(t.chainId()!==this.chainId.toNumber())throw new d.CodedError(`Invalid chain id (${this.chainId.toNumber()}) for chain with id ${t.chainId()}.`,n.JsonRpcErrorCode.INVALID_INPUT);const{from:e,serialized:s,hash:r,encodedData:i,encodedSignature:o}=this.computeIntrinsics(this.v,this.raw);this.from=e,this.serialized=s,this.hash=r,this.encodedData=i,this.encodedSignature=o}}else{if(e.chainId){if(this.chainId=n.Quantity.from(e.chainId),this.common.chainId()!==this.chainId.toNumber())throw new d.CodedError(`Invalid chain id (${this.chainId.toNumber()}) for chain with id ${t.chainId()}.`,n.JsonRpcErrorCode.INVALID_INPUT)}else this.chainId=n.Quantity.from(t.chainIdBN().toArrayLike(Buffer));this.gasPrice=this.effectiveGasPrice=n.Quantity.from(e.gasPrice);const s=l.AccessLists.getAccessListData(e.accessList);this.accessList=s.accessList,this.accessListJSON=s.AccessListJSON,this.accessListDataFee=s.dataFeeEIP2930,this.validateAndSetSignature(e)}}toJSON(e){return{hash:this.hash,type:this.type,chainId:this.chainId,nonce:this.nonce,blockHash:this.blockHash?this.blockHash:null,blockNumber:this.blockNumber?this.blockNumber:null,transactionIndex:this.index?this.index:null,from:this.from,to:this.to.isNull()?null:this.to,value:this.value,gas:this.gas,gasPrice:this.gasPrice,input:this.data,accessList:this.accessListJSON,v:this.v,r:this.r,s:this.s}}static fromTxData(e,t,s){return new EIP2930AccessListTransaction(e,t,s)}toVmTransaction(){const e=this.from.toBuffer(),t=this.to.toBuffer(),s=this.data.toBuffer();return{hash:()=>n.BUFFER_32_ZERO,nonce:new o.BN(this.nonce.toBuffer()),gasPrice:new o.BN(this.gasPrice.toBuffer()),gasLimit:new o.BN(this.gas.toBuffer()),to:0===t.length?null:{buf:t,equals:e=>t.equals(e.buf)},value:new o.BN(this.value.toBuffer()),data:s,AccessListJSON:this.accessListJSON,getSenderAddress:()=>({buf:e,equals:t=>e.equals(t.buf)}),getBaseFee:()=>{const e=this.calculateIntrinsicGas();return new o.BN(n.Quantity.from(e+this.accessListDataFee).toBuffer())},getUpfrontCost:()=>{const{gas:e,gasPrice:t,value:s}=this;try{const r=e.toBigInt()*t.toBigInt()+s.toBigInt();return new o.BN(n.Quantity.from(r).toBuffer())}catch(e){throw e}},supports:e=>p.includes(e)}}signAndHash(e){if(null!=this.v)throw new Error("Internal Error: RuntimeTransaction `sign` called but transaction has already been signed");const t=this.type.toBuffer(),s=this.toEthRawTransaction(n.BUFFER_ZERO,n.BUFFER_ZERO,n.BUFFER_ZERO),r=a.encodeRange(s,1,8),i=r.length,o=function ecsign(e,t){const s={signature:new Uint8Array(64),recid:null};if(0===h.default.ecdsaSign(s,e,t)){const e=s.signature.buffer;return{r:Buffer.from(e,0,32),s:Buffer.from(e,32,32),v:s.recid}}throw new Error("The nonce generation function failed, or the private key was invalid")}(n.keccak(Buffer.concat([t,a.digest([r.output],i)])),e);this.v=n.Quantity.from(o.v),this.r=n.Quantity.from(o.r),this.s=n.Quantity.from(o.s),s[9]=this.v.toBuffer(),s[10]=this.r.toBuffer(),s[11]=this.s.toBuffer(),this.raw=s;const c=a.encodeRange(s,9,3);this.serialized=Buffer.concat([t,a.digest([r.output,c.output],i+c.length)]),this.hash=n.Data.from(n.keccak(this.serialized)),this.encodedData=r,this.encodedSignature=c}toEthRawTransaction(e,t,s){return[this.type.toBuffer(),this.chainId.toBuffer(),this.nonce.toBuffer(),this.gasPrice.toBuffer(),this.gas.toBuffer(),this.to.toBuffer(),this.value.toBuffer(),this.data.toBuffer(),this.accessList,e,t,s]}computeIntrinsics(e,t){return u.computeIntrinsicsAccessListTx(e,t)}updateEffectiveGasPrice(){}}t.EIP2930AccessListTransaction=EIP2930AccessListTransaction},754:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},420:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyTransaction=void 0;const r=s(1),n=s(23),i=s(0),o=s(19),a=s(0),c=s(73),l=s(40);class LegacyTransaction extends c.RuntimeTransaction{constructor(e,t,s){if(super(e,t,s),this.type=r.Quantity.from("0x0"),Array.isArray(e)){if(this.nonce=r.Quantity.from(e[0]),this.gasPrice=this.effectiveGasPrice=r.Quantity.from(e[1]),this.gas=r.Quantity.from(e[2]),this.to=0==e[3].length?r.RPCQUANTITY_EMPTY:n.Address.from(e[3]),this.value=r.Quantity.from(e[4]),this.data=r.Data.from(e[5]),this.v=r.Quantity.from(e[6]),this.r=r.Quantity.from(e[7]),this.s=r.Quantity.from(e[8]),this.raw=e,!s){const{from:e,serialized:t,hash:s,encodedData:r,encodedSignature:n}=this.computeIntrinsics(this.v,this.raw,this.common.chainId());this.from=e,this.serialized=t,this.hash=s,this.encodedData=r,this.encodedSignature=n}}else this.gasPrice=this.effectiveGasPrice=r.Quantity.from(e.gasPrice),this.validateAndSetSignature(e)}toJSON(e){const t={hash:this.hash,nonce:this.nonce,blockHash:this.blockHash?this.blockHash:null,blockNumber:this.blockNumber?this.blockNumber:null,transactionIndex:this.index?this.index:null,from:this.from,to:this.to.isNull()?null:this.to,value:this.value,gas:this.gas,gasPrice:this.gasPrice,input:this.data,v:this.v,r:this.r,s:this.s};return(this.common||e).isActivatedEIP(2718)&&(t.type=this.type),t}static fromTxData(e,t,s){return new LegacyTransaction(e,t,s)}static fromEIP2930AccessListTransaction(e,t){return Array.isArray(e)?new LegacyTransaction(e.slice(1,7).concat(e.slice(8)),t):new LegacyTransaction(e,t)}toVmTransaction(){const e=this.from.toBuffer(),t=this.to.toBuffer(),s=this.data.toBuffer();return{hash:()=>r.BUFFER_32_ZERO,nonce:new a.BN(this.nonce.toBuffer()),gasPrice:new a.BN(this.gasPrice.toBuffer()),gasLimit:new a.BN(this.gas.toBuffer()),to:0===t.length?null:{buf:t,equals:e=>t.equals(e.buf)},value:new a.BN(this.value.toBuffer()),data:s,getSenderAddress:()=>({buf:e,equals:t=>e.equals(t.buf)}),getBaseFee:()=>{const e=this.calculateIntrinsicGas();return new a.BN(r.Quantity.from(e).toBuffer())},getUpfrontCost:()=>{const{gas:e,gasPrice:t,value:s}=this;try{const n=e.toBigInt()*t.toBigInt()+s.toBigInt();return new a.BN(r.Quantity.from(n).toBuffer())}catch(e){throw e}},supports:e=>!1}}signAndHash(e){if(null!=this.v)throw new Error("Internal Error: RuntimeTransaction `sign` called but transaction has already been signed");const t=this.common.chainId(),s=this.toEthRawTransaction(r.Quantity.from(t).toBuffer(),r.BUFFER_EMPTY,r.BUFFER_EMPTY),n=o.encodeRange(s,0,6),a=n.length,c=o.encodeRange(s,6,3),l=r.keccak(o.digest([n.output,c.output],a+c.length)),u=i.ecsign(l,e,t);this.v=r.Quantity.from(u.v),this.r=r.Quantity.from(u.r),this.s=r.Quantity.from(u.s),s[6]=this.v.toBuffer(),s[7]=this.r.toBuffer(),s[8]=this.s.toBuffer(),this.raw=s;const h=o.encodeRange(s,6,3);this.serialized=o.digest([n.output,h.output],a+h.length),this.hash=r.Data.from(r.keccak(this.serialized)),this.encodedData=n,this.encodedSignature=h}toEthRawTransaction(e,t,s){return[this.nonce.toBuffer(),this.gasPrice.toBuffer(),this.gas.toBuffer(),this.to.toBuffer(),this.value.toBuffer(),this.data.toBuffer(),e,t,s]}computeIntrinsics(e,t,s){return l.computeIntrinsicsLegacyTx(e,t,s)}updateEffectiveGasPrice(){}}t.LegacyTransaction=LegacyTransaction},257:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0,t.Params={TRANSACTION_GAS:21000n,TRANSACTION_DATA_NON_ZERO_GAS:new Map([["constantinople",68n],["byzantium",68n],["petersburg",68n],["istanbul",16n],["muirGlacier",16n],["berlin",16n],["london",16n]]),TRANSACTION_DATA_ZERO_GAS:4n,TRANSACTION_CREATION:32000n,ACCESS_LIST_ADDRESS_GAS:2400,ACCESS_LIST_STORAGE_KEY_GAS:1900}},755:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},756:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},73:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeTransaction=t.hasPartialSignature=t.toValidLengthAddress=void 0;const r=s(5),n=s(1),i=s(19),o=s(256),a=s(117),c=s(23);t.toValidLengthAddress=(e,t)=>{const s=n.Data.from(e).toBuffer();if(s.byteLength!==c.Address.ByteLength)throw new Error(`The field ${t} must have byte length of ${c.Address.ByteLength}`);return c.Address.from(s)};t.hasPartialSignature=e=>null!=e.v||null!=e.r||null!=e.s;const l=n.RPCQUANTITY_ONE.toBuffer();class RuntimeTransaction extends o.BaseTransaction{constructor(e,s,r){let i;super(s,r),this.locked=!1,this.validateAndSetSignature=e=>{if(t.hasPartialSignature(e)){if(null==e.v||null==e.r||null==e.s)throw new Error("Transaction signature is incomplete; v, r, and s are required.");if(null==e.nonce)throw new Error("Signed transaction is incomplete; nonce is required.");this.v=n.Quantity.from(e.v,!0),this.r=n.Quantity.from(e.r,!0),this.s=n.Quantity.from(e.s,!0);const s=this.toEthRawTransaction(this.v.toBuffer(),this.r.toBuffer(),this.s.toBuffer());if(this.raw=s,!this.from){const{from:r,serialized:n,hash:i,encodedData:o,encodedSignature:a}=this.computeIntrinsics(this.v,s,this.common.chainId());if(null!==e.from){const s=t.toValidLengthAddress(e.from,"from");if(!r.toBuffer().equals(s.toBuffer()))throw new Error("Transaction is signed and contains a `from` field, but the signature doesn't match.")}this.from=r,this.serialized=n,this.hash=i,this.encodedData=o,this.encodedSignature=a}}else null!=e.from&&(this.from=t.toValidLengthAddress(e.from,"from"))},this.finalized=new Promise((e=>{i=(...t)=>process.nextTick(e,...t)})),this.finalizer=i,Array.isArray(e)||(this.nonce=n.Quantity.from(e.nonce,!0),this.gas=n.Quantity.from(null==e.gas?e.gasLimit:e.gas),this.to=null==e.to?n.RPCQUANTITY_EMPTY:t.toValidLengthAddress(e.to,"to"),this.value=n.Quantity.from(e.value),this.data=n.Data.from(null==e.data?e.input:e.data))}serializeForDb(e,t,s){const r=[this.raw,[this.from.toBuffer(),this.hash.toBuffer(),e.toBuffer(),t.toBuffer(),s.toBuffer(),this.effectiveGasPrice.toBuffer()]];return i.encode(r)}fillFromResult(e,t){const s=e.execResult;let i;s.exceptionError?(i=n.BUFFER_ZERO,this.execException=new r.RuntimeError(this.hash,e,r.RETURN_TYPES.TRANSACTION_HASH)):i=l;return(this.receipt=a.TransactionReceipt.fromValues(i,n.Quantity.from(t).toBuffer(),e.bloom.bitvector,this.logs=s.logs||[],e.gasUsed.toArrayLike(Buffer),e.createdAddress?e.createdAddress.buf:null,this.type)).serialize(!1)}getReceipt(){return this.receipt}getLogs(){return this.logs}once(e){return this.finalized}finalize(e,t=null){this.finalizer({status:e,error:t})}}t.RuntimeTransaction=RuntimeTransaction},40:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.computeIntrinsicsFeeMarketTx=t.computeIntrinsicsAccessListTx=t.computeIntrinsicsLegacyTx=t.computeFromAddress=t.publicKeyConvert=t.ecdsaRecover=t.isValidSigRecovery=void 0;const n=s(1),i=s(19),o=s(23),a=r(s(145));function copyOrFill(e,t,s,r){if(e.byteLength>r)throw new Error("Invalid signature");const n=r-e.byteLength,i=s+n;let o=s;for(;o<i;o++)t[o]=0;let a=s+r;const c=s+n;for(;o<a;o++)t[o]=e[o-c]}t.isValidSigRecovery=e=>1===e||0===e;function _ecdsaRecover(e,s,r,i,o){if(!t.isValidSigRecovery(o))throw new Error("Invalid signature v value");const c=n.keccak(e),l=s.slice(0,64);copyOrFill(r,l,0,32),copyOrFill(i,l,32,32);const u=s.slice(0,33);if(0!==a.default.ecdsaRecover(u,l,o,c))throw new Error("Invalid Signature");return u}t.ecdsaRecover=(e,t,s,r,o,a)=>{let c,l;const u=2*r+35;if(s===u||s===u+1){const t=[0===(h=r)?n.BUFFER_EMPTY:n.uintToBuffer(h),n.BUFFER_EMPTY,n.BUFFER_EMPTY],o=i.encodeRange(t,0,3);c=i.digest([e.output,o.output],e.length+o.length),l=s-u}else c=i.digest([e.output],e.length),l=s-27;var h;return _ecdsaRecover(c,t,o,a,l)};t.publicKeyConvert=(e,t)=>{const s=e.slice(0,65);if(0!==a.default.publicKeyConvert(s,t))throw new Error("Invalid Signature");return s};const c=Buffer.allocUnsafe(65);t.computeFromAddress=(e,s,r,i,a)=>{const l=t.ecdsaRecover(e,c,s,a,r,i),u=t.publicKeyConvert(c,l);return o.Address.from(n.keccak(u.slice(1)).slice(-20))};t.computeIntrinsicsLegacyTx=(e,s,r)=>{const o=i.encodeRange(s,0,6),a=i.encodeRange(s,6,3),c=i.digest([o.output,a.output],o.length+a.length);return{from:t.computeFromAddress(o,e.toNumber(),s[7],s[8],r),hash:n.Data.from(n.keccak(c),32),serialized:c,encodedData:o,encodedSignature:a}};t.computeIntrinsicsAccessListTx=(e,s)=>{const r=s[0],a=i.encodeRange(s,1,8),l=i.encodeRange(s,9,3),u=Buffer.concat([r,i.digest([a.output,l.output],a.length+l.length)]),h=_ecdsaRecover(Buffer.concat([r,i.digest([a.output],a.length)]),c,s[10],s[11],e.toNumber()),d=t.publicKeyConvert(c,h);return{from:o.Address.from(n.keccak(d.slice(1)).slice(-20)),hash:n.Data.from(n.keccak(u),32),serialized:u,encodedData:a,encodedSignature:l}};t.computeIntrinsicsFeeMarketTx=(e,s)=>{const r=s[0],a=i.encodeRange(s,1,9),l=i.encodeRange(s,10,3),u=Buffer.concat([r,i.digest([a.output,l.output],a.length+l.length)]),h=_ecdsaRecover(Buffer.concat([r,i.digest([a.output],a.length)]),c,s[11],s[12],e.toNumber()),d=t.publicKeyConvert(c,h);return{from:o.Address.from(n.keccak(d.slice(1)).slice(-20)),hash:n.Data.from(n.keccak(u),32),serialized:u,encodedData:a,encodedSignature:l}}},421:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionFactory=t.TransactionType=void 0;const r=s(1),n=s(420),i=s(174),o=s(19),a=s(5),c=s(175);var l;!function(e){e[e.Legacy=0]="Legacy",e[e.EIP2930AccessList=1]="EIP2930AccessList",e[e.EIP1559AccessList=2]="EIP1559AccessList"}(l=t.TransactionType||(t.TransactionType={}));class TransactionFactory{constructor(e,t){const[s,r]=o.decode(e);this.tx=TransactionFactory.fromDatabaseTx(s,t,r)}static _fromData(e,t,s,o){if(!s.isActivatedEIP(2718))return n.LegacyTransaction.fromTxData(e,s,o);if(s.isActivatedEIP(1559))if(Array.isArray(e)){if(t===l.Legacy)return n.LegacyTransaction.fromTxData(e,s,o);if(t===l.EIP2930AccessList)return i.EIP2930AccessListTransaction.fromTxData(e,s,o);if(t===l.EIP1559AccessList)return c.EIP1559FeeMarketTransaction.fromTxData(e,s,o)}else{const a=(t===l.Legacy||t===l.EIP2930AccessList)&&void 0===e.gasPrice;if(t===l.EIP1559AccessList||a){const t=c.EIP1559FeeMarketTransaction.fromTxData(e,s,o);return a&&(e.maxFeePerGas||(t.maxFeePerGas=r.Quantity.from(null)),e.maxPriorityFeePerGas||(t.maxPriorityFeePerGas=r.RPCQUANTITY_ZERO)),t}if(t===l.Legacy)return n.LegacyTransaction.fromTxData(e,s,o);if(t===l.EIP2930AccessList)return void 0===e.accessList?n.LegacyTransaction.fromTxData(e,s,o):i.EIP2930AccessListTransaction.fromTxData(e,s,o)}else{if(t===l.Legacy)return n.LegacyTransaction.fromTxData(e,s,o);if(t===l.EIP2930AccessList){if(s.isActivatedEIP(2930))return i.EIP2930AccessListTransaction.fromTxData(e,s,o);throw new a.CodedError("EIP 2930 is not activated.",r.JsonRpcErrorCode.INVALID_PARAMS)}if(t===l.EIP1559AccessList)throw new a.CodedError("EIP 1559 is not activated.",r.JsonRpcErrorCode.INVALID_PARAMS)}throw new a.CodedError("Tx instantiation with supplied type not supported",r.JsonRpcErrorCode.METHOD_NOT_FOUND)}static fromRpc(e,t,s){const r=this.typeOfRPC(e);return this._fromData(e,r,t,s)}static fromDatabaseTx(e,t,s){const o=this.typeOfRaw(e);switch(o){case l.EIP1559AccessList:return c.EIP1559FeeMarketTransaction.fromTxData(e.slice(1),t,s);case l.Legacy:return n.LegacyTransaction.fromTxData(e,t,s);case l.EIP2930AccessList:return i.EIP2930AccessListTransaction.fromTxData(e.slice(1),t,s);default:throw new a.CodedError(`Transactions with supplied type ${o} not supported`,r.JsonRpcErrorCode.METHOD_NOT_FOUND)}}static fromString(e,t){let s=r.Data.from(e).toBuffer();const n=s[0],i=this.typeOf(n);if(t.isActivatedEIP(2718)){let e;try{e=o.decode(i===l.Legacy?s:s.slice(1))}catch(e){throw new Error("Could not decode transaction: "+e.message)}return this._fromData(e,i,t)}{let e;try{e=o.decode(s)}catch(e){throw new Error("Could not decode transaction: "+e.message)}return this._fromData(e,l.Legacy,t)}}static typeOf(e){if(e===l.EIP1559AccessList||e===l.EIP2930AccessList)return e;if(e>=192||e===l.Legacy||void 0===e)return l.Legacy;throw new Error(`Invalid transaction type: ${e}`)}static typeOfRaw(e){if(9===e.length)return l.Legacy;const t=e[0][0];return this.typeOf(t)}static typeOfRPC(e){if("type"in e&&void 0!==e.type){const t=parseInt(e.type,16);return this.typeOf(t)}return l.Legacy}}t.TransactionFactory=TransactionFactory},117:function(e,t,s){"use strict";var r,n,i=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionReceipt=void 0;const a=s(5),c=s(19),l=s(1),u=s(1),h=[u.RPCQUANTITY_ZERO,u.RPCQUANTITY_ONE];class TransactionReceipt{constructor(e){if(r.set(this,void 0),n.set(this,((e,t,s,n,i,a=null,c=null)=>{this.raw=[e,t,s,n],this.contractAddress=a,o(this,r,i),this.txType=c})),e){const t=c.decode(e);i(this,n).call(this,t[0],t[1],t[2],t[3],t[4],t[5])}}static fromValues(e,t,s,r,o,a,c=null){const l=new TransactionReceipt;return i(l,n).call(l,e,t,s,r,o,a,c),l}serialize(e){if(null==this.encoded&&(this.encoded=c.encodeRange(this.raw,0,4)),e){const e=[i(this,r),this.contractAddress],t=c.encodeRange(e,0,2);return c.digest([this.encoded.output,t.output],this.encoded.length+t.length)}{const e=c.digest([this.encoded.output],this.encoded.length);return this.txType?Buffer.concat([this.txType.toBuffer(),e]):e}}toJSON(e,t,s){const n=this.raw,o=0===this.contractAddress.length?null:l.Data.from(this.contractAddress),c=e.hash(),u=e.header.number,d=a.BlockLogs.create(c),p=t.hash,m=t.index;d.blockNumber=u,n[3].forEach((e=>d.append(m,p,e)));const g=[...d.toJSON()];e.header.baseFeePerGas&&t.updateEffectiveGasPrice(e.header.baseFeePerGas);const y={transactionHash:p,transactionIndex:m,blockNumber:u,blockHash:c,from:t.from,to:o?null:t.to,cumulativeGasUsed:l.Quantity.from(n[1]),gasUsed:l.Quantity.from(i(this,r)),contractAddress:o,logs:g,logsBloom:l.Data.from(n[2],256),status:h[n[0][0]],effectiveGasPrice:t.effectiveGasPrice};return t.type&&s.isActivatedEIP(2718)&&(y.type=t.type),y}}t.TransactionReceipt=TransactionReceipt,r=new WeakMap,n=new WeakMap},757:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},758:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(s(10),t)},707:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbortError=void 0;class AbortError extends Error{constructor(){super("The user aborted a request.")}}t.AbortError=AbortError},391:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodedError=void 0;class CodedError extends Error{constructor(e,t){super(e),CodedError.captureStackTraceExtended.bind(this,e),this.code=t}static from(e,t){const s=new CodedError(e.message,t);return s.stack=e.stack,s}static nonEnumerableProperty(e){return{value:e,writable:!0,configurable:!0}}static captureStackTraceExtended(e){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):(Object.defineProperty(this,"stack",CodedError.nonEnumerableProperty(Error(e).stack)),Object.defineProperty(this,"message",CodedError.nonEnumerableProperty(void 0!==e?""+e:"")))}}t.CodedError=CodedError},392:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VM_EXCEPTIONS=t.VM_EXCEPTION=t.GAS_LIMIT=t.INTRINSIC_GAS_TOO_LOW=t.REPLACED=t.UNDERPRICED=t.NONCE_TOO_LOW=t.INVALID_SENDER=void 0,t.INVALID_SENDER="invalid sender",t.NONCE_TOO_LOW="nonce too low",t.UNDERPRICED="transaction underpriced",t.REPLACED="transaction replaced by better transaction",t.INTRINSIC_GAS_TOO_LOW="intrinsic gas too low",t.GAS_LIMIT="exceeds block gas limit",t.VM_EXCEPTION="VM Exception while processing transaction: ",t.VM_EXCEPTIONS="Multiple VM Exceptions while processing transactions: : \n\n"},393:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeError=t.RETURN_TYPES=void 0;const r=s(392),n=s(1),i=s(697),o=s(391),a=s(1),c=Buffer.from("08c379a0","hex");var l;!function(e){e[e.TRANSACTION_HASH=0]="TRANSACTION_HASH",e[e.RETURN_VALUE=1]="RETURN_VALUE"}(l=t.RETURN_TYPES||(t.RETURN_TYPES={}));class RuntimeError extends o.CodedError{constructor(e,t,s){const u=t.execResult,h=u.exceptionError.error;let d=r.VM_EXCEPTION+h;super(d,a.JsonRpcErrorCode.INVALID_INPUT),o.CodedError.captureStackTraceExtended.bind(this,d),this.name=this.constructor.name;const p=u.returnValue,m=e.toString();let g;if(p.length>4&&0===c.compare(p,0,4))try{g=i.rawDecode(["bytes"],p.slice(4))[0].toString(),d+=" "+g}catch{g=null}else g=null;this.message=d,this.data={hash:m,programCounter:u.runState.programCounter,result:s===l.TRANSACTION_HASH?m:n.Data.from(p||"0x").toString(),reason:g,message:h}}}t.RuntimeError=RuntimeError},10:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(s(391),t),n(s(392),t),n(s(393),t),n(s(707),t),n(s(708),t),n(s(709),t),n(s(255),t),n(s(710),t),n(s(711),t),n(s(712),t),n(s(713),t),n(s(413),t),n(s(714),t),n(s(715),t),n(s(716),t),n(s(717),t),n(s(718),t)},708:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Account=void 0;const r=s(1),n=s(0),i=s(19),o=s(1);class Account{constructor(e){this.stateRoot=n.KECCAK256_RLP,this.codeHash=n.KECCAK256_NULL,this.address=e,this.balance=o.RPCQUANTITY_EMPTY,this.nonce=o.RPCQUANTITY_EMPTY}static fromBuffer(e){const t=Object.create(Account.prototype),s=i.decode(e);return t.nonce=r.Quantity.from(s[0]),t.balance=r.Quantity.from(s[1]),t.stateRoot=s[2],t.codeHash=s[3],t}serialize(){return i.encode([this.nonce.toBuffer(),this.balance.toBuffer(),this.stateRoot,this.codeHash])}}t.Account=Account},709:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockLogs=void 0;const r=s(1),n=s(1),i=s(19),o=s(23),a=Symbol("raw"),c=Symbol("logs"),filterByTopic=(e,t)=>!(e.length>t.length)&&e.every(((e,s)=>{if(null===e)return!0;let n;if(!Array.isArray(e))return t[s].equals(r.Data.from(e).toBuffer());if(0===e.length)return!0;n=e;const i=t[s];return n.some((e=>i.equals(r.Data.from(e).toBuffer())))}));class BlockLogs{constructor(e){if(e){const t=i.decode(e);this[a]=t}}static create(e){const t=Object.create(BlockLogs.prototype);return t[a]=[e.toBuffer(),[]],t}serialize(){return i.encode(this[a])}append(e,t,s){this[a][1].push([n.BUFFER_ZERO,e.toBuffer(),t.toBuffer(),s[0],s[1],s[2]])}get length(){return this[a][1].length}static fromJSON(e){if(!e||0===e.length)return null;const t=e[0].blockHash,s=e[0].blockNumber,i=BlockLogs.create(r.Data.from(t,32));return i.blockNumber=r.Quantity.from(s),e.forEach((e=>{const t=o.Address.from(e.address),s=(e.blockNumber,Array.isArray(e.data)?e.data.map((e=>r.Data.from(e).toBuffer())):r.Data.from(e.data).toBuffer()),a=(e.logIndex,!1===e.removed?n.BUFFER_ZERO:n.RPCQUANTITY_ONE.toBuffer(),Array.isArray(e.topics)?e.topics.map((e=>r.Data.from(e,32).toBuffer())):r.Data.from(e.topics,32).toBuffer()),c=r.Data.from(e.transactionHash,32),l=r.Quantity.from(e.transactionIndex);i.append(l,c,[t.toBuffer(),a,s])})),i}toJSON(){return this[c]().toJSON()}[c](){const e=this.blockNumber,t=this[a],s=t[1],n=this.length,i=r.Data.from(t[0]);return{toJSON:()=>({*[Symbol.iterator](){for(let t=0;t<n;t++)yield BlockLogs.logToJSON(s[t],r.Quantity.from(t),i,e)}}),*[Symbol.iterator](){for(let t=0;t<n;t++){const n=s[t],o=n[3],a=n[4];yield{address:o,topics:a,toJSON:()=>BlockLogs.logToJSON(n,r.Quantity.from(t),i,e)}}}}}static logToJSON(e,t,s,i){const a=e[4],c=e[5];return{address:o.Address.from(e[3]),blockHash:s,blockNumber:i,data:Array.isArray(c)?c.map((e=>r.Data.from(e,e.length))):r.Data.from(c,c.length),logIndex:t,removed:!e[0].equals(n.BUFFER_ZERO),topics:Array.isArray(a)?a.map((e=>r.Data.from(e,32))):r.Data.from(a,32),transactionHash:r.Data.from(e[2],32),transactionIndex:r.Quantity.from(e[1])}}*filter(e,t){const s=this[c]();if(0!==e.length)if(0===t.length)for(const t of s)e.some((e=>e.equals(t.address)))&&(yield t.toJSON());else for(const r of s)e.some((e=>e.equals(r.address)))&&filterByTopic(t,r.topics)&&(yield r.toJSON());else if(0!==t.length)for(const e of s)filterByTopic(t,e.topics)&&(yield e.toJSON());else yield*s.toJSON()}}t.BlockLogs=BlockLogs},255:(e,t)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0,function(e){e.EARLIEST="earliest",e.LATEST="latest",e.PENDING="pending"}(t.Tag||(t.Tag={})),function(e){e[e.earliest=0]="earliest",e[e.latest=1]="latest",e[e.pending=2]="pending"}(s||(s={})),function(e){e.normalize=function normalize(t){if("string"==typeof t)return e[t.toUpperCase()];switch(t){case s.earliest:return e.EARLIEST;case s.latest:return e.LATEST;case s.pending:return e.PENDING}}}(t.Tag||(t.Tag={}))},710:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceDataFactory=void 0;const r=s(1),n=["","00","0000","000000","00000000","0000000000","000000000000","00000000000000","0000000000000000","000000000000000000","00000000000000000000","0000000000000000000000","000000000000000000000000","00000000000000000000000000","0000000000000000000000000000","000000000000000000000000000000","00000000000000000000000000000000","0000000000000000000000000000000000","000000000000000000000000000000000000","00000000000000000000000000000000000000","0000000000000000000000000000000000000000","000000000000000000000000000000000000000000","00000000000000000000000000000000000000000000","0000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000","00000000000000000000000000000000000000000000000000","0000000000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000000000","00000000000000000000000000000000000000000000000000000000","0000000000000000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000000000000000","00000000000000000000000000000000000000000000000000000000000000","0000000000000000000000000000000000000000000000000000000000000000"];t.TraceDataFactory=()=>{const e=new Map;return{from:t=>{const s=r.bufferToMinHexKey(t),i=e.get(s);if(i)return i;let o,a;const c={toBuffer:()=>{if(o)return o;const e=t.byteLength;if(32===e)o=t;else{const s=32-e;o=Buffer.allocUnsafe(32).fill(0,0,s),t.copy(o,s,0,e)}return o},toJSON:()=>a||(a=`${n[32-s.length/2]}${s}`)};return e.set(s,c),c}}}},711:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStorageMap=void 0;class TraceStorageMap extends Map{toJSON(){const e={};for(const[t,s]of this)e[t.toJSON()]=s;return e}}t.TraceStorageMap=TraceStorageMap},712:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},713:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},413:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterTypes=void 0,function(e){e[e.log=0]="log",e[e.block=1]="block",e[e.pendingTransaction=2]="pendingTransaction"}(t.FilterTypes||(t.FilterTypes={}))},714:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},715:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},716:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},718:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},844:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilecoinDefaults=t.FilecoinOptionsConfig=void 0;const r=s(362);var n=s(362);Object.defineProperty(t,"FilecoinOptionsConfig",{enumerable:!0,get:function(){return n.FilecoinOptionsConfig}}),Object.defineProperty(t,"FilecoinDefaults",{enumerable:!0,get:function(){return n.FilecoinDefaults}}),t.default={FilecoinDefaults:r.FilecoinDefaults,FilecoinOptionsConfig:r.FilecoinOptionsConfig}},845:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChainOptions=void 0;const r=s(163);t.ChainOptions={ipfsHost:{normalize:r.normalize,cliDescription:"The IPFS simulator host name/address to listen on.",default:()=>"127.0.0.1",cliType:"string"},ipfsPort:{normalize:r.normalize,cliDescription:"The IPFS simulator port.",default:()=>5001,cliType:"number"},asyncRequestProcessing:{normalize:r.normalize,cliDescription:"When set to `false` only one request will be processed at a time.",default:()=>!0,cliType:"boolean"}}},846:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseOptions=void 0;const r=s(163);t.DatabaseOptions={db:{normalize:r.normalize,cliDescription:"Specify an alternative database instance, like MemDOWN",disableInCLI:!0,conflicts:["dbPath"]},dbPath:{normalize:r.normalize,cliDescription:"Specify a path to a directory to save the chain database.",cliAliases:["db"],cliType:"string",conflicts:["db"]}}},163:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=void 0;t.normalize=e=>e},362:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilecoinOptionsConfig=t.FilecoinDefaults=void 0;const r=s(845),n=s(846),i=s(847),o=s(848),a=s(363),c=s(24);t.FilecoinDefaults={chain:r.ChainOptions,database:n.DatabaseOptions,logging:i.LoggingOptions,miner:o.MinerOptions,wallet:a.WalletOptions},t.FilecoinOptionsConfig=new c.OptionsConfig(t.FilecoinDefaults)},847:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingOptions=void 0;const r=s(163),n={log:console.log};t.LoggingOptions={logger:{normalize:r.normalize,cliDescription:"An object, like `console`, that implements a `log` function.",disableInCLI:!0,default:()=>n}}},848:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MinerOptions=void 0;const r=s(163);t.MinerOptions={blockTime:{normalize:e=>Math.max(0,e),cliDescription:'Sets the `blockTime` in seconds for automatic mining. A `blockTime` of `0` or a negative number enables "instamine mode", where new executable transactions will be mined instantly.',default:()=>0,cliType:"number"},mine:{normalize:r.normalize,cliDescription:"Enable mining. Set to `false` to pause the miner.",default:()=>!0,cliType:"boolean"}}},363:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletOptions=void 0;const n=s(163),i=r(s(137)),o=s(24),a=i.default(),c=(()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;return(s,r)=>{let n="";for(let i=0;i<s;i++)n+=e[r()*t|0];return n}})();t.WalletOptions={totalAccounts:{normalize:n.normalize,cliDescription:"Number of accounts to generate at startup.",default:()=>10,cliAliases:["a"],cliType:"number"},deterministic:{normalize:n.normalize,cliDescription:"Use pre-defined, deterministic seed.",default:()=>!1,cliAliases:["d"],cliType:"boolean",conflicts:["seed"]},seed:{normalize:n.normalize,cliDescription:"Seed to use to generate a mnemonic.",default:e=>!0===e.deterministic?o.DeterministicSeedPhrase:c(10,a),cliAliases:["s"],cliType:"string",conflicts:["deterministic"]},defaultBalance:{normalize:n.normalize,cliDescription:"The default account balance, specified in FIL.",default:()=>100,cliAliases:["b"],cliType:"number"}}},111:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(s(849),t)},849:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TruffleColors=void 0,t.TruffleColors={porsche:"#e4a663",turquoise:"#3fe0c5"}},114:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.provider=t.server=t._DefaultServerOptions=t.ServerStatus=t.Server=void 0;const n=r(s(385)),i=r(s(69));var o=s(69);Object.defineProperty(t,"Server",{enumerable:!0,get:function(){return o.Server}}),Object.defineProperty(t,"ServerStatus",{enumerable:!0,get:function(){return o.ServerStatus}}),Object.defineProperty(t,"_DefaultServerOptions",{enumerable:!0,get:function(){return o._DefaultServerOptions}});const a={server:e=>new i.default(e),provider:e=>n.default.initialize(e).connector.provider};t.server=a.server,t.provider=a.provider,t.default=a},385:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(1),n=s(28),i=s(28);t.default={initialize:(e={flavor:n.DefaultFlavor,chain:{asyncRequestProcessing:!0}})=>{const t=e.flavor||n.DefaultFlavor,s="chain"in e?e.chain.asyncRequestProcessing:e.asyncRequestProcessing,o=new r.RequestCoordinator(s?0:1),a=new r.Executor(o),c=i.GetConnector(t,e,a),l=c.connect?c.connect():c.initialize();return{connector:c,promise:l.then(o.resume)}}}},571:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serverOptionsConfig=t.serverDefaults=void 0;const r=s(851),n=s(24);t.serverDefaults={server:r.ServerOptions},t.serverOptionsConfig=new n.OptionsConfig(t.serverDefaults)},851:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerOptions=void 0;const r=s(28),normalize=e=>e;t.ServerOptions={ws:{normalize,cliDescription:"Enable a websocket server.",default:()=>!0,legacyName:"ws",cliType:"boolean"},wsBinary:{normalize,cliDescription:"Whether or not websockets should response with binary data (ArrayBuffers) or strings.",default:()=>"auto",cliChoices:["true","false","auto"]},rpcEndpoint:{normalize,cliDescription:"Defines the endpoint route the HTTP and WebSocket servers will listen on.",default:(e,t)=>{switch(t){case r.FilecoinFlavorName:return"/rpc/v0";case r.DefaultFlavor:default:return"/"}},defaultDescription:'"/" (Ethereum), "/rpc/v0" (Filecoin)'}}},69:function(e,t,s){"use strict";var r,n,i,o,a,c,l,u,h,d=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},p=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Server=t._DefaultServerOptions=t.ServerStatus=void 0;const g=s(571);m(s(572)).default.shim();const y=m(s(602)),b=s(605);b._cfg&&b._cfg(new Uint8Array([115,105,108,101,110,116]));const _=s(28),w=m(s(385)),v=m(s(131)),k=m(s(112)),E=m(s(629));var B;!function(e){e[e.unknown=0]="unknown",e[e.ready=1]="ready",e[e.opening=2]="opening",e[e.open=4]="open",e[e.openingOrOpen=6]="openingOrOpen",e[e.closing=8]="closing",e[e.closed=16]="closed",e[e.closingOrClosed=24]="closingOrClosed"}(B=t.ServerStatus||(t.ServerStatus={})),t._DefaultServerOptions=g.serverDefaults;class Server extends E.default{constructor(e={flavor:_.DefaultFlavor}){super(),r.set(this,void 0),n.set(this,void 0),i.set(this,B.unknown),o.set(this,null),a.set(this,null),c.set(this,null),l.set(this,void 0),u.set(this,null),h.set(this,void 0),d(this,r,g.serverOptionsConfig.normalize(e)),d(this,n,e),d(this,i,B.ready);const t=w.default.initialize(p(this,n)),s=d(this,l,t.connector);d(this,h,Promise.all([t.promise,this.initialize(s)]))}get provider(){return p(this,l).provider}get status(){return p(this,i)}async initialize(e){const t=d(this,o,b.App());p(this,r).server.ws&&d(this,u,new v.default(t,e,p(this,r).server)),d(this,a,new k.default(t,e,p(this,r).server)),await e.once("ready")}listen(e,t,s){let r=null;"function"==typeof t&&(s=t,r=null);const n="function"==typeof s,a=p(this,i);if(a===B.closing){const e=new Error("Cannot start server while it is closing.");return n?process.nextTick(s,e):Promise.reject(e)}if(0!=(a&B.openingOrOpen)){const t=new Error(`Server is already open, or is opening, on port: ${e}.`);return n?process.nextTick(s,t):Promise.reject(t)}d(this,i,B.opening);const l=Promise.allSettled([p(this,h),new Promise((t=>{r?p(this,o).listen(r,e,1,t):p(this,o).listen(e,1,t)})).then((t=>{if(!t){d(this,i,B.closed);throw new Error(`listen EADDRINUSE: address already in use ${r||"127.0.0.1"}:${e}.`)}d(this,i,B.open),d(this,c,t)}))]).then((async e=>{const t=[];if("rejected"===e[0].status&&t.push(e[0].reason),"rejected"===e[1].status&&t.push(e[1].reason),0!==t.length){d(this,i,B.unknown);try{await this.close()}catch(e){t.push(e)}throw t.length>1?new y.default(t):t[0]}this.emit("open")}));if(!n)return l;l.then((()=>s(null))).catch(s)}async close(){if(p(this,i)===B.opening)throw new Error("Cannot close server while it is opening.");if(0!=(p(this,i)&B.closingOrClosed))throw new Error("Server is already closing or closed.");d(this,i,B.closing);const e=p(this,c);d(this,c,null),null!==e&&b.us_listen_socket_close(e),null!==p(this,u)&&p(this,u).close(),null!==p(this,a)&&p(this,a).close(),null!==p(this,l)&&await p(this,l).close(),d(this,i,B.closed),d(this,o,null),await this.emit("close")}}t.Server=Server,r=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,h=new WeakMap,t.default=Server},112:function(e,t,s){"use strict";var r,n,i,o=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},a=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=c(s(861)),u=c(s(862)),h=s(14),noop=()=>{};function prepareCORSResponseHeaders(e,t){const s=t.getHeader("origin"),r=t.getHeader("access-control-request-headers");return t=>{""!==s&&("OPTIONS"===e&&(t.writeHeader("Access-Control-Allow-Methods","POST"),""!==r&&t.writeHeader("Access-Control-Allow-Headers",r),t.writeHeader("Access-Control-Max-Age","600")),t.writeHeader("Access-Control-Allow-Credentials","true"),t.writeHeader("Access-Control-Allow-Origin",s))}}function sendResponse(e,t,s,r,n=noop){e.cork((()=>{e.writeStatus(t),n(e),null!=s&&e.writeHeader("Content-Type",s),null!=r?e.end(r):e.end()}))}t.default=class HttpServer{constructor(e,t,s){r.set(this,void 0),n.set(this,((e,t)=>{const s=prepareCORSResponseHeaders("POST",t);let n,i=!1;e.onAborted((()=>{i=!0})),e.onData(((o,c)=>{const d=Buffer.from(o);if(c){const o=a(this,r);let c;try{const e=n?Buffer.concat([n,d],n.length+d.length):d;c=o.parse(e)}catch(t){return void sendResponse(e,u.default.BAD_REQUEST,l.default.PLAIN,"400 Bad Request: "+t.message,s)}o.handle(c,t).then((({value:e})=>e)).then((t=>{if(i)return;const r=o.format(t,c);h.types.isGeneratorObject(r)?e.cork((()=>{e.writeStatus(u.default.OK),s(e),e.writeHeader("Content-Type",l.default.JSON);for(const t of r)e.write(t);e.end()})):sendResponse(e,u.default.OK,l.default.JSON,r,s)})).catch((t=>{if(i)return;const r=o.formatError(t,c);sendResponse(e,u.default.OK,l.default.JSON,r,s)}))}else n=n?Buffer.concat([n,d],n.length+d.length):Buffer.concat([d],d.length)}))})),i.set(this,((e,t)=>{const s=prepareCORSResponseHeaders("OPTIONS",t);sendResponse(e,u.default.NO_CONTENT,null,null,s)})),o(this,r,t),e.post(s.rpcEndpoint,a(this,n)).options(s.rpcEndpoint,a(this,i)),e.get("/418",(e=>{sendResponse(e,u.default.IM_A_TEAPOT,l.default.PLAIN,"418 I'm a teapot")})),e.any("/*",((e,t)=>{const s=t.getHeader("connection");s&&"upgrade"===s.toLowerCase()?sendResponse(e,u.default.BAD_REQUEST,l.default.PLAIN,"400 Bad Request"):sendResponse(e,u.default.NOT_FOUND,l.default.PLAIN,"404 Not Found")}))}close(){}},r=new WeakMap,n=new WeakMap,i=new WeakMap},861:(e,t)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PLAIN="text/plain",e.JSON="application/json"}(s||(s={})),t.default=s},862:(e,t)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.OK="200",e.NO_CONTENT="204",e.BAD_REQUEST="400",e.NOT_FOUND="404",e.METHOD_NOT_ALLOWED="405",e.IM_A_TEAPOT="418"}(s||(s={})),t.default=s},860:(e,t)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.CLOSE_NORMAL=1e3]="CLOSE_NORMAL"}(s||(s={})),t.default=s},131:function(e,t,s){"use strict";var r,n=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_PAYLOAD_SIZE=void 0;const o=i(s(860)),a=s(14);t.MAX_PAYLOAD_SIZE=15728640;t.default=class WebsocketServer{constructor(e,s,i){r.set(this,new Map);const o=n(this,r),c=i.wsBinary,l="auto"===c;e.ws(i.rpcEndpoint,{maxPayloadLength:t.MAX_PAYLOAD_SIZE,idleTimeout:120,open:e=>{e.closed=!1,o.set(e,new Set)},message:async(e,t,r)=>{let n;const i=l?r:c;try{n=s.parse(Buffer.from(t))}catch(t){const r=s.formatError(t,n);return void e.send(r,i)}let u;try{const{value:t}=await s.handle(n,e);if(e.closed)return;const i=t,a=await i;if(e.closed)return;if(u=s.format(a,n),"function"==typeof i.on){const t=i;t.on("message",(t=>{const s=JSON.stringify({jsonrpc:"2.0",method:t.type,params:t.data});e.send(s,r)})),o.get(e).add(t.dispose)}}catch(t){if(e.closed)return;u=s.formatError(t,n)}if(a.types.isGeneratorObject(u)){const t=u;e.cork((()=>{const{value:s}=t.next();let{value:r,done:n}=t.next();if(n)e.send(s,i);else{const n=!1;e.sendFirstFragment(s,i,n);let o=r;for(r of t)e.sendFragment(o,n),o=r;e.sendLastFragment(r,n)}}))}else e.send(u,i)},drain:e=>{},close:e=>{e.closed=!0,o.get(e).forEach((e=>e())),o.delete(e)}})}close(){n(this,r).forEach(((e,t)=>t.end(o.default.CLOSE_NORMAL,"Server closed by client")))}},r=new WeakMap},859:(e,t,s)=>{var r={"./uws_darwin_arm64_102.node":607,"./uws_darwin_arm64_72.node":608,"./uws_darwin_arm64_79.node":609,"./uws_darwin_arm64_83.node":610,"./uws_darwin_arm64_88.node":611,"./uws_darwin_arm64_93.node":612,"./uws_darwin_x64_102.node":613,"./uws_darwin_x64_72.node":614,"./uws_darwin_x64_79.node":615,"./uws_darwin_x64_83.node":616,"./uws_darwin_x64_88.node":617,"./uws_darwin_x64_93.node":618,"./uws_linux_x64_102.node":619,"./uws_linux_x64_72.node":620,"./uws_linux_x64_79.node":621,"./uws_linux_x64_83.node":622,"./uws_linux_x64_88.node":623,"./uws_linux_x64_93.node":624,"./uws_win32_x64_102.node":625,"./uws_win32_x64_83.node":626,"./uws_win32_x64_88.node":627,"./uws_win32_x64_93.node":628};function webpackContext(e){var t=webpackContextResolve(e);return s(t)}function webpackContextResolve(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(r)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=859},28:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetConnector=exports.DefaultOptionsByName=exports.DefaultFlavor=exports.FilecoinFlavorName=exports.EthereumFlavorName=void 0;const ethereum_1=__webpack_require__(115),ethereum_options_1=__webpack_require__(99),filecoin_options_1=__webpack_require__(844),colors_1=__webpack_require__(111),chalk_1=__importDefault(__webpack_require__(230));__webpack_require__(24);const NEED_HELP="Need help? Reach out to the Truffle community at",COMMUNITY_LINK="https://trfl.io/support";function GetConnector(flavor,providerOptions,executor){if(flavor===exports.DefaultFlavor)return new ethereum_1.Connector(providerOptions,executor);try{switch(flavor){case exports.FilecoinFlavorName:{flavor="@ganache/filecoin";const f=eval("require")(flavor),Connector=void 0!==f.default?f.default.Connector:f.Connector;return new Connector(providerOptions,executor)}default:{const{Connector:e}=__webpack_require__(850)(flavor);return new e(providerOptions,executor)}}}catch(e){if(!e.message.includes(`Cannot find module '${flavor}'`))throw e;console.warn(chalk_1.default`\n\n{red.bold ERROR:} Could not find Ganache flavor "{bold filecoin}" (${flavor}); `+"it probably\nneeds to be installed.\n  if you're using Ganache as a library run: \n"+chalk_1.default`   {blue.bold $ npm install ${flavor}}\n`+"  if you're using Ganache as a CLI run: \n"+chalk_1.default`   {blue.bold $ npm install --global ${flavor}}\n\n`+chalk_1.default`{hex("${colors_1.TruffleColors.porsche}").bold ${NEED_HELP}}\n`+chalk_1.default`{hex("${colors_1.TruffleColors.turquoise}") ${COMMUNITY_LINK}}\n\n`),process.exit(1)}}exports.EthereumFlavorName="ethereum",exports.FilecoinFlavorName="filecoin",exports.DefaultFlavor=exports.EthereumFlavorName,exports.DefaultOptionsByName={[exports.EthereumFlavorName]:ethereum_options_1.EthereumDefaults,[exports.FilecoinFlavorName]:filecoin_options_1.FilecoinDefaults},exports.GetConnector=GetConnector},850:e=>{function webpackEmptyContext(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id=850,e.exports=webpackEmptyContext},24:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(s(786),t),n(s(787),t),n(s(788),t),n(s(150),t),n(s(789),t)},786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},789:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeterministicSeedPhrase=void 0,t.DeterministicSeedPhrase="TestRPC is awesome!"},150:function(e,t,s){"use strict";var r,n,i=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsConfig=void 0;const a=s(1),checkForConflicts=(e,t,s,r)=>{if(r)for(const n of r)if(s.has(n))throw new Error(`Values for both "${t}.${e}" and "${t}.${n}" cannot be specified; they are mutually exclusive.`)};t.OptionsConfig=class OptionsConfig{constructor(e){r.set(this,void 0),n.set(this,void 0),i(this,r,e),i(this,n,Object.keys(e))}normalize(e){const t=o(this,r),s={};return o(this,n).forEach((r=>{!function fill(e,t,s,r){const n=e[r],i=s[r]=s[r]||{},o=t.flavor,c=new Set,l=Object.keys(n);if(a.hasOwn(t,r)){const e=t[r];for(let s=0,u=l.length;s<u;s++){const u=l[s],h=n[u];let d=e[u];if(void 0!==d){checkForConflicts(u,r,c,h.conflicts);const t=h.normalize(e[u]);i[u]=t,c.add(u)}else if(d=t[h.legacyName||u],void 0!==d){checkForConflicts(u,r,c,h.conflicts);const e=h.normalize(d);i[u]=e,c.add(u)}else a.hasOwn(h,"default")&&(i[u]=h.default(i,o))}}else for(let e=0,s=l.length;e<s;e++){const s=l[e],u=n[s],h=t[u.legacyName||s];if(void 0!==h){checkForConflicts(s,r,c,u.conflicts);const e=u.normalize(h);i[s]=e,c.add(s)}else a.hasOwn(u,"default")&&(i[s]=u.default(i,o))}}(t,e,s,r)})),s}},r=new WeakMap,n=new WeakMap},788:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},787:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},108:function(e,t,s){"use strict";var r,n,i,o=this&&this.__decorate||function(e,t,s,r){var n,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,s,o):n(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o},a=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=c(s(53)),u=c(s(837));let h=class PromiseQueue{constructor(){r.set(this,[]),n.set(this,((e,t)=>{t===e[0]?(e.shift(),t.resolve(t.value),a(this,i).call(this,e)):t.resolved=!0})),i.set(this,(e=>{let t=e[0];for(;t&&t.resolved;)e.shift(),t.resolve(t.value),t=e[0];0===e.length&&this.emit("idle")}))}isBusy(){return 0!==a(this,r).length}add(e){const t=a(this,r),s=new u.default(e,t,a(this,n));return t.push(s),s.promise}clear(e){const t=a(this,r).splice(0);t.forEach((s=>{s.queue=t,s.value=e}))}};r=new WeakMap,n=new WeakMap,i=new WeakMap,h=o([l.default.mixin(Symbol.for("emittery"),["emit","once"])],h),t.default=h},837:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class Entry{constructor(e,t,s){this.resolved=!1,this.value=e,this.queue=t,this.onSetteled=s;const _onSetteled=()=>this.onSetteled(this.queue,this);e.then(_onSetteled,_onSetteled),this.promise=new Promise((e=>{this.resolve=e}))}}},19:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encodeLength=t.encode=t.digest=t.encodeRange=t.getLength=void 0;const r=s(21);Object.defineProperty(t,"getLength",{enumerable:!0,get:function(){return r.getLength}});const n=s(1);function encode(e){if(Array.isArray(e)){let t=0;const s=[];for(let r=0,n=e.length;r<n;r++){const n=encode(e[r]);t+=n.length,s.push(n)}const r=Buffer.concat(s,t),n=encodeLength(t,192);return Buffer.concat([n,r],n.length+t)}if(null==e){const e=Buffer.allocUnsafe(1);return e[0]=128,e}{const t=e.length;if(1===t&&e[0]<128)return e;{const s=encodeLength(t,128);return Buffer.concat([s,e],s.length+t)}}}function encodeLength(e,t){if(e<56){const s=Buffer.allocUnsafe(1);return s[0]=e+t,s}{const s=n.uintToBuffer(e),r=s.length,i=n.uintToBuffer(t+55+r);return Buffer.concat([i,s],i.length+r)}}t.encodeRange=function encodeRange(e,t,s){let r=0;const n=t+s,i=[];for(var o=t;o<n;o++){const t=encode(e[o]);r+=t.length,i.push(t)}return{length:r,output:i}},t.digest=function digest(e,t){const s=encodeLength(t,192),r=s.length,n=Buffer.allocUnsafe(r+t);s.copy(n,0,0,r);let i=r;for(let t=0,s=e.length;t<s;t++){const s=e[t];for(let e=0,t=s.length;e<t;e++){const t=s[e],r=t.length;t.copy(n,i,0,r),i+=r}}return n},t.encode=encode,t.encodeLength=encodeLength,t.decode=function decode(e){return r.decode(e)}},145:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const path_1=__webpack_require__(13);let secp256k1;try{const nodeRequire=eval("require"),path=nodeRequire.resolve("secp256k1/package.json"),dir=path_1.dirname(path),nodeGypBuild=__webpack_require__(418),{Secp256k1}=nodeGypBuild(dir);secp256k1=new Secp256k1}catch{secp256k1=__webpack_require__(419)}exports.default=secp256k1},1:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PromiEvent=t.JsonRpcErrorCode=t.makeResponse=t.makeRequest=t.makeError=void 0,n(s(71),t),n(s(12),t),n(s(696),t),n(s(389),t),n(s(388),t);var o=s(390);Object.defineProperty(t,"makeError",{enumerable:!0,get:function(){return o.makeError}}),Object.defineProperty(t,"makeRequest",{enumerable:!0,get:function(){return o.makeRequest}}),Object.defineProperty(t,"makeResponse",{enumerable:!0,get:function(){return o.makeResponse}}),Object.defineProperty(t,"JsonRpcErrorCode",{enumerable:!0,get:function(){return o.JsonRpcErrorCode}});var a=s(138);Object.defineProperty(t,"PromiEvent",{enumerable:!0,get:function(){return i(a).default}})},690:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toBigIntBE=t.toBufferBE=void 0;var r=s(237);Object.defineProperty(t,"toBufferBE",{enumerable:!0,get:function(){return r.toBufferBE}}),Object.defineProperty(t,"toBigIntBE",{enumerable:!0,get:function(){return r.toBigIntBE}})},17:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseJsonRpcType=t.toBuffers=t.toStrings=t.bufCache=t.strCache=void 0;const r=s(12),n=s(12),i=s(52);t.strCache=new WeakMap,t.bufCache=new WeakMap,t.toStrings=new WeakMap,t.toBuffers=new WeakMap;const o=Symbol.for("nodejs.util.inspect.custom");t.BaseJsonRpcType=class BaseJsonRpcType{constructor(e){const s=this;if(Buffer.isBuffer(e))t.toStrings.set(this,(()=>e.toString("hex"))),t.bufCache.set(this,e),s[Symbol.toStringTag]="Buffer";else{const o=typeof e;switch(o){case"number":if(e%1!=0)throw new Error("`Cannot wrap a decimal value as a json-rpc type`");t.toStrings.set(this,(()=>e.toString(16))),t.toBuffers.set(this,(()=>0===e?i.BUFFER_EMPTY:n.uintToBuffer(e)));break;case"bigint":t.toStrings.set(this,(()=>e.toString(16))),t.toBuffers.set(this,(()=>0n===e?i.BUFFER_EMPTY:r.bigIntToBuffer(e)));break;case"string":if(0!==e.indexOf("0x"))throw new Error(`cannot convert string value "${e}" into type \`${this.constructor.name}\`; strings must be hex-encoded and prefixed with "0x".`);t.strCache.set(this,e.toLowerCase()),t.toBuffers.set(this,(()=>{let t=e.slice(2);return t.length%2==1&&(t="0"+t),Buffer.from(t,"hex")}));break;default:if(null==e){this.toString=()=>e,t.bufCache.set(this,i.BUFFER_EMPTY);break}throw new Error(`Cannot wrap a "${o}" as a json-rpc type`)}s[Symbol.toStringTag]=o}this.value=e}[o](e,t){return this.value}toString(){let e=t.strCache.get(this);return void 0===e&&(e="0x"+t.toStrings.get(this)(),t.strCache.set(this,e)),e}toBuffer(){let e=t.bufCache.get(this);return void 0===e&&(e=t.toBuffers.get(this)(),t.bufCache.set(this,e)),e}valueOf(){return this.value}toJSON(){return this.toString()}isNull(){return null==this.value}}},388:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Data=void 0;const r=s(17),n=s(17);function validateByteLength(e){if("number"!=typeof e||e<0)throw new Error("byteLength must be a number greater than 0")}const i=new WeakMap;class Data extends r.BaseJsonRpcType{constructor(e,t){if("bigint"==typeof e)throw new Error(`Cannot create a ${typeof e} as a Data`);super(e),void 0!==t&&(validateByteLength(t),i.set(this,0|t))}toString(e){const t=n.strCache.get(this);if(void 0!==t)return t;{let t=n.toStrings.get(this)(),s=t.length;if(s%2==1&&(s++,t=`0${t}`),void 0!==e?validateByteLength(e):e=i.get(this),void 0!==e){const r=2*e,n=r-s;n<0?t=t.slice(0,r):n>0&&(t="0".repeat(n)+t)}return`0x${t}`}}static from(e,t){return new Data(e,t)}}t.Data=Data},389:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Quantity=void 0;const r=s(12),n=s(17);class Quantity extends n.BaseJsonRpcType{constructor(){super(...arguments),this._nullable=!1}static from(e,t=!1){if(e instanceof Quantity)return e;const s=new Quantity(e);return s._nullable=t,s}toString(){if(Buffer.isBuffer(this.value)){let e=this.value.toString("hex").replace(/^(?:0+(.+?))?$/,"$1");return""===e?this._nullable?null:"0x0":`0x${e}`}return null==this.value?"0x":super.toString()}toBuffer(){if(Buffer.isBuffer(this.value)){let e=0;for(e=0;e<this.value.length&&0===this.value[e];e++);return e>0?this.value.slice(e):this.value}if("string"==typeof this.value){let e=this.value.slice(2).replace(/^(?:0+(.+?))?$/,"$1");if(""===e||"0"===e)return r.BUFFER_EMPTY}else if(0===this.value||0n===this.value)return r.BUFFER_EMPTY;return super.toBuffer()}toBigInt(){const e=this.value;if(Buffer.isBuffer(e)){const t=r.bufferToBigInt(e);return null==t?this._nullable?null:0n:t}return null==e?this._nullable?null:0n:BigInt(e)}toNumber(){return"number"==typeof this.value?this.value:Number(this.toBigInt())}valueOf(){const e=this.value;return null==e?e:this.toBigInt()}}t.Quantity=Quantity,t.default=Quantity},390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcErrorCode=t.makeError=t.makeResponse=t.makeRequest=void 0;const s="2.0";t.makeRequest=e=>({id:e.id,jsonrpc:s,method:e.method,params:e.params});t.makeResponse=(e,t)=>({id:e,jsonrpc:s,result:t});t.makeError=(e,t,r)=>{const n={message:t.message};return Object.getOwnPropertyNames(t).forEach((e=>{"string"==typeof e&&(n[e]=t[e])})),"number"!=typeof n.code&&(n.code=-32700),void 0!==r?{id:e,jsonrpc:s,error:n,result:r}:{id:e,jsonrpc:s,error:n}},function(e){e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",e[e.INVALID_INPUT=-32e3]="INVALID_INPUT",e[e.TRANSACTION_REJECTED=-32003]="TRANSACTION_REJECTED",e[e.METHOD_NOT_SUPPORTED=-32004]="METHOD_NOT_SUPPORTED",e[e.LIMIT_EXCEEDED=-32005]="LIMIT_EXCEEDED",e[e.JSON_RPC_VERSION_NOT_SUPPORTED=-32006]="JSON_RPC_VERSION_NOT_SUPPORTED"}(t.JsonRpcErrorCode||(t.JsonRpcErrorCode={}))},138:function(e,t,s){"use strict";var r,n=this&&this.__decorate||function(e,t,s,r){var n,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,s,o):n(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(s(53)),a=["clearListeners","once","on","emit","onAny"];let c=r=class PromiEvent extends Promise{constructor(e){super(e),this.dispose=()=>{if(!this.clearListeners)throw new Error("PromiEvent already disposed");this.clearListeners();const fn=()=>{throw new Error("PromiEvent bound after dispose")};a.filter((e=>"emit"!==e)).forEach((e=>{Object.defineProperty(this,e,{enumerable:!1,value:fn})}))}}catch(e){const t=new r(((s,r)=>{this.onAny(((e,s)=>t.emit(e,s)));super.catch(e).then(s,r)}));return t}static resolve(e){return new r((t=>{t(e)}))}};c=r=n([o.default.mixin(Symbol.for("emittery"),a)],c),t.default=c},696:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},688:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},686:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},71:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(s(686),t),n(s(687),t),n(s(688),t)},687:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},689:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bigIntToBuffer=void 0;const r=s(690),n=s(386),i=Buffer.allocUnsafe;let o;function bigIntByteLength(e){let t=1;for(;e>>=8n;)t++;return t}const a=BigInt(Number.MAX_SAFE_INTEGER);try{if(!r.toBufferBE)throw new Error("Missing function `toBufferBE`!");o=e=>{if(e<=a)return n.uintToBuffer(Number(e));{const t=bigIntByteLength(e);return r.toBufferBE(e,t)}}}catch(e){o=e=>{if(e<=a)return n.uintToBuffer(Number(e));{let t=bigIntByteLength(e);const s=i(t);do{s[--t]=Number(0xffffffffn&e),e>>=8n}while(t);return s}}}t.bigIntToBuffer=o},691:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bufferToBigInt=void 0;const r=s(237);t.bufferToBigInt=function bufferToBigInt(e){const t=e.byteLength;if(0===t)return null;if(t<=6)return BigInt(e.readUIntBE(0,t));let s;if(7===t){const t=new Uint8Array(8);t.set(e,1),s=new DataView(t.buffer)}else{if(8!==t)return r.toBigIntBE(e);s=new DataView(e.buffer,e.byteOffset,t)}return s.getBigUint64(0)}},694:(e,t)=>{"use strict";let s;Object.defineProperty(t,"__esModule",{value:!0}),t.bufferToMinHexKey=void 0,s="function"==typeof Buffer.prototype.latin1Slice?(e,t,s)=>e.hexSlice(t,s):(e,t,s)=>e.slice(t,s).toString("hex"),t.bufferToMinHexKey=function bufferToMinHexKey(e){for(let t=0,n=e.byteLength;t<n;t++){const i=e[t];if(0!==i)return t+1===n?r[i]:s(e,t,n)}return""};const r=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"]},52:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KNOWN_CHAINIDS=t.WEI=t.RPCQUANTITY_ONE=t.RPCQUANTITY_ZERO=t.RPCQUANTITY_EMPTY=t.DATA_EMPTY=t.BUFFER_8_ZERO=t.BUFFER_32_ZERO=t.BUFFER_ZERO=t.BUFFER_EMPTY=t.ACCOUNT_ZERO=t.BUFFER_256_ZERO=void 0;const r=s(388),n=s(389);t.BUFFER_256_ZERO=Buffer.allocUnsafe(256).fill(0),t.ACCOUNT_ZERO=t.BUFFER_256_ZERO.slice(0,20),t.BUFFER_EMPTY=Buffer.allocUnsafe(0),t.BUFFER_ZERO=t.BUFFER_256_ZERO.slice(0,1),t.BUFFER_32_ZERO=t.BUFFER_256_ZERO.slice(0,32),t.BUFFER_8_ZERO=t.BUFFER_256_ZERO.slice(0,8),t.DATA_EMPTY=r.Data.from(t.BUFFER_EMPTY),t.RPCQUANTITY_EMPTY=n.Quantity.from(t.BUFFER_EMPTY,!0),t.RPCQUANTITY_ZERO=n.Quantity.from(t.BUFFER_ZERO),t.RPCQUANTITY_ONE=n.Quantity.from(1n),t.WEI=1000000000000000000n,t.KNOWN_CHAINIDS=new Set([1,3,4,5,42])},135:function(e,t,s){"use strict";var r,n=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},i=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Executor=void 0;const o=s(387);t.Executor=class Executor{constructor(e){r.set(this,void 0),n(this,r,e)}execute(e,t,s){if("string"==typeof t&&(o.hasOwn(e.__proto__,t)&&"constructor"!==t||o.hasOwn(e,t))){const n=e[t];if("function"==typeof n)return i(this,r).queue(n,e,s)}throw new Error(`The method ${t} does not exist/is not available`)}},r=new WeakMap},695:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findInsertPosition=void 0,t.findInsertPosition=function findInsertPosition(e,t,s){let r=e.length,n=0,i=0;for(;r>0;){const o=r/2|0;i+=o,s(t,e[i])?(r=o,i=n):(n=++i,r-=o+1)}return n}},387:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasOwn=void 0;const s={}.hasOwnProperty.call.bind({}.hasOwnProperty);t.hasOwn=(e,t)=>null!=e&&s(e,t)},692:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Heap=void 0;class Heap{constructor(e,t){this.length=0,this.array=[],this.less=e,this.refresher=t}init(e){this.array=e;const t=this.length=e.length;for(let e=(t/2|0)-1;e>=0;)this.down(e--,t)}refresh(e){const t=this.length,s=t/2|0;for(let r=s;r<t;r++)this.refresher(this.array[r],e);for(let r=s-1;r>=0;)this.refresher(this.array[r],e),this.down(r--,t)}push(e){const t=this.length++;this.array[t]=e,this.up(t)}size(){return this.length}peek(){return this.array[0]}clear(){this.length=this.array.length=0}shift(){const e=this.length;if(e<=1){if(0===e)return;const t=this.array[0];return this.clear(),t}const t=this.array,s=t[0],r=this.length=e-1;return t[0]=t[r],this.down(0,r),s}replaceBest(e){this.array[0]=e,this.down(0,this.length)}replace(e,t){this.array[e]=t,this.fix(e)}remove(e){const t=--this.length;t!==e&&(this.swap(e,t),this.down(e,t)||this.up(e))}removeBest(){const e=this.array;if(1===this.length)return this.length=e.length=0,!1;const t=--this.length;return e[0]=e[t],this.down(0,t),!0}fix(e){this.down(e,this.length)||this.up(e)}up(e){const t=this.less.bind(null,this.array);for(let s;s=(e-1)/2|0,s!==e&&t(e,s);e=s)this.swap(s,e)}down(e,t){const s=this.less.bind(null,this.array);let r,n=e;for(;(r=2*n+1)<t;){let e=r,i=r+1;if(i<t&&s(i,r)&&(e=i),!s(e,n))break;this.swap(n,e),n=e}return n>e}swap(e,t){const s=this.array,r=s[e];s[e]=s[t],s[t]=r}static from(e,t,s){const r=new Heap(t,s);return r.array=[e],r.length=1,r}}t.Heap=Heap},12:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(s(689),t),n(s(691),t),n(s(135),t),n(s(692),t),n(s(136),t),n(s(693),t),n(s(387),t),n(s(386),t),n(s(52),t),n(s(694),t),n(s(238),t),n(s(695),t),n(s(239),t)},238:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.keccak=void 0;const n=r(s(165)),i=n.default("keccak256");t.keccak=function keccak(e){i._state.absorb(e);const t=i._state.squeeze(32);return i._state.initialize(1088,512),i._finalized=!1,t}},239:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RandomNumberGenerator=void 0;const n=r(s(137));t.RandomNumberGenerator=class RandomNumberGenerator{constructor(e,t){if("string"==typeof e&&void 0===t)this.rng=n.default.alea(e,{state:!0});else if("object"==typeof t)this.rng=n.default.alea("",{state:t});else{const e=Math.random()*Date.now();this.rng=n.default.alea(`${e}`,{state:!0})}}getNumber(e=1){return 1!==e?this.rng()*e:this.rng()}getNumbers(e,t=1){const s=[];for(let r=0;r<e;r++)s.push(this.getNumber(t));return s}getBuffer(e){return Buffer.from(this.getNumbers(e,256))}state(){return this.rng.state()}}},136:function(e,t){"use strict";var s,r,n=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},i=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.RequestCoordinator=void 0;const noop=()=>{};t.RequestCoordinator=class RequestCoordinator{constructor(e){this.pending=[],this.runningTasks=0,s.set(this,!0),this.pause=()=>{n(this,s,!0)},this.resume=()=>{n(this,s,!1),i(this,r).call(this)},r.set(this,(()=>{for(;!this.paused&&this.pending.length>0&&(!this.limit||this.runningTasks<this.limit);){const e=this.pending.shift();this.runningTasks++,e().catch(noop).finally((()=>{this.runningTasks--,i(this,r).call(this)}))}})),this.queue=(e,t,s)=>new Promise(((n,o)=>{this.pending.push((async()=>{try{const r=Reflect.apply(e,t,s||[]);return n({value:r}),r}catch(e){o(e)}})),i(this,r).call(this)})),this.limit=e}get paused(){return i(this,s)}},s=new WeakMap,r=new WeakMap},386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uintToBuffer=void 0;const s=4294967295,r=Buffer.allocUnsafe;t.uintToBuffer=function uintToBuffer(e){return e>s?function uintWideToBuf(e){let t,n=Number(BigInt(e)>>32n);const i=n;let o=0;if(n>>>=8){const e=n;if(n>>>=8){const s=n;(n>>>=8)?(t=r(8),t[0]=n,t[1]=s,t[2]=e,t[3]=i,o=7):(t=r(7),t[0]=s,t[1]=e,t[2]=i,o=6)}else t=r(6),t[0]=e,t[1]=i,o=5}else t=r(5),t[0]=i,o=4;let a=e&s;const c=a;if(a>>>=8){const e=a;if(a>>>=8){const s=a;t[o-3]=a>>>=8,t[o-2]=s,t[o-1]=e,t[o]=c}else t[o-3]=0,t[o-2]=0,t[o-1]=e,t[o]=c}else t[o-3]=0,t[o-2]=0,t[o-1]=0,t[o]=c;return t}(e):function uint32ToBuf(e){let t;const s=e;if(e>>>=8){const n=e;if(e>>>=8){const i=e;(e>>>=8)?(t=r(4),t[0]=e,t[1]=i,t[2]=n,t[3]=s):(t=r(3),t[0]=i,t[1]=n,t[2]=s)}else t=r(2),t[0]=n,t[1]=s}else t=r(1),t[0]=s;return t}(e)}},693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unref=void 0,t.unref=function unref(e){return"object"==typeof e&&"function"==typeof e.unref&&(e.unref(),!0)}}};
//# sourceMappingURL=1.js.map